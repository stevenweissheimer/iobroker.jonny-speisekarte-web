{"version":3,"sources":["Logo.js"],"names":["styles","theme","buttons","marginRight","marginTop","logo","padding","width","Logo","evt","f","target","files","r","window","FileReader","onload","e","contents","result","json","JSON","parse","common","name","props","onError","I18n","t","onLoad","toString","readAsText","alert","_id","instance","stringify","news","titleLang","desc","generateFile","input","document","createElement","setAttribute","addEventListener","handleFileSelect","click","className","style","icon","classes","readme","win","open","focus","upload","download","filename","obj","el","encodeURIComponent","display","body","appendChild","removeChild","React","Component","propTypes","PropTypes","object","isRequired","string","number","func","_export"],"mappings":"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","sourcesContent":["// please do not delete React, as without it other projects could not be compiled: ReferenceError: React is not defined\r\nimport React from 'react';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport I18n from '../i18n';\r\n\r\nimport IconHelp from '@material-ui/icons/Help'\r\nimport IconUpload from '@material-ui/icons/VerticalAlignTop'\r\nimport IconDownload from '@material-ui/icons/VerticalAlignBottom'\r\n\r\nconst styles = theme => ({\r\n    buttons: {\r\n        marginRight: 5,\r\n        marginTop: 5,\r\n        float: 'right'\r\n    },\r\n    logo: {\r\n        padding: 8,\r\n        width: 64\r\n    }\r\n});\r\n\r\n/**\r\n * @typedef {object} LogoProps\r\n * @property {any} common Adapter common configuration from io-package.json\r\n * @property {any} native Adapter native data from io-package.json\r\n * @property {number} instance Adapter instance number.\r\n * @property {(contents: any) => void} [onLoad]\r\n * @property {(error: string) => void} [onError]\r\n * @property {{ buttons: string, logo: string }} classes The styling class names.\r\n *\r\n * @extends {React.Component<LogoProps>}\r\n */\r\nclass Logo extends React.Component {\r\n\r\n    static generateFile(filename, obj) {\r\n        const el = window.document.createElement('a');\r\n        el.setAttribute('href', 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(obj, null, 2)));\r\n        el.setAttribute('download', filename);\r\n\r\n        el.style.display = 'none';\r\n        window.document.body.appendChild(el);\r\n\r\n        el.click();\r\n\r\n        window.document.body.removeChild(el);\r\n    }\r\n\r\n    handleFileSelect(evt) {\r\n        const f = evt.target.files[0];\r\n        if (f) {\r\n            const r = new window.FileReader();\r\n            r.onload = e => {\r\n                const contents = e.target.result;\r\n                try {\r\n                    const json = JSON.parse(contents);\r\n                    if (json.native && json.common) {\r\n                        if (json.common.name !== this.props.common.name) {\r\n                            this.props.onError(I18n.t('ra_otherConfig', json.common.name));\r\n                        } else {\r\n                            this.props.onLoad(json.native);\r\n                        }\r\n                    } else {\r\n                        this.props.onError(I18n.t('ra_invalidConfig'));\r\n                    }\r\n                } catch (e) {\r\n                    this.props.onError(e.toString());\r\n                }\r\n            };\r\n            r.readAsText(f);\r\n        } else {\r\n            alert('Failed to open JSON File');\r\n        }\r\n    }\r\n\r\n    download() {\r\n        const result = {\r\n            _id: 'system.adapter.' + this.props.common.name + '.' + this.props.instance,\r\n            common: JSON.parse(JSON.stringify(this.props.common)),\r\n            native: this.props.native\r\n        };\r\n        // remove unimportant information\r\n        if (result.common.news) {\r\n            delete result.common.news;\r\n        }\r\n        if (result.common.titleLang) {\r\n            delete result.common.titleLang;\r\n        }\r\n        if (result.common.desc) {\r\n            delete result.common.desc;\r\n        }\r\n\r\n        //window.open('data:application/iobroker; content-disposition=attachment; filename=' + result._id + '.json,' + JSON.stringify(result, null, 2));\r\n        Logo.generateFile(result._id + '.json', result);\r\n    }\r\n\r\n    upload() {\r\n        const input = window.document.createElement('input');\r\n        input.setAttribute('type', 'file');\r\n        input.setAttribute('id', 'files');\r\n        input.setAttribute('opacity', 0);\r\n        input.addEventListener('change', e => this.handleFileSelect(e, () => {}), false);\r\n        (input.click)();\r\n    }\r\n\r\n    render() {\r\n        return <div className={this.props.className} style={this.props.style}>\r\n            {this.props.common.icon ? <img src={this.props.common.icon} className={this.props.classes.logo} alt=\"logo\"/> : null}\r\n            {this.props.common.readme ?\r\n                <Fab size=\"small\" color=\"primary\" aria-label=\"Help\" className={this.props.classes.buttons} onClick={() => {\r\n                    const win = window.open(this.props.common.readme, '_blank');\r\n                    win.focus();\r\n                }}><IconHelp /></Fab> : null}\r\n            <Fab size=\"small\" color=\"primary\" aria-label=\"Load config\" className={this.props.classes.buttons} title={I18n.t('ra_Load configuration from file')} onClick={() => this.upload()}><IconUpload /></Fab>\r\n            <Fab size=\"small\" color=\"primary\" aria-label=\"Save config\" className={this.props.classes.buttons} title={I18n.t('ra_Save configuration to file')} onClick={() => this.download()}><IconDownload /></Fab>\r\n        </div>;\r\n    }\r\n}\r\n\r\nLogo.propTypes = {\r\n    common: PropTypes.object.isRequired,\r\n    className: PropTypes.string,\r\n    style: PropTypes.object,\r\n    native: PropTypes.object.isRequired,\r\n    instance: PropTypes.number.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n};\r\n\r\n/** @type {typeof Logo} */\r\nconst _export = withStyles(styles)(Logo);\r\nexport default _export;"],"file":"Logo.js"}