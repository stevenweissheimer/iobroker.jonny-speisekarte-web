{"version":3,"sources":["Confirm.js"],"names":["styles","suppress","fontSize","suppressRoot","marginTop","DialogConfirm","props","dialogName","suppressQuestionMinutes","Error","parseInt","window","localStorage","getItem","Date","now","removeItem","state","setItem","onClose","setTimeout","key","handleCancel","title","I18n","t","icon","text","label","classes","root","setState","suppressText","handleOk","ok","cancel","React","Component","propTypes","PropTypes","string","func","object","number","_export"],"mappings":"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","sourcesContent":["/**\r\n * Copyright 2019 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\n\r\n// please do not delete React, as without it other projects could not be compiled: ReferenceError: React is not defined\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport I18n from '../i18n';\r\n\r\nconst styles = {\r\n    suppress: {\r\n        fontSize: 12,\r\n    },\r\n    suppressRoot: {\r\n        marginTop: 16\r\n    }\r\n};\r\n\r\n/**\r\n * @typedef {object} DialogConfirmProps\r\n * @property {string} [key] The key to identify this component.\r\n * @property {string} [title] The dialog title; default: Are you sure? (translated)\r\n * @property {string} text The dialog text.\r\n * @property {string} [ok] The ok button text; default: OK (translated)\r\n * @property {string} [cancel] The cancel button text; default: Cancel (translated)\r\n * @property {string} [suppressQuestionMinutes] interval in minutes for which the confirm dialog will be suppressed if activated.\r\n * @property {string} [suppressText] The suppress checkbox text; default: Suppress question for next %s minutes (translated)\r\n * @property {string} [dialogName] Name of the dialog. Used only with suppressQuestionMinutes to store the user choice\r\n * @property {(ok: boolean) => void} [onClose] Close handler.\r\n *\r\n * @extends {React.Component<DialogConfirmProps>}\r\n */\r\nclass DialogConfirm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (!this.props.dialogName && this.props.suppressQuestionMinutes) {\r\n            throw new Error('dialogName required if suppressQuestionMinutes used');\r\n        }\r\n        let suppress = false;\r\n\r\n        if (this.props.suppressQuestionMinutes) {\r\n            suppress = parseInt(window.localStorage.getItem(this.props.dialogName), 10) || 0;\r\n\r\n            if (!suppress) {\r\n                suppress = false;\r\n            } else if (Date.now() > suppress) {\r\n                window.localStorage.removeItem(this.props.dialogName);\r\n                suppress = false;\r\n            }\r\n        }\r\n\r\n        this.state = {\r\n            suppress,\r\n        };\r\n    }\r\n\r\n    handleOk() {\r\n        if (this.state.suppress) {\r\n            window.localStorage.setItem(this.props.dialogName, Date.now() + this.props.suppressQuestionMinutes * 60000);\r\n        }\r\n        this.props.onClose && this.props.onClose(true);\r\n    };\r\n\r\n    handleCancel() {\r\n        this.props.onClose && this.props.onClose(false);\r\n    };\r\n\r\n    render() {\r\n        if (typeof this.state.suppress === 'number') {\r\n            setTimeout(() => this.props.onClose && this.props.onClose(true), 100);\r\n            return null;\r\n        }\r\n\r\n        return <Dialog\r\n            key={this.props.key}\r\n            disableBackdropClick\r\n            disableEscapeKeyDown\r\n            open={true}\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            onClose={() => this.handleCancel()}\r\n            aria-labelledby=\"confirmation-dialog-title\"\r\n            aria-describedby=\"confirmation-dialog-description\"\r\n        >\r\n            <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('ra_Are you sure?')}</DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText id=\"confirmation-dialog-description\">\r\n                    {this.props.icon || null}\r\n                    {this.props.text}\r\n                    {this.props.suppressQuestionMinutes ? <br/> : null}\r\n                    {this.props.suppressQuestionMinutes ?\r\n                        <FormControlLabel\r\n                            classes={{label: this.props.classes.suppress, root: this.props.classes.suppressRoot}}\r\n                            control={<Checkbox checked={!!this.state.suppress} onChange={() => this.setState({suppress: !this.state.suppress})} />}\r\n                            label={this.props.suppressText || I18n.t('ra_Suppress question for next %s minutes', this.props.suppressQuestionMinutes)}\r\n                        /> :\r\n                        null}\r\n                </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" onClick={() => this.handleOk()} color=\"primary\" autoFocus>{this.props.ok || I18n.t('ra_Ok')}</Button>\r\n                <Button variant=\"contained\" onClick={() => this.handleCancel()}>{this.props.cancel || I18n.t('ra_Cancel')}</Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nDialogConfirm.propTypes = {\r\n    key: PropTypes.string,\r\n    onClose: PropTypes.func,\r\n    title: PropTypes.string,\r\n    text: PropTypes.string,\r\n    ok: PropTypes.string,\r\n    cancel: PropTypes.string,\r\n    icon: PropTypes.object,\r\n    suppressQuestionMinutes: PropTypes.number,\r\n    suppressText: PropTypes.string,\r\n    dialogName: PropTypes.string,\r\n};\r\n\r\nconst _export = withStyles(styles)(DialogConfirm);\r\nexport default _export;"],"file":"Confirm.js"}