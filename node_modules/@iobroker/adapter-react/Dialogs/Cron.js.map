{"version":3,"sources":["Cron.js"],"names":["styles","theme","headerID","fontWeight","fontStyle","radio","display","dialogPaper","height","buttonIcon","marginRight","spacing","DialogCron","props","cron","replace","trim","state","mode","simple","SimpleCron","cron2state","onClose","onOk","setState","paper","classes","title","I18n","t","overflow","e","setMode","color","getLanguage","handleOk","ok","handleCancel","cancel","React","Component","propTypes","PropTypes","object","func","isRequired","string","bool","language"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from '@material-ui/core/styles/index';\n\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\nimport Radio from '@material-ui/core/Radio';\n\nimport IconOk from '@material-ui/icons/Check';\nimport IconCancel from '@material-ui/icons/Cancel';\n\nimport ComplexCron from '../Components/ComplexCron';\nimport SimpleCron from '../Components/SimpleCron';\nimport Schedule from '../Components/Schedule';\n\nimport I18n from '../i18n';\n\n// Generate cron expression\n\nconst styles = theme => ({\n    headerID: {\n        fontWeight: 'bold',\n        fontStyle: 'italic'\n    },\n    radio: {\n        display: 'inline-block'\n    },\n    dialogPaper: {\n        height: 'calc(100% - 96px)'\n    },\n    buttonIcon: {\n        marginRight: theme.spacing(1),\n    }\n});\n\nclass DialogCron extends React.Component {\n    constructor(props) {\n        super(props);\n        let cron;\n        if (this.props.cron && typeof this.props.cron === 'string' && this.props.cron.replace(/^[\"']/, '')[0] !== '{') {\n            cron = this.props.cron.replace(/['\"]/g, '').trim();\n        } else {\n            cron = this.props.cron || '{}';\n            if (typeof cron === 'string') {\n                cron = cron.replace(/^[\"']/, '').replace(/[\"']\\n?$/, '');\n            }\n        }\n\n        this.state =  {\n            cron,\n            mode: this.props.simple ?\n                'simple' :\n                (typeof cron === 'object' || cron[0] === '{' ?\n                    'wizard' :\n                    (SimpleCron.cron2state(this.props.cron || '* * * * *') ? 'simple' : 'complex'))\n        };\n    }\n\n    handleCancel() {\n        this.props.onClose();\n    }\n\n    handleOk() {\n        this.props.onOk(this.state.cron);\n        this.props.onClose();\n    }\n\n    setMode(mode) {\n        this.setState({mode});\n    }\n\n    render() {\n        return <Dialog\n            disableBackdropClick\n            disableEscapeKeyDown\n            maxWidth=\"md\"\n            fullWidth={true}\n            classes={{paper: this.props.classes.dialogPaper}}\n            open={true}\n            aria-labelledby=\"cron-dialog-title\"\n        >\n            <DialogTitle id=\"cron-dialog-title\">{this.props.title || I18n.t('ra_Define schedule...')}</DialogTitle>\n            <DialogContent style={{height: '100%', overflow: 'hidden'}}>\n                {!this.props.simple && <div>\n                    <Radio\n                        key=\"wizard\"\n                        checked={this.state.mode === 'wizard'}\n                        onChange={e => this.setMode('wizard')}\n                    /><label onClick={e => this.setMode('wizard')}\n                             style={this.state.mode !== 'wizard' ? {color: 'lightgrey'} : {}}>{I18n.t('sc_wizard')}</label>\n\n                    <Radio\n                        key=\"simple\"\n                        checked={this.state.mode === 'simple'}\n                        onChange={e => this.setMode('simple')}\n                    /><label onClick={e => this.setMode('simple')}\n                             style={this.state.mode !== 'simple' ? {color: 'lightgrey'} : {}}>{I18n.t('sc_simple')}</label>\n                    <Radio\n                        key=\"complex\"\n                        checked={this.state.mode === 'complex'}\n                        onChange={e => this.setMode('complex')}\n                    /><label onClick={e => this.setMode('complex')} style={this.state.mode !== 'complex' ? {color: 'lightgrey'} : {}}>{I18n.t('sc_cron')}</label></div>}\n\n                {this.state.mode === 'simple' && <SimpleCron\n                    cronExpression={this.state.cron}\n                    onChange={cron => this.setState({cron})}\n                    language={I18n.getLanguage()}\n                />}\n                {this.state.mode === 'wizard' && <Schedule\n                    schedule={this.state.cron}\n                    onChange={cron => this.setState({cron})}\n                    language={I18n.getLanguage()}\n                />}\n                {this.state.mode === 'complex' && <ComplexCron\n                    cronExpression={this.state.cron}\n                    onChange={cron => this.setState({cron})}\n                    language={I18n.getLanguage()}\n                />}\n            </DialogContent>\n            <DialogActions>\n                <Button variant=\"contained\" onClick={() => this.handleOk()} color=\"primary\"><IconOk className={this.props.classes.buttonIcon}/>{this.props.ok || I18n.t('ra_Ok')}</Button>\n                <Button variant=\"contained\" onClick={() => this.handleCancel()}><IconCancel className={this.props.classes.buttonIcon}/>{this.props.cancel || I18n.t('ra_Cancel')}</Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nDialogCron.propTypes = {\n    classes: PropTypes.object,\n    onClose: PropTypes.func,\n    onOk: PropTypes.func.isRequired,\n    title: PropTypes.string,\n    cron: PropTypes.string,\n    cancel: PropTypes.string,\n    ok: PropTypes.string,\n    simple: PropTypes.bool,\n    language: PropTypes.string\n\n};\n\nexport default withStyles(styles)(DialogCron);\n"],"file":"Cron.js"}