(this["webpackJsonpsrc-rx"]=this["webpackJsonpsrc-rx"]||[]).push([[11],{1583:function(t,e,a){"use strict";var s=a(19),n=a(25);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a(0)),o=(0,s(a(27)).default)(r.createElement("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"}),"BugReport");e.default=o},1587:function(t,e,a){"use strict";var s=a(19),n=a(25);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a(0)),o=(0,s(a(27)).default)(r.createElement("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"}),"InsertDriveFile");e.default=o},1637:function(t,e,a){"use strict";a.r(e),e.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAbCAYAAADMIInqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAiPSURBVFhH7Zd7UFTXGcDPvXffy8IusMsbQUEgoyiKD4pBnoKgVkoRX1WpNia2QZ2MzFTS2MykmlqiMzWJqSUxJq1KG0VrE0GxqSgSNVEx4SEaAeXNLrDsLvve2+/cvQusgIHWf2jymzns+b5zLvd+3/nOd75DoGEsWJDLaWvrXsXhcH/S3a0ODArynqfRDLRptfo6qVRcRdOGww8fftbGTv+/YNAB/v4ZsSrVQJHBYAunaVb5BBwOMri58farVI9eR+iejVVPakj8x8dn6cKWlv5zev3YxmMsFiRQqYyv8fleb+XnH2CenexQ2JCqqroLRiMKYHWIzyctLi680ujo4Aa93nDfbDZ72WxIYB/FQUMsbG5+VNHf/6DRrpu8kFeu3EnRaKzhrIxEIq5ZLhdHqdUXMior31+mVJ5fFhKiiBCLqXp2CrJaETKbyTxWnNSQtbWP5w4Pe3d30cWWln9+w4oMdXV/bw8K8tgLZoNkYZpeb5zLDE5yIJ7n7EZI8jtWRl5eLl91dn4azYqDxMZu4ldWVrqxaQMgIAnWK1lhkODgDLHNRuVqNIYMiJQ5Wq0JnCocsFjM/w4PD/ikqurop+zUUYHnY8xmIs9mIxI7O7V4QSDajJc8PEQfZ2fHXyguPhPa2KiLwXNJklLZbDf+wTw4Cr3rkUg8j5dDSYYOOyslRI8Ccs6FJP6J+XZizpz1+bduPf49M8pA0zKZ8N3U1NlvyeWuTYcOFTwlLToTGZmdcu9e9xGj0RZkzxXOEARtE4nIE/v2bdmVl7e+nVUzyGTpHKGQ+BCMXgOOG5FgKQr/tf4xPNxPUFPT8QKWeDzqlsn0rzEjsSMe+fCnCdtcFsG6DfscC0fwUZvPsp9PS3rbSoSHZ/k+eKBshAzPY8cZeDwSGnELHHJ51qyg6tWrUz5/+eW1j9jhESxevDn9xo3Gs3q9lcOqxkQm456fPj1g+fXrRyGbIHTsWAm1e/f7x1tbNauYCU+BJFE/JGRX3P9OByQgH/hpE8+XIEGE2K5kGRDKX3HL+foAWV9/qk0q5f8BDGWH7JhMNqTVWiGEbTsrKx9+uHPne80KRfrNmTPXrC0uLmXWw8HBg8dcqqtbPhgynrbKZLwTQUGibIR0yWFhnoVwqpjsYxCavaalarX6JVZE+/Z9tKS1td/JeD6f6AkOdi9FyPBmYKC0xh4BCDmMnwi6m1pk7hx8PYPQoNzfdSYujQ2MJCowUHQQPuJFCD+uXTc6sAJwUlAfgHO2InQZZ0SoI9JWt7frTzATwJEyGf/V3t6Lg3kFM2/ez1Lv3HlcajbbHe3pKap9553tkTk5aVZPz7RLSqU+kRkAKIq+BnljRXd3mQrLOEKOHy/PraioP6zXWwYjbLwRgPukkEL86SKnrUCI3S87bdTZs1dFNTX1boOhLEheMotl7O3v4cHfq1JdKMB9L6/0k52duhzcFwhI4+bNSTEkSTiVzFwuhywqKr/a32+aimU4blFUlL9XWFiQ9dSpqna12sA4nsslLYsXh0WXl79XjeXhBAdnHmps7PkVK07IAc6A2YSwhDM1ZpOTAxyUlFwSFxS8PVWpHIi3Wul4CO2EgQGLjB1mgPygjYz0nvbllye7CGJRBU1Tz2M9GA4RIGTmPEl/vxEyOrPtAfzb62XvSzuh0GZ6kO1rVKrzMxjhCcLCVkY0NPTU0rT9s/87B1CwqrzXBJk7C6V5ew2jlrOZmUm62tqSr7u6yg7BKmeFhMgVvr4SOCmGIgJyhItAIEjCfZp2GIX3KI3gTjFqGzIeg/8XlrHhQ+swZYqc7Y3Ez0+uFQqdcvXEILg6QiTP8v5c/wY2nlGtWZO/A380Bq8evOQvhYW7Rpzvu3Yd4BQVlTX39hp8WRVyc+Nvg4rxMIcTV2GxEEwEgAt0kHb+bO+PDZfLRb6+fr9pbm6AjYkjwJ7lpFJBTV9f2agREBW1NqK6urUWEiHDhCKA5tynvGf+VH7y9l1GduDvv0KPUBx4wN7k8uRUdsgJcADl4pLcAAcezMMtjl6wYAOTyYODV5506Pn8BGtW1o6ZzEPjIDd3j6tYnNzjeJ7LjTfHxm6cxQ474eGRCrdQx/sX0zxe4lfs0KhgB0CjO+Kos6r8nMG7znBIqNDO2EPQ3uC2V7h8+Q6nFcjKeoW4cuXuL3U6UyirgqsxaZNIRJW47+rK+8SxPaAIIq9evf9qQsJWp6MyJeVFF6Ew7ixCMfdwEwhi6yIjV8iOHn29381NeJudBtuE5lRWfvvuxo17IlgVKir6G7VkyUtbIA9B1ToBbIgmKOkBzozkHI/9xY9ZrRPEwoUb5l+/3nwN7gODHwz3fo1C4XpDpdLcNJstkLH5cZAIfwQJkZ2BjzHBZaWyLJ4VIXSTIXTNz+E+Ab6E2uJqQIDk47t3v33o7i71s9l4+X19RmYco1AIz3R1lWbifkzMhqVffNH0mSO5YSQSnkUs5pbDTbSZz+c/DxXic8Pfj/muLTAemDdGR6974/btlgJ8yxsfliaFQpIABjSxCuyAGSYTfRNWib02Pw1zvUQijtdoLsLet+Pnl36ktVX7C/aTxsWzcABzCqxbt2TP3LlTdkC1ph6e6Z8EanlIfLxrYrEoebjxmL6+8m9cXbmLoAgC/ej/Az/v4SG4A9Vd4nDjMf7+XtvCwhR/5XDwJWskoIdj0Ou0XO7Cap4NTu7Ozv61d0tLx4aamuZZUqlrUm+vjhmXSPidXC5V7evrfnrTprTzW7fmMEfIaCQnbxHX1bWt7OnRZXh6ypLUah0SiwUDRqPxWmCg/Nz8+aGnjxz5rXNdOgyIxpj2dvULcNOLV6sHRJ6erkip7CkJDQ06tX37j+/n5xc1dnRomLnPIgImFVASB3h7L4PwGt8pMB5GLYS+T/zgAPb3e8sPDmB/Jw34voKPREf730DoP5pKhvU07RMQAAAAAElFTkSuQmCC"},1816:function(t,e,a){"use strict";var s=a(19),n=a(25);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a(0)),o=(0,s(a(27)).default)(r.createElement("path",{d:"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}),"Cached");e.default=o},1837:function(t,e,a){"use strict";var s=a(5),n=a(7),r=a(0),o=a(6),i=(a(4),a(35)),c=a(8),l=r.forwardRef((function(t,e){var a=t.animation,i=void 0===a?"pulse":a,c=t.classes,l=t.className,d=t.component,p=void 0===d?"span":d,h=t.height,u=t.variant,b=void 0===u?"text":u,j=t.width,m=Object(n.a)(t,["animation","classes","className","component","height","variant","width"]),f=Boolean(m.children);return r.createElement(p,Object(s.a)({ref:e,className:Object(o.default)(c.root,c[b],l,f&&[c.withChildren,!j&&c.fitContent,!h&&c.heightAuto],!1!==i&&c[i])},m,{style:Object(s.a)({width:j,height:h},m.style)}))}));e.a=Object(c.a)((function(t){return{root:{display:"block",backgroundColor:Object(i.a)(t.palette.text.primary,"light"===t.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:t.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(t.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}}),{name:"MuiSkeleton"})(l)},2001:function(t,e,a){"use strict";var s=a(19),n=a(25);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a(0)),o=(0,s(a(27)).default)(r.createElement("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"}),"Computer");e.default=o},2002:function(t,e,a){"use strict";var s=a(19),n=a(25);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a(0)),o=(0,s(a(27)).default)(r.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send");e.default=o},2013:function(t,e,a){"use strict";a.r(e);var s=a(29),n=a.n(s),r=a(49),o=a(26),i=a(116),c=a(0),l=a(97),d=a.n(l),p=a(6),h=a(320),u=a(8),b=a(181),j=a(278),m=a(747),f=a(279),g=a(1440),x=a(1837),O=a(207),v=a.n(O),y=a(366),S=a.n(y),k=a(535),C=a.n(k),N=a(48),w=a.n(N),I=a(1583),T=a.n(I),_=a(140),A=a.n(_),L=a(160),H=a.n(L),B=a(252),R=a.n(B),D=a(427),W=a(521),P=a(530),F=a(500),M=a(52),J=a(496),z=a(497),E=a(502),U=a(331),V=a(499),X=a(1473),K=a(1474),q=a(1472),Q=a(611),G=a(633),Z=a(80),Y=a(1505),$=a(550),tt=a.n($),et=a(185),at=a.n(et),st=a(426),nt=a.n(st),rt=a(1816),ot=a.n(rt),it=a(291),ct=a.n(it),lt=a(60),dt=a.n(lt),pt=a(257),ht=a(258),ut=a(218),bt=a(492),jt=a(217),mt=a(342),ft=a(3),gt="-",xt="-",Ot="- %",vt="- %",yt="-",St=1,kt=1,Ct=1,Nt=["silly","debug","info","warn","error"],wt=Object(u.a)((function(t){return{root:{position:"relative",margin:10,width:300,minHeight:200,background:t.palette.background.default,boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .14),0 3px 1px -2px rgba(0, 0, 0, .12),0 1px 5px 0 rgba(0, 0, 0, .2)",display:"flex",flexDirection:"column",transition:"box-shadow 0.5s","&:hover":{boxShadow:"0 8px 17px 0 rgba(0, 0, 0, .2),0 6px 20px 0 rgba(0, 0, 0, .19)"},"& .warning":{backgroundColor:"#de0000 !important","&:before":{position:"absolute",right:0,top:-5,content:'"\u26a0"',fontSize:25,height:"30px",width:"30px",color:"black"},animation:"$warning 2.5s ease-in-out infinite alternate"}},"@keyframes warning":{"0%":{opacity:1},"100%":{opacity:.7}},imageBlock:{minHeight:60,display:"flex",padding:"0 10px 0 10px",position:"relative",justifyContent:"space-between",transition:"background 0.5s"},img:{width:45,height:45,margin:"auto 0",position:"relative","&:after":{content:'""',position:"absolute",zIndex:2,top:0,left:0,width:"100%",height:"100%",background:'url("img/no-image.png") 100% 100% no-repeat',backgroundSize:"cover",backgroundColor:"#fff"}},installed:{background:"#77c7ff8c"},fab:{position:"absolute",bottom:-20,width:40,height:40,right:20},collapse:{height:"100%",position:"absolute",width:"100%",zIndex:3,marginTop:"auto",bottom:0,transition:"height 0.3s",justifyContent:"space-between",display:"flex",flexDirection:"column"},collapseOff:{height:0},close:{width:20,height:20,opacity:.9,cursor:"pointer",position:"relative",marginLeft:"auto",marginBottom:10,transition:"all 0.6s ease","&:hover":{transform:"rotate(90deg)"},"&:before":{position:"absolute",left:9,content:'""',height:20,width:3,backgroundColor:"#ff4f4f",transform:"rotate(45deg)"},"&:after":{position:"absolute",left:9,content:'""',height:20,width:3,backgroundColor:"#ff4f4f",transform:"rotate(-45deg)"}},footerBlock:{background:t.palette.background.default,padding:10,display:"flex",justifyContent:"space-between"},hidden:{display:"none"},onOffLine:{alignSelf:"center",width:"100%",height:4},adapter:{width:"100%",fontWeight:"bold",fontSize:16,verticalAlign:"middle",paddingLeft:8,paddingTop:16,color:"dark"===t.palette.type?"#333":"#555"},cardContent:{marginTop:16,paddingTop:0},cardContentInfo:{overflow:"auto",paddingTop:0,backgroundColor:t.palette.background.paper,color:"dark"===t.palette.type?"#EEE":"#111"},cardContentH5:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingBottom:"10px !important"},marginTop10:{marginTop:10},displayFlex:{display:"flex"},marginLeft5:{marginLeft:5},enableButton:{display:"flex",justifyContent:"space-between",alignItems:"center"},instanceStateNotAlive1:{backgroundColor:"rgba(192, 192, 192, 0.4)"},instanceStateAliveNotConnected1:{backgroundColor:"rgba(255, 177, 0, 0.4)"},instanceStateAliveAndConnected1:{backgroundColor:"rgba(0, 255, 0, 0.4)"},green:{background:"#00ce00",position:"relative"},red:{background:"#da0000"},"@keyframes red":{"0%":{opacity:1},"100%":{opacity:.85}},dotLine:{width:50,height:"100%",background:"linear-gradient(90deg, rgba(0,206,0,0.7497373949579832) 0%, rgba(31,255,1,1) 50%, rgba(0,206,0,0.7805497198879552) 100%)",zIndex:2,position:"absolute",left:-11},"@keyframes colors":{"0%":{left:-51},"100%":{left:"101%"}},versionDate:{alignSelf:"center"},cardContentDiv:{position:"sticky",right:0,top:0,paddingTop:10},badge:{cursor:"pointer"},emptyButton:{width:48},greenText:{color:t.palette.success.dark},curdContentFlexCenter:{display:"flex",alignItems:"center",marginLeft:4},wrapperAvailable:{display:"flex",alignItems:"center"},buttonUpdate:{border:"1px solid",padding:"0px 7px",borderRadius:5,display:"flex",alignItems:"center",cursor:"pointer",transition:"background 0.5s","&:hover":{background:"#00800026"}},buttonUpdateIcon:{height:20,width:20,marginRight:10},debug:{backgroundColor:ht.a[700]},info:{backgroundColor:ut.a[700]},warn:{backgroundColor:bt.a[700]},error:{backgroundColor:jt.a[700]},smallAvatar:{width:24,height:24},formControl:{display:"flex"},baseSettingsButton:{transform:"rotate(45deg)"}}}))((function(t){var e=t.name,a=t.classes,s=t.image,n=t.hidden,r=t.connectedToHost,i=t.alive,l=t.connected,d=t.color,h=(t.title,t.available),u=t.installed,m=t.events,f=t.t,g=t.description,x=t._id,O=t.socket,y=t.setEditDialog,S=t.executeCommandRemove,k=t.currentHost,C=t.systemConfig,N=t.setBaseSettingsDialog,w=t.expertMode,I=t.hostsWorker,T=t.showAdaptersWarning,_=t.openHostUpdateDialog,A=t.getLogLevelIcon,L=Object(c.useState)(!1),H=Object(o.a)(L,2),B=H[0],R=H[1],D=Object(c.useRef)(),W=Object(c.useRef)(),P=Object(c.useRef)(),F=Object(c.useRef)(),$=Object(c.useRef)(),et=function(t,e){xt=e&&null!==e.val?"\u21e5".concat(e.val):"-",D.current&&(D.current.innerHTML="".concat(xt," / ").concat(gt))},st=function(t,e){gt=e&&null!==e.val?"\u21a6".concat(e.val):"-",D.current&&(D.current.innerHTML="".concat(xt," / ").concat(gt))},rt=function(t,e){return t&&null!==t.val&&void 0!==t.val?C.common.isFloatComma?t.val.toString().replace(".",",")+(e?" "+e:""):t.val+(e?" "+e:""):"-"+(e?" "+e:"")},it=function(t,e){var a;t.endsWith("diskFree")?St=(null===e||void 0===e?void 0:e.val)||0:t.endsWith("diskSize")?kt=(null===e||void 0===e?void 0:e.val)||0:t.endsWith("diskWarning")&&(Ct=(null===e||void 0===e?void 0:e.val)||0),a=St/kt*100<=Ct,W.current&&(a?(W.current.setAttribute("title",f("Warning: Free space on disk is low")),W.current.classList.add("warning")):(W.current.removeAttribute("title"),W.current.classList.remove("warning")))},lt=function(t,e){Ot=rt(e,"%"),P.current&&(P.current.innerHTML=Ot)},ht=function(t,e){vt=rt(e,"%"),F.current&&(F.current.innerHTML=vt)},ut=function(t,e){if(e.val){var a=Math.floor(e.val/86400),s=Math.floor(e.val%86400/3600);yt=a?"".concat(a,"d").concat(s,"h"):"".concat(s,"h")}$.current&&($.current.innerHTML=yt)},bt=function(t){if(!t)return 0;var e=t.result,a=0;if(!e||!e.system)return a;if(Object.keys(e.system.categories).length){var s=e.system.categories;Object.keys(s).forEach((function(t){return Object.keys(s[t].instances).forEach((function(t){return a++}))}))}return a},jt=Object(c.useState)({notifications:{},count:0}),wt=Object(o.a)(jt,2),It=wt[0],Tt=wt[1],_t=function(t,e){e&&(Et(e.val),Kt(e.val))};Object(c.useEffect)((function(){var t=function(t){return t&&t[x]&&Tt({notifications:t[x],count:bt(t[x])})};return I.registerNotificationHandler(t),I.getNotifications(x).then((function(t){return t&&t[x]&&Tt({notifications:t[x],count:bt(t[x])})})),O.subscribeState("".concat(x,".inputCount"),et),O.subscribeState("".concat(x,".outputCount"),st),O.subscribeState("".concat(x,".cpu"),lt),O.subscribeState("".concat(x,".mem"),ht),O.subscribeState("".concat(x,".uptime"),ut),O.subscribeState("".concat(x,".diskFree"),it),O.subscribeState("".concat(x,".diskSize"),it),O.subscribeState("".concat(x,".diskWarning"),it),O.subscribeState("".concat(x,".logLevel"),_t),function(){I.unregisterNotificationHandler(t),O.unsubscribeState("".concat(x,".inputCount"),et),O.unsubscribeState("".concat(x,".outputCount"),st),O.unsubscribeState("".concat(x,".cpu"),lt),O.unsubscribeState("".concat(x,".mem"),ht),O.unsubscribeState("".concat(x,".uptime"),ut),O.unsubscribeState("".concat(x,".diskFree"),it),O.unsubscribeState("".concat(x,".diskSize"),it),O.unsubscribeState("".concat(x,".diskWarning"),it),O.unsubscribeState("".concat(x,".logLevel"),_t)}}),[x,O,a]);var At,Lt=Object(c.useState)(!1),Ht=Object(o.a)(Lt,2),Bt=Ht[0],Rt=Ht[1],Dt=Object(c.useState)(!1),Wt=Object(o.a)(Dt,2),Pt=Wt[0],Ft=Wt[1],Mt=Object(c.useState)(null),Jt=Object(o.a)(Mt,2),zt=Jt[0],Et=Jt[1],Ut=Object(c.useState)(null),Vt=Object(o.a)(Ut,2),Xt=Vt[0],Kt=Vt[1],qt=(k||i)&&pt.default.updateAvailable(u,h),Qt=!1;Pt&&(At=f("Edit log level rule for %s",e),Qt=!0);var Gt=Qt?Object(ft.jsxs)(mt.a,{title:At,open:!0,onApply:function(t){Pt&&(O.setState("".concat(x,".logLevel"),Xt),Ft(!1))},onClose:function(){Pt&&(Kt(zt),Ft(!1))},children:[Pt&&Object(ft.jsxs)(J.a,{className:a.formControl,variant:"outlined",children:[Object(ft.jsx)(z.a,{children:f("log level")}),Object(ft.jsx)(E.a,{variant:"standard",value:Xt,fullWidth:!0,onChange:function(t){return Kt(t.target.value)},children:Nt.map((function(t){return Object(ft.jsx)(U.a,{value:t,children:f(t)},t)}))})]}),Pt&&Object(ft.jsxs)(J.a,{className:a.formControl,variant:"outlined",children:[Object(ft.jsx)(V.a,{children:f("Log level will be reset to the saved level after the restart of the controller")}),Object(ft.jsxs)(V.a,{children:[f("You can set the log level permanently in the base host settings"),Object(ft.jsx)(ct.a,{className:a.baseSettingsButton})]})]})]}):null;return Object(ft.jsxs)(X.a,{className:Object(p.default)(a.root,n?a.hidden:""),children:[Gt,(B||Bt)&&Object(ft.jsxs)("div",{className:Object(p.default)(a.collapse,B?"":a.collapseOff),children:[Object(ft.jsxs)(K.a,{className:a.cardContentInfo,children:[Object(ft.jsx)("div",{className:a.cardContentDiv,children:Object(ft.jsx)("div",{className:a.close,onClick:function(){return R(!1)}})}),g]}),Object(ft.jsx)("div",{className:a.footerBlock})]}),Object(ft.jsx)("div",{className:Object(p.default)(a.onOffLine,i?a.green:a.red),children:i&&Object(ft.jsx)("div",{className:a.dotLine})}),Object(ft.jsxs)("div",{ref:W,style:{background:d||"inherit"},className:Object(p.default)(a.imageBlock,(!r||!i)&&a.instanceStateNotAlive1,r&&i&&!1===l&&a.instanceStateAliveNotConnected1,r&&i&&!1!==l&&a.instanceStateAliveAndConnected1),children:[Object(ft.jsx)(q.a,{className:a.img,component:"img",image:s||"img/no-image.png"}),Object(ft.jsx)("div",{style:{color:d&&dt.a.invertColor(d,!0)||"inherit"},className:a.adapter,children:Object(ft.jsx)(Q.a,{title:f("Hosts notifications"),badgeContent:It.count,color:"error",className:a.badge,onClick:function(t){t.stopPropagation(),T(Object(M.a)({},x,It.notifications),O,x)},children:e})}),Object(ft.jsx)(G.a,{disabled:"string"===typeof g,onMouseOut:function(){return Rt(!1)},onMouseOver:function(){return Rt(!0)},onClick:function(){return R(!0)},className:a.fab,color:"primary","aria-label":"add",children:Object(ft.jsx)(tt.a,{})})]}),Object(ft.jsxs)(K.a,{className:a.cardContentH5,children:[Object(ft.jsx)(Z.a,{variant:"body2",color:"textSecondary",component:"div",children:Object(ft.jsxs)("div",{className:a.displayFlex,children:["CPU:",Object(ft.jsx)("div",{ref:P,className:a.marginLeft5,children:"- %"})]})}),Object(ft.jsx)(Z.a,{variant:"body2",color:"textSecondary",component:"div",children:Object(ft.jsxs)("div",{className:a.displayFlex,children:["RAM:",Object(ft.jsx)("div",{ref:F,className:a.marginLeft5,children:"- %"})]})}),Object(ft.jsx)(Z.a,{variant:"body2",color:"textSecondary",component:"div",children:Object(ft.jsxs)("div",{className:a.displayFlex,children:[f("Uptime"),": ",Object(ft.jsx)("div",{ref:$,className:a.marginLeft5,children:"-d -h"})]})}),Object(ft.jsxs)(Z.a,{variant:"body2",color:"textSecondary",component:"div",className:a.wrapperAvailable,children:[f("Available"),": ",Object(ft.jsx)("div",{className:Object(p.default)(qt&&a.greenText,a.curdContentFlexCenter),children:qt?Object(ft.jsx)(j.a,{title:f("Update"),children:Object(ft.jsxs)("div",{onClick:_,className:a.buttonUpdate,children:[Object(ft.jsx)(b.a,{className:a.buttonUpdateIcon,size:"small",children:Object(ft.jsx)(v.a,{})}),h]})}):h})]}),Object(ft.jsxs)(Z.a,{variant:"body2",color:"textSecondary",component:"p",children:[f("Installed"),": ",u]}),Object(ft.jsx)(Z.a,{variant:"body2",color:"textSecondary",component:"div",children:Object(ft.jsxs)("div",{className:a.displayFlex,children:[f("Events"),": ",Object(ft.jsx)("div",{ref:D,className:a.marginLeft5,children:m})]})}),Object(ft.jsx)("div",{className:a.marginTop10,children:Object(ft.jsxs)(Z.a,{component:"span",className:a.enableButton,children:[Object(ft.jsx)(b.a,{onClick:function(){return y(!0)},children:Object(ft.jsx)(nt.a,{})}),w&&Object(ft.jsx)(j.a,{title:f("Host Base Settings"),children:Object(ft.jsx)("div",{children:Object(ft.jsx)(b.a,{disabled:!i,onClick:N,children:Object(ft.jsx)(ct.a,{className:a.baseSettingsButton})})})}),Object(ft.jsx)(j.a,{title:f("Restart host"),children:Object(ft.jsx)("div",{children:Object(ft.jsx)(b.a,{disabled:!i,onClick:function(t){t.stopPropagation(),O.restartController(x).catch((function(t){return window.alert("Cannot restart: ".concat(t))}))},children:Object(ft.jsx)(ot.a,{})})})}),w&&zt&&Object(ft.jsx)(j.a,{title:f("loglevel")+" "+zt,children:Object(ft.jsx)(b.a,{onClick:function(t){Ft(!0)},children:Object(ft.jsx)(Y.a,{className:Object(p.default)(a.smallAvatar,a[zt]),children:A(zt)})})}),i||k?Object(ft.jsx)("div",{className:a.emptyButton}):Object(ft.jsx)(j.a,{title:f("Remove"),children:Object(ft.jsx)(b.a,{onClick:S,children:Object(ft.jsx)(at.a,{})})})]})})]})]},x)})),It="-",Tt="-",_t="- %",At="- %",Lt="-",Ht=1,Bt=1,Rt=1,Dt=Object(u.a)((function(t){return{badge:{right:-3,top:13,padding:"0 4px"}}}))(Q.a),Wt=["silly","debug","info","warn","error"],Pt=Object(u.a)((function(t){return{root:{position:"relative",margin:7,background:t.palette.background.default,boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .14),0 3px 1px -2px rgba(0, 0, 0, .12),0 1px 5px 0 rgba(0, 0, 0, .2)",overflow:"hidden",transition:"box-shadow 0.5s,height 0.3s","&:hover":{boxShadow:"0 8px 17px 0 rgba(0, 0, 0, .2),0 6px 20px 0 rgba(0, 0, 0, .19)"}},imageBlock:{marginRight:6,minHeight:60,width:"100%",maxWidth:300,display:"flex",padding:"0 10px 0 10px",position:"relative",justifyContent:"space-between",transition:"background 0.5s"},img:{width:45,height:45,margin:"auto 0",position:"relative","&:after":{content:'""',position:"absolute",zIndex:2,top:0,left:0,width:"100%",height:"100%",background:'url("img/no-image.png") 100% 100% no-repeat',backgroundSize:"cover",backgroundColor:"#fff"}},collapse:{height:160,backgroundColor:"rgba(128, 128, 128, 0.1)",width:"100%",zIndex:3,marginTop:"auto",bottom:0,transition:"height 0.3s",justifyContent:"space-between",display:"flex",flexDirection:"column"},collapseOff:{height:0},collapseOn:{animation:"$height 1s"},"@keyframes height":{"0%":{height:0},"100%":{height:160}},footerBlock:{background:t.palette.background.default,padding:10,display:"flex",justifyContent:"space-between"},hidden:{display:"none"},onOff:{alignSelf:"center",width:4,height:"100%"},host:{width:"100%",fontWeight:"bold",fontSize:16,paddingLeft:8,alignSelf:"center",color:"dark"===t.palette.type?"#ddd":"#222",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},cardContentH5:{height:"100%",display:"flex",width:"100%",justifyContent:"space-between",padding:"10px !important",alignItems:"center"},marginTop10:{marginLeft:"auto",display:"flex"},enableButton:{display:"flex",justifyContent:"space-between"},emptyButton:{width:48},green:{background:"#00ce00",position:"relative",overflow:"hidden"},dotLine:{width:10,height:20,background:"linear-gradient( rgba(0,206,0,0.7497373949579832) 0%, rgba(31,255,1,1) 50%, rgba(0,206,0,0.7805497198879552) 100%)",zIndex:2,position:"absolute",top:-21},"@keyframes colors":{"0%":{top:-21},"100%":{top:"101%"}},red:{background:"#da0000"},"@keyframes red":{"0%":{opacity:1},"100%":{opacity:.8}},flex:{flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},cardContentInfo:{overflow:"auto",paddingTop:0,justifyContent:"center",display:"flex",height:"100%"},cursorNoDrop:{cursor:"no-drop !important"},wrapperFlex:{display:"flex",cursor:"pointer","& .warning":{backgroundColor:"#de0000 !important","&:before":{position:"absolute",right:0,top:-5,content:'"\u26a0"',fontSize:25,height:"30px",width:"30px",color:"black"},animation:"$warning 2.5s ease-in-out infinite alternate"}},"@keyframes warning":{"0%":{opacity:1},"100%":{opacity:.7}},wrapperColor:{position:"relative",overflow:"hidden"},"@media screen and (max-width: 1100px)":{hidden1100:{display:"none !important"}},"@media screen and (max-width: 800px)":{hidden800:{display:"none !important"}},"@media screen and (max-width: 600px)":{hidden600:{display:"none !important"}},"@media screen and (max-width: 500px)":{wrapperFlex:{flexDirection:"column"}},badge:{top:14},greenText:{color:t.palette.success.dark},curdContentFlexCenter:{display:"flex",alignItems:"center"},wrapperAvailable:{display:"flex",alignItems:"center"},buttonUpdate:{border:"1px solid",padding:"0px 7px",borderRadius:5,display:"flex",alignItems:"center",cursor:"pointer",transition:"background 0.5s","&:hover":{background:"#00800026"}},buttonUpdateIcon:{height:20,width:20,marginRight:10},debug:{backgroundColor:ht.a[700]},info:{backgroundColor:ut.a[700]},warn:{backgroundColor:bt.a[700]},error:{backgroundColor:jt.a[700]},smallAvatar:{width:24,height:24},formControl:{display:"flex"},baseSettingsButton:{transform:"rotate(45deg)"}}}))((function(t){var e=t.name,a=t.classes,s=t.image,n=t.hidden,r=t.alive,i=t.color,l=t.available,d=t.installed,h=t.events,u=t.t,m=t.description,f=t._id,g=t.socket,x=t.setEditDialog,O=t.currentHost,y=t.executeCommandRemove,S=t.systemConfig,k=t.expertMode,C=t.setBaseSettingsDialog,N=t.hostsWorker,w=t.showAdaptersWarning,I=t.openHostUpdateDialog,T=t.getLogLevelIcon,_=Object(c.useState)(!1),A=Object(o.a)(_,2),L=A[0],H=A[1],B=Object(c.useState)(!1),R=Object(o.a)(B,2),D=R[0],W=R[1],P=Object(c.useRef)(),F=Object(c.useRef)(),X=Object(c.useRef)(),Q=Object(c.useRef)(),G=Object(c.useRef)(),$=function(t,e){Tt=e&&null!==e.val?"\u21e5".concat(e.val):"-",P.current&&(P.current.innerHTML="".concat(Tt," / ").concat(It))},tt=function(t,e){It=e&&null!==e.val?"\u21a6".concat(e.val):"-",P.current&&(P.current.innerHTML="".concat(Tt," / ").concat(It))},et=function(t,e){return t&&null!==t.val&&void 0!==t.val?S.common.isFloatComma?t.val.toString().replace(".",",")+(e?" "+e:""):t.val+(e?" "+e:""):"-"+(e?" "+e:"")},st=function(t,e){var a;t.endsWith("diskFree")?Ht=(null===e||void 0===e?void 0:e.val)||0:t.endsWith("diskSize")?Bt=(null===e||void 0===e?void 0:e.val)||0:t.endsWith("diskWarning")&&(Rt=(null===e||void 0===e?void 0:e.val)||0),a=Ht/Bt*100<=Rt,F.current&&(a?(F.current.setAttribute("title",u("Warning: Free space on disk is low")),F.current.classList.add("warning")):(F.current.removeAttribute("title"),F.current.classList.remove("warning")))},rt=function(t,e){_t=et(e,"%"),X.current&&(X.current.innerHTML=_t)},it=function(t,e){At=et(e,"%"),Q.current&&(Q.current.innerHTML=At)},lt=function(t,e){if(e&&e.val){var a=Math.floor(e.val/86400),s=Math.floor(e.val%86400/3600);Lt=a?"".concat(a,"d").concat(s,"h"):"".concat(s,"h")}G.current&&(G.current.innerHTML=Lt)},ht=function(t){if(!t)return 0;var e=t.result,a=0;if(!e||!e.system)return a;if(Object.keys(e.system.categories).length){var s=e.system.categories;Object.keys(s).forEach((function(t){return Object.keys(s[t].instances).forEach((function(t){return a++}))}))}return a},ut=Object(c.useState)({notifications:{},count:0}),bt=Object(o.a)(ut,2),jt=bt[0],gt=bt[1],xt=function(t,e){e&&(Pt(e.val),zt(e.val))};Object(c.useEffect)((function(){var t=function(t){return t&&t[f]&&gt({notifications:t[f],count:ht(t[f])})};return N.registerNotificationHandler(t),N.getNotifications(f).then((function(t){t&&t[f]&&gt({notifications:t[f],count:ht(t[f])})})),g.subscribeState("".concat(f,".inputCount"),$),g.subscribeState("".concat(f,".outputCount"),tt),g.subscribeState("".concat(f,".cpu"),rt),g.subscribeState("".concat(f,".mem"),it),g.subscribeState("".concat(f,".uptime"),lt),g.subscribeState("".concat(f,".diskFree"),st),g.subscribeState("".concat(f,".diskSize"),st),g.subscribeState("".concat(f,".diskWarning"),st),g.subscribeState("".concat(f,".logLevel"),xt),function(){N.unregisterNotificationHandler(t),g.unsubscribeState("".concat(f,".inputCount"),$),g.unsubscribeState("".concat(f,".outputCount"),tt),g.unsubscribeState("".concat(f,".cpu"),rt),g.unsubscribeState("".concat(f,".mem"),it),g.unsubscribeState("".concat(f,".uptime"),lt),g.unsubscribeState("".concat(f,".diskFree"),st),g.unsubscribeState("".concat(f,".diskSize"),st),g.unsubscribeState("".concat(f,".diskWarning"),st),g.unsubscribeState("".concat(f,".logLevel"),xt)}}),[f,g,a]);var Ot,vt=Object(c.useState)(!1),yt=Object(o.a)(vt,2),St=yt[0],kt=yt[1],Ct=Object(c.useState)(null),Nt=Object(o.a)(Ct,2),wt=Nt[0],Pt=Nt[1],Ft=Object(c.useState)(null),Mt=Object(o.a)(Ft,2),Jt=Mt[0],zt=Mt[1],Et=(O||r)&&pt.default.updateAvailable(d,l),Ut=!1;St&&(Ot=u("Edit log level rule for %s",e),Ut=!0);var Vt=Ut?Object(ft.jsxs)(mt.a,{title:Ot,open:!0,onApply:function(t){St&&(g.setState("".concat(f,".logLevel"),Jt),kt(!1))},onClose:function(t){St&&(zt(wt),kt(!1))},children:[St&&Object(ft.jsxs)(J.a,{className:a.formControl,variant:"outlined",children:[Object(ft.jsx)(z.a,{children:u("log level")}),Object(ft.jsx)(E.a,{variant:"standard",value:Jt,fullWidth:!0,onChange:function(t){zt(t.target.value)},children:Wt.map((function(t){return Object(ft.jsx)(U.a,{value:t,children:u(t)},t)}))})]}),St&&Object(ft.jsxs)(J.a,{className:a.formControl,variant:"outlined",children:[Object(ft.jsx)(V.a,{children:u("Log level will be reset to the saved level after the restart of the controller")}),Object(ft.jsxs)(V.a,{children:[u("You can set the log level permanently in the base host settings"),Object(ft.jsx)(ct.a,{className:a.baseSettingsButton})]})]})]}):null;return Object(ft.jsxs)("div",{style:{border:"2px solid ".concat(i||"inherit"),borderRadius:5},onMouseOut:St?null:function(){return W(!1)},onMouseOver:St?null:function(){return W(!0)},onMouseMove:St?null:function(){return W(!0)},onClick:St?null:function(){return H((function(t){return!t}))},className:Object(p.default)(a.root,n?a.hidden:""),children:[Vt,Object(ft.jsxs)("div",{className:Object(p.default)(a.wrapperFlex,!r&&a.cursorNoDrop),children:[Object(ft.jsxs)("div",{className:a.wrapperColor,children:[Object(ft.jsx)("div",{className:Object(p.default)(a.onOff,r?a.green:a.red)}),r&&Object(ft.jsx)("div",{className:a.dotLine})]}),Object(ft.jsxs)("div",{ref:F,style:{background:i||"inherit"},className:a.imageBlock,children:[Object(ft.jsx)(Dt,{title:u("Hosts notifications"),badgeContent:jt.count,color:"error",onClick:function(t){t.stopPropagation(),w(Object(M.a)({},f,jt.notifications),g,f)},children:Object(ft.jsx)(q.a,{className:a.img,component:"img",image:s||"img/no-image.png"})}),Object(ft.jsx)("div",{style:{color:i&&dt.a.invertColor(i,!0)||"inherit"},className:a.host,children:e})]}),Object(ft.jsxs)(K.a,{className:a.cardContentH5,children:[Object(ft.jsx)(Z.a,{className:Object(p.default)(a.flex,a.hidden800),variant:"body2",color:"textSecondary",component:"div",children:Object(ft.jsx)("div",{ref:X,children:"- %"})}),Object(ft.jsx)(Z.a,{className:Object(p.default)(a.flex,a.hidden800),variant:"body2",color:"textSecondary",component:"div",children:Object(ft.jsx)("div",{ref:Q,children:"- %"})}),Object(ft.jsx)(Z.a,{className:Object(p.default)(a.flex,a.hidden800),variant:"body2",color:"textSecondary",component:"div",children:Object(ft.jsx)("div",{ref:G,children:"-/-"})}),Object(ft.jsx)(Z.a,{className:Object(p.default)(a.flex,a.hidden1100),variant:"body2",color:"textSecondary",component:"div",children:Object(ft.jsx)("div",{className:Object(p.default)(Et&&a.greenText,a.curdContentFlexCenter),children:Et?Object(ft.jsx)(j.a,{title:u("Update"),children:Object(ft.jsxs)("div",{onClick:function(t){t.stopPropagation(),I()},className:a.buttonUpdate,children:[Object(ft.jsx)(b.a,{className:a.buttonUpdateIcon,size:"small",children:Object(ft.jsx)(v.a,{})}),l]})}):l})}),Object(ft.jsx)(Z.a,{className:Object(p.default)(a.flex,a.hidden1100),variant:"body2",color:"textSecondary",component:"p",children:d}),Object(ft.jsx)(Z.a,{className:Object(p.default)(a.flex,a.hidden600),variant:"body2",color:"textSecondary",component:"div",children:Object(ft.jsx)("div",{ref:P,children:h})}),Object(ft.jsx)("div",{className:a.marginTop10,children:Object(ft.jsxs)(Z.a,{component:"span",className:a.enableButton,children:[Object(ft.jsx)(b.a,{onClick:function(t){t.stopPropagation(),x(!0)},children:Object(ft.jsx)(nt.a,{})}),k&&Object(ft.jsx)(j.a,{title:u("Host Base Settings"),children:Object(ft.jsx)("div",{children:Object(ft.jsx)(b.a,{disabled:!r,onClick:function(t){C(),t.stopPropagation()},children:Object(ft.jsx)(ct.a,{className:a.baseSettingsButton})})})}),Object(ft.jsx)(j.a,{title:u("Restart host"),children:Object(ft.jsx)("div",{children:Object(ft.jsx)(b.a,{disabled:!r,onClick:function(t){t.stopPropagation(),g.restartController(f).catch((function(t){return window.alert("Cannot restart: ".concat(t))}))},children:Object(ft.jsx)(ot.a,{})})})}),k&&wt?Object(ft.jsx)(j.a,{title:u("loglevel")+" "+wt,children:Object(ft.jsx)(b.a,{onClick:function(t){t.stopPropagation(),kt(!0)},children:Object(ft.jsx)(Y.a,{className:Object(p.default)(a.smallAvatar,a[wt]),children:T(wt)})})}):Object(ft.jsx)("div",{className:a.emptyButton}),r||O?Object(ft.jsx)("div",{className:a.emptyButton}):Object(ft.jsx)(j.a,{title:u("Remove"),children:Object(ft.jsx)(b.a,{onClick:function(t){y(),t.stopPropagation()},children:Object(ft.jsx)(at.a,{})})})]})})]})]}),(L||D)&&"object"===typeof m&&Object(ft.jsxs)("div",{className:Object(p.default)(a.collapse,L?a.collapseOn:a.collapseOff),children:[Object(ft.jsx)(K.a,{className:a.cardContentInfo,children:m}),Object(ft.jsx)("div",{className:a.footerBlock})]})]},f)})),Ft=a(11),Mt=a(12),Jt=a(14),zt=a(15),Et=a(226),Ut=a(277),Vt=a(228),Xt=a(227),Kt=a(113),qt=a(53),Qt=a.n(qt),Gt=a(139),Zt=a.n(Gt),Yt=a(538),$t=function(t){Object(Jt.a)(a,t);var e=Object(zt.a)(a);function a(t){var s;return Object(Ft.a)(this,a),(s=e.call(this,t)).state={text:JSON.stringify(s.props.obj,null,2),error:!1,changed:!1,tab:window.localStorage.getItem((s.props.dialogName||"App")+".editTab")||"object"},s.originalObj=JSON.stringify(s.props.obj,null,2),s}return Object(Mt.a)(a,[{key:"prepareObject",value:function(t){t=t||this.state.text;try{var e=JSON.parse(t);return e._id=this.props.obj._id,e}catch(a){return null}}},{key:"onChange",value:function(t){var e={text:t},a=this.prepareObject(t);a?(e.changed=this.originalObj!==JSON.stringify(a,null,2),this.state.error&&(e.error=!1)):e.error=!0,this.setState(e)}},{key:"onUpdate",value:function(){var t=JSON.parse(this.state.text);t._id=this.props.obj._id,this.props.onClose(t)}},{key:"setCommonItem",value:function(t,e,a){t.common[e]=a,this.onChange(JSON.stringify(t,null,2))}},{key:"removeCommonItem",value:function(t,e){delete t.common[e],this.onChange(JSON.stringify(t,null,2))}},{key:"buttonAddKey",value:function(t,e){var a=this.props,s=a.t,n=a.classes;return Object(ft.jsx)("div",{className:n.marginBlock,children:Object(ft.jsx)(Kt.a,{className:n.buttonAdd,variant:"contained",color:"secondary",onClick:e,startIcon:Object(ft.jsx)(Zt.a,{}),children:s("Add "+t)})})}},{key:"buttonRemoveKey",value:function(t,e){var a=this.props,s=a.t,n=a.classes;return Object(ft.jsx)(j.a,{title:s("Remove "+t),children:Object(ft.jsx)("div",{className:n.close,onClick:e})})}},{key:"renderCommonEdit",value:function(){var t=this;try{var e=JSON.parse(this.state.text),a=!1,s=this.props,n=s.classes,r=s.t;return Object(ft.jsxs)("div",{className:n.commonTabWrapper,children:[Object(ft.jsxs)("div",{className:n.commonWrapper,children:["undefined"!==typeof e.common.title?Object(ft.jsx)(f.a,{disabled:a,label:r("title"),className:Object(p.default)(n.marginBlock,n.textField),fullWidth:!0,value:e.common.title,onChange:function(a){return t.setCommonItem(e,"title",a.target.value)}}):this.buttonAddKey("title",(function(){return t.setCommonItem(e,"title","")})),"undefined"!==typeof e.common.color?Object(ft.jsxs)("div",{className:n.flex,children:[Object(ft.jsx)(f.a,{disabled:a,className:Object(p.default)(n.marginBlock,n.color),label:r("Color"),type:"color",value:e.common.color,onChange:function(a){return t.setCommonItem(e,"color",a.target.value)}}),this.buttonRemoveKey("color",(function(){return t.removeCommonItem(e,"color")}))]}):this.buttonAddKey("color",(function(){return t.setCommonItem(e,"color","")}))]}),"undefined"!==typeof e.common.icon?Object(ft.jsxs)("div",{className:n.flexDrop,children:[Object(ft.jsx)(Yt.a,{disabled:a,crop:!0,maxSize:262144,icon:e.common.icon,removeIconFunc:function(){return t.setCommonItem(e,"icon","")},onChange:function(a){return t.setCommonItem(e,"icon",a)},t:r}),this.buttonRemoveKey("icon",(function(){return t.removeCommonItem(e,"icon")}))]}):Object(ft.jsx)("div",{className:n.flexDrop,children:this.buttonAddKey("icon",(function(){return t.setCommonItem(e,"icon","")}))})]})}catch(o){return Object(ft.jsx)("div",{children:this.props.t("Cannot parse JSON!")})}}},{key:"render",value:function(){var t=this;return Object(ft.jsxs)(Et.a,{classes:{paper:this.props.classes.dialog},open:!0,maxWidth:"lg",fullWidth:"number"!==this.state.type&&"boolean"!==this.state.type,fullScreen:!1,onClose:function(){return t.props.onClose()},"aria-labelledby":"edit-value-dialog-title","aria-describedby":"edit-value-dialog-description",children:[Object(ft.jsxs)(Ut.a,{id:"edit-value-dialog-title",children:[this.props.t("Edit host settings"),": ",Object(ft.jsx)("span",{className:this.props.classes.id,children:this.props.obj._id})]}),Object(ft.jsx)(Vt.a,{children:this.renderCommonEdit()}),Object(ft.jsxs)(Xt.a,{children:[Object(ft.jsx)(Kt.a,{variant:"contained",disabled:this.state.error||!this.state.changed,onClick:function(){return t.onUpdate()},color:"primary",startIcon:Object(ft.jsx)(Qt.a,{}),children:this.props.t("Write")}),Object(ft.jsx)(Kt.a,{variant:"contained",onClick:function(){return t.props.onClose()},startIcon:Object(ft.jsx)(w.a,{}),children:this.props.t("Cancel")})]})]})}}]),a}(c.Component),te=Object(u.a)((function(t){return{error:{border:"2px solid #FF0000"},id:{fontStyle:"italic"},dialog:{height:"calc(100% - 64px)"},button:{marginTop:20,marginLeft:t.spacing(1)},funcDivEdit:{width:"100%"},funcEditName:{display:"inline-block",width:85},funcEdit:{width:400},marginTop:{marginTop:20},commonTabWrapper:{flexFlow:"wrap",display:"flex"},commonWrapper:{width:500,minWidth:300},flexDrop:{width:"100%",maxWidth:500,margin:"auto",display:"flex"},marginBlock:{marginTop:20},buttonAdd:{minWidth:150},textField:{width:"100%"},flex:{display:"flex"},close:{width:"20px",height:"20px",opacity:"0.9",cursor:"pointer",position:"relative",top:20,transition:"all 0.6s ease","&:hover":{transform:"rotate(90deg)"},"&:before":{position:"absolute",left:"9px",content:'""',height:"20px",width:"3px",backgroundColor:"#ff4f4f",transform:"rotate(45deg)"},"&:after":{position:"absolute",left:"9px",content:'""',height:"20px",width:"3px",backgroundColor:"#ff4f4f",transform:"rotate(-45deg)"}},color:{width:70},buttonRemoveWrapper:{position:"absolute",zIndex:222,right:0},tabsPadding:{padding:"0px 24px"}}}))($t),ee=a(50),ae=a.n(ee),se=a(293),ne=a.n(se),re=a(240),oe=a.n(re),ie=a(133),ce=a(1430),le=a(1464),de=a(1465),pe=a(1466),he=a(522),ue=a.n(he),be=a(9),je=a.n(be),me=a(121),fe=a.n(me),ge=null,xe=Object(ie.a)((function(t){return{root:{width:"100%",height:"auto",display:"flex",flexDirection:"column",overflow:"auto",padding:10},paper:{maxWidth:1e3},overflowHidden:{display:"flex",overflow:"hidden"},h1:{fontWeight:500,fontSize:35,margin:"10px 0"},h2:{padding:"10px 7px",fontSize:25,fontWeight:300,borderRadius:3,background:"#4dabf5",color:"dark"===t.palette.type?"black":"white"},h22:{padding:0,margin:0,fontSize:25,fontWeight:300,borderRadius:3,background:"#4dabf5",color:"dark"===t.palette.type?"black":"white"},standardText:{fontSize:15,margin:"10px 0","& > a":{textDecoration:"none",color:"#1e88e5"}},standardTextSmall:{fontSize:12,color:"black"},standardTextSmall2:{fontSize:12},silver:{color:"silver","& > a":{textDecoration:"none",color:"#1e88e5"}},pre:{whiteSpace:"pre-wrap",background:"#e4e3e3",padding:10,borderRadius:3,position:"relative"},copyButton:{color:"black",position:"absolute",right:10,top:4},comment:{color:"#00000078"},accordionSummary:{background:"#4dabf5",borderRadius:3,"& .MuiAccordionSummary-content":{margin:0}},accordionDetails:{display:"flex",flexDirection:"column"}}})),Oe=function(t){var e=t.socket,a=t.hostId,s=xe(),n=Object(c.useState)(!0),r=Object(o.a)(n,2),i=r[0],l=r[1],d=Object(c.useState)(""),h=Object(o.a)(d,2),u=h[0],j=h[1],m=Object(c.useState)(""),f=Object(o.a)(m,2),g=f[0],x=f[1];e.getHostInfoShort(a).then((function(t){t.location&&j(t.location),x(t.os)})).catch((function(t){return window.alert('Cannot get information about host "'.concat(a,'": ').concat(t))}));var O=function(){if(l(!1),ge){try{window.document.body.removeChild(ge)}catch(t){}ge=null}},v=function(t){navigator.clipboard?navigator.clipboard.writeText(t).then((function(){console.log("Async: Copying to clipboard was successful!")}),(function(t){console.error("Async: Could not copy text: ",t)})):function(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.focus(),e.select();try{var a=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+a)}catch(s){console.error("Fallback: Oops, unable to copy",s)}try{window.document.body.removeChild(e)}catch(n){}}(t)};return Object(ft.jsx)(ce.a,{theme:fe()(dt.a.getThemeName()),children:Object(ft.jsxs)(Et.a,{onClose:O,open:i,classes:{paper:s.paper},children:[Object(ft.jsx)(Ut.a,{children:je.a.t("js-controller upgrade instructions")}),Object(ft.jsx)(Vt.a,{className:s.overflowHidden,dividers:!0,children:Object(ft.jsxs)(X.a,{style:null,className:s.root,children:[Object(ft.jsx)("div",{className:s.standardText,children:je.a.t("Due to the different hardware and platforms under which ioBroker runs, the js-controller has to be updated manually. Further details can be found in the appropriate section.")}),Object(ft.jsx)("h2",{className:s.h2,children:je.a.t("General information for all platforms")}),Object(ft.jsxs)("div",{className:s.standardText,children:[je.a.t("For an update from js-controller 1.x to 2.x please always read the information at")," ",Object(ft.jsx)("a",{href:"https://forum.iobroker.net/topic/26759/js-controller-2-jetzt-f%C3%BCr-alle-im-stable",target:"_blank",children:"forum"}),"."]}),Object(ft.jsx)("div",{className:s.standardText,children:je.a.t("Otherwise please update the slaves first with an update of master-slave systems and the master last!")}),"win32"!==g&&Object(ft.jsxs)(ft.Fragment,{children:[Object(ft.jsx)("h2",{className:s.h2,children:je.a.t("Linux/macOS (new installer)")}),Object(ft.jsx)("div",{className:s.standardText,children:je.a.t("This is the recommended option")}),Object(ft.jsx)("div",{className:s.standardText,children:je.a.t("Please execute the following commands in an SSH shell (console):")}),Object(ft.jsxs)("pre",{className:s.pre,children:[Object(ft.jsx)(b.a,{size:"small",onClick:function(){window.alert(je.a.t("Copied")),v("iob backup\niob stop\niob update\niob upgrade self\niob start")},className:s.copyButton,children:Object(ft.jsx)(ne.a,{})}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob backup"}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob stop"}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob update"}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob upgrade self"}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob start"})]}),Object(ft.jsx)("div",{className:Object(p.default)(s.standardTextSmall2),children:je.a.t("or reboot server, then ioBroker should restart and you can be sure that all old processes were finished.")}),Object(ft.jsx)("div",{className:Object(p.default)(s.standardTextSmall2),children:je.a.t("If the upgrade command displays Access Rights / Permission errors, then please use the install fixer")}),Object(ft.jsxs)("pre",{className:s.pre,children:[Object(ft.jsx)(b.a,{size:"small",onClick:function(){window.alert(je.a.t("Copied")),v("curl -sL https://iobroker.net/fix.sh | bash")},className:s.copyButton,children:Object(ft.jsx)(ne.a,{})}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"curl -sL https://iobroker.net/fix.sh | bash-"})]}),Object(ft.jsx)("div",{className:Object(p.default)(s.standardTextSmall2),children:je.a.t("to fix these issues and upgrade command run again.")}),Object(ft.jsx)("h2",{className:s.h2,children:je.a.t("Linux/macOS (manually installed)")}),Object(ft.jsx)("div",{className:s.standardText,children:je.a.t('A manual installation usually takes place under root as user and therefore a "sudo" is necessary before the commands.')}),Object(ft.jsx)("div",{className:s.standardText,children:je.a.t("Please execute the following commands in an SSH shell (console):")}),Object(ft.jsxs)("pre",{className:s.pre,children:[Object(ft.jsx)(b.a,{size:"small",onClick:function(){window.alert(je.a.t("Copied")),v("cd ".concat(u||"/opt/iobroker","\niob backup\niob stop\niob fix\niob update\niob upgrade self\niob start"))},className:s.copyButton,children:Object(ft.jsx)(ne.a,{})}),Object(ft.jsxs)("div",{className:s.standardTextSmall,children:["cd ",u||"/opt/iobroker"]}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob backup"}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob stop"}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob fix"}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob update"}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob upgrade self"}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob start"})]}),Object(ft.jsx)("div",{className:Object(p.default)(s.standardTextSmall2),children:je.a.t("or reboot server, then ioBroker should restart and you can be sure that all old processes were finished.")}),Object(ft.jsx)("div",{className:Object(p.default)(s.standardTextSmall2),children:je.a.t('If the upgrade command displays permissions / permissions errors, fix them. Sometimes "sudo" is not enough and you have to run the installation as a real root (previously simply sudo su -).')})]}),"win32"===g&&Object(ft.jsxs)(ft.Fragment,{children:[Object(ft.jsx)("h2",{className:s.h2,children:je.a.t("Windows")}),Object(ft.jsxs)("div",{className:s.standardText,children:[je.a.t("For updating ioBroker on Windows, download the appropriate installer with the desired js-controller version from the download page "),Object(ft.jsx)("a",{href:"https://www.iobroker.net/#en/download",target:"_blank",children:"https://www.iobroker.net/#en/download"}),je.a.t(" and make the update with it. With the Windows Installer, previously manually installed servers or installations from other operating systems can be migrated to Windows and updated.")]}),Object(ft.jsx)("h2",{className:s.h2,children:je.a.t("Windows (manually installed)")}),Object(ft.jsx)("div",{className:s.standardText,children:je.a.t("A manual installation is done with administrator rights. Please start a cmd.exe command line window as an administrator (right-click on cmd.exe and execute as administrator) and execute the following commands:")}),Object(ft.jsxs)("pre",{className:s.pre,children:[Object(ft.jsx)(b.a,{size:"small",onClick:function(){window.alert(je.a.t("Copied")),v("cd ".concat((u||"C:\\iobroker").replace(/\//g,"\\"),"\niob backup\niob stop\niob status\niob update\niob upgrade self"))},className:s.copyButton,children:Object(ft.jsx)(ne.a,{})}),Object(ft.jsxs)("div",{className:s.standardTextSmall,children:["cd ",(u||"C:\\iobroker").replace(/\//g,"\\")," ",u?null:je.a.t("(or where ioBroker was installed)")]}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob backup"}),Object(ft.jsxs)("div",{className:s.standardTextSmall,children:["iob stop ",je.a.t("to stop the ioBroker service")]}),Object(ft.jsxs)("div",{className:s.standardTextSmall,children:["iob status ",je.a.t("to check if ioBroker has finished")]}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob update"}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"iob upgrade self"})]}),Object(ft.jsx)("div",{className:Object(p.default)(s.standardTextSmall2),children:je.a.t("Start ioBroker service or reboot computer, then ioBroker should restart and you can be sure that all the old processes were finished.")})]}),Object(ft.jsxs)(le.a,{style:{paddingTop:14},children:[Object(ft.jsx)(de.a,{className:s.accordionSummary,expandIcon:Object(ft.jsx)(oe.a,{}),children:Object(ft.jsx)("h2",{className:s.h22,children:je.a.t("Emergency Linux / macOS / Windows")})}),Object(ft.jsxs)(pe.a,{className:s.accordionDetails,children:[Object(ft.jsx)("div",{className:s.standardText,children:je.a.t("(manual reinstallation, if somehow nothing works after the update)")}),Object(ft.jsx)("div",{className:s.standardText,children:je.a.t('On Windows first please call in the start menu under "ioBroker" the command line of the relevant ioBroker instance. The correct directory is then set automatically. On Linux or macOS please go to the ioBroker directory.')}),Object(ft.jsx)("div",{className:s.standardText,children:je.a.t("Run npm install iobroker.js-controller there. A specific version can be installed using npm install iobroker.js-controller@x.y.z (replace x.y.z with the desired version).")}),Object(ft.jsx)("div",{className:s.standardText,children:je.a.t("If there are problems with access rights when running on Linux the command has to be changed slightly:")}),Object(ft.jsx)("div",{className:s.standardTextSmall2,children:je.a.t("For systems created with the new Linux installer:")}),Object(ft.jsxs)("pre",{className:s.pre,children:[Object(ft.jsx)(b.a,{size:"small",onClick:function(){window.alert(je.a.t("Copied")),v("cd ".concat("win32"===g?(u||"C:\\iobroker").replace(/\//g,"\\"):u||"/opt/iobroker","\nsudo -u iobroker -H npm install iobroker.js-controller"))},className:s.copyButton,children:Object(ft.jsx)(ne.a,{})}),Object(ft.jsxs)("div",{className:s.standardTextSmall,children:["cd ","win32"===g?(u||"C:\\iobroker").replace(/\//g,"\\"):u||"/opt/iobroker"]}),Object(ft.jsx)("div",{className:s.standardTextSmall,children:"sudo -u iobroker -H npm install iobroker.js-controller"})]}),Object(ft.jsx)("div",{className:s.standardTextSmall2,children:je.a.t("For systems installed manually under Linux, prefix sudo or run as root.")}),Object(ft.jsx)("div",{className:s.standardText,children:je.a.t("This way is only necessary in very few cases and please consult the forum beforehand!")})]})]})]})}),Object(ft.jsxs)(Xt.a,{children:[Object(ft.jsx)(Kt.a,{variant:"contained",onClick:function(){window.open("https://github.com/ioBroker/ioBroker.js-controller/blob/master/CHANGELOG.md","_blank"),O()},color:"default",startIcon:Object(ft.jsx)(ue.a,{}),children:je.a.t("Show whole changelog")}),Object(ft.jsx)(Kt.a,{variant:"contained",onClick:O,color:"primary",startIcon:Object(ft.jsx)(w.a,{}),children:je.a.t("Ok")})]})]})})},ve=function(t,e){return ge||((ge=document.createElement("div")).id="renderModal",document.body.appendChild(ge)),ae.a.render(Object(ft.jsx)(Oe,{hostId:e,socket:t}),ge)},ye=a(82),Se=a(81),ke=a(631),Ce=a(635),Ne=a(676),we=a(145),Ie=a.n(we),Te=a(92),_e=a(607),Ae=a(677),Le=a(153),He=function(t){Object(Jt.a)(a,t);var e=Object(zt.a)(a);function a(t){var s;Object(Ft.a)(this,a);var n=(s=e.call(this,t)).props.settings||{};return s.state={memoryLimitMB:n.memoryLimitMB||0,hostname:n.hostname||"",statisticsInterval:n.statisticsInterval||15e3,checkDiskInterval:n.checkDiskInterval||3e5,instanceStartInterval:n.instanceStartInterval||2e3,compact:n.compact||!1,allowShellCommands:n.allowShellCommands||!1,memLimitWarn:n.memLimitWarn||100,memLimitError:n.memLimitError||50},s.focusRef=Object(c.createRef)(),s}return Object(Mt.a)(a,[{key:"componentDidMount",value:function(){this.focusRef.current&&this.focusRef.current.focus()}},{key:"onChange",value:function(){this.props.onChange({memoryLimitMB:this.state.memoryLimitMB,hostname:this.state.hostname,statisticsInterval:this.state.statisticsInterval,checkDiskInterval:this.state.checkDiskInterval,noChmod:this.state.noChmod,instanceStartInterval:this.state.instanceStartInterval,compact:this.state.compact,allowShellCommands:this.state.allowShellCommands,memLimitWarn:this.state.memLimitWarn,memLimitError:this.state.memLimitError})}},{key:"render",value:function(){var t=this;return Object(ft.jsx)(Le.a,{className:this.props.classes.paper,children:Object(ft.jsx)(Te.a,{item:!0,className:this.props.classes.gridSettings,children:Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:[Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{label:this.props.t("Host name"),className:this.props.classes.controlItem,value:this.state.hostname||this.props.currentHost.replace("system.host.",""),onChange:function(e){return t.setState({hostname:e.target.value},(function(){return t.onChange()}))},helperText:this.props.t("You can change the host name, but be aware, that all instances must be assigned anew")})}),Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{label:this.props.t("Check disk space interval"),className:this.props.classes.controlItem,value:this.state.checkDiskInterval,type:"number",min:1e3,onChange:function(e){return t.setState({checkDiskInterval:parseInt(e.target.value,10)},(function(){return t.onChange()}))},helperText:this.props.t("How oft the disk will be checked. Do not set it to low, because it can affect system performance. Value is in ms")})}),Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{label:this.props.t("Instance statistics update interval"),className:this.props.classes.controlItem,value:this.state.statisticsInterval,type:"number",min:5e3,onChange:function(e){return t.setState({statisticsInterval:parseInt(e.target.value,10)},(function(){return t.onChange()}))},helperText:this.props.t("How oft the instance statistics will be updated. Used RAM, CPU and so on. Value is in ms")})}),Object(ft.jsxs)(Te.a,{item:!0,className:this.props.classes.controlItem,children:[Object(ft.jsx)(_e.a,{control:Object(ft.jsx)(Ae.a,{checked:this.state.compact,onChange:function(e){return t.setState({compact:e.target.checked},(function(){return t.onChange()}))}}),label:this.props.t("Compact mode")}),Object(ft.jsx)("div",{children:this.props.t("When enabled adapter instances can run in one or few processes to save RAM usage.")})]}),Object(ft.jsxs)(Te.a,{item:!0,className:this.props.classes.controlItem,children:[Object(ft.jsx)(_e.a,{control:Object(ft.jsx)(Ae.a,{checked:this.state.allowShellCommands,onChange:function(e){return t.setState({allowShellCommands:e.target.checked},(function(){return t.onChange()}))}}),label:this.props.t("Allow shell's commands")}),Object(ft.jsx)("div",{children:this.props.t('Allow execution of sendToHost("shell", "cli command")')})]}),Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{label:this.props.t("Limit RAM size for controller"),className:this.props.classes.controlItem,value:this.state.memoryLimitMB,type:"number",onChange:function(e){return t.setState({memoryLimitMB:parseInt(e.target.value,10)},(function(){return t.onChange()}))},helperText:this.props.t("MB")})}),Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsxs)(Te.a,{container:!0,direction:"row",className:this.props.classes.controlItem,children:[Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{label:this.props.t("Show warning im log if RAM less than"),className:this.props.classes.RAM,value:this.state.memLimitWarn,type:"number",onChange:function(e){return t.setState({memLimitWarn:parseInt(e.target.value,10)},(function(){return t.onChange()}))},helperText:this.props.t("MB")})}),Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{label:this.props.t("Show error in log if RAM less than"),className:this.props.classes.RAM,value:this.state.memLimitError,type:"number",onChange:function(e){return t.setState({memLimitError:parseInt(e.target.value,10)},(function(){return t.onChange()}))},helperText:this.props.t("MB")})})]})})]})})})}}]),a}(c.Component),Be=Object(h.a)()(Object(u.a)((function(t){return{paper:{height:"100%",maxHeight:"100%",maxWidth:"100%",overflow:"auto",padding:t.spacing(1)},controlItem:{width:"calc(100% - ".concat(t.spacing(2),"px)"),marginBottom:t.spacing(2),marginRight:t.spacing(1),marginLeft:t.spacing(1)},RAM:{width:400,marginRight:t.spacing(1)}}}))(He)),Re=function(t){Object(Jt.a)(a,t);var e=Object(zt.a)(a);function a(t){var s;Object(Ft.a)(this,a);var n=(s=e.call(this,t)).props.settings||{};return s.state={enabled:n.enabled||!1,secure:n.secure||!0,password:""},n.password&&s.props.socket.decrypt(n.password).then((function(t){return s.setState({password:t})})),s.focusRef=Object(c.createRef)(),s}return Object(Mt.a)(a,[{key:"componentDidMount",value:function(){this.focusRef.current&&this.focusRef.current.focus()}},{key:"onChange",value:function(){var t=this,e={enabled:this.state.enabled,secure:this.state.secure};this.state.password?this.props.socket.encrypt(this.state.password).then((function(a){e.password=a,t.props.onChange(e)})):this.props.onChange(e)}},{key:"render",value:function(){var t=this;return Object(ft.jsx)(Le.a,{className:this.props.classes.paper,children:Object(ft.jsx)("form",{className:this.props.classes.form,noValidate:!0,autoComplete:"off",children:Object(ft.jsx)(Te.a,{item:!0,className:this.props.classes.gridSettings,children:Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:[Object(ft.jsxs)(Te.a,{item:!0,className:this.props.classes.controlItem,children:[Object(ft.jsx)(_e.a,{control:Object(ft.jsx)(Ae.a,{checked:this.state.enabled,onChange:function(e){return t.setState({enabled:e.target.checked},(function(){return t.onChange()}))}}),label:this.props.t("Allow slave connections")}),Object(ft.jsx)("div",{children:this.props.t("When activated this host can be discovered by other iobroker installations in your network to become the master of a multihost system.")})]}),Object(ft.jsxs)(Te.a,{item:!0,className:this.props.classes.controlItem,children:[Object(ft.jsx)(_e.a,{control:Object(ft.jsx)(Ae.a,{checked:this.state.secure,onChange:function(e){return t.setState({secure:e.target.checked},(function(){return t.onChange()}))}}),label:this.props.t("With password")}),Object(ft.jsx)("div",{children:this.props.t("Ask password by connection establishment")})]}),this.state.secure?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{label:this.props.t("Multi-host password"),className:this.props.classes.controlItem,value:this.state.password,type:"password",inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}},autoComplete:"off",onChange:function(e){return t.setState({password:e.target.value},(function(){return t.onChange()}))}})}):null]})})})})}}]),a}(c.Component),De=Object(h.a)()(Object(u.a)((function(t){return{paper:{height:"100%",maxHeight:"100%",maxWidth:"100%",overflow:"auto",padding:t.spacing(1)},controlItem:{width:"calc(100% - ".concat(t.spacing(2),"px)"),marginBottom:t.spacing(2),marginRight:t.spacing(1),marginLeft:t.spacing(1)},RAM:{width:400,marginRight:t.spacing(1)}}}))(Re)),We=a(642),Pe=a(493),Fe=function(t){Object(Jt.a)(a,t);var e=Object(zt.a)(a);function a(t){var s;Object(Ft.a)(this,a);var n=(s=e.call(this,t)).props.settings||{};return n.options=n.options||{},n.backup=n.backup||{},s.state={type:n.type||"file",host:Array.isArray(n.host)?n.host.join(","):n.host||"127.0.0.1",port:n.port||9001,noFileCache:n.noFileCache||!1,dataDir:n.dataDir||"",connectTimeout:n.connectTimeout||2e3,writeFileInterval:n.writeFileInterval||5e3,options_auth_pass:n.options.auth_pass||n.pass||"",options_retry_max_delay:n.options.retry_max_delay||2e3,options_retry_max_count:n.options.retry_max_count||19,options_db:n.options.db||0,options_family:n.options.family||0,backup_disabled:n.backup.disabled||!1,backup_files:n.backup.files||24,backup_hours:n.backup.hours||48,backup_period:n.backup.period||120,backup_path:n.backup.path||"",textIP:Array.isArray(n.host)||(n.host||"").match(/[^.\d]/)||(n.host||"").includes(","),IPs:["0.0.0.0","127.0.0.1"],loading:!0,showWarningDialog:!1,toConfirmType:"",originalDBType:n.type||"file"},s.focusRef=Object(c.createRef)(),s.props.socket.getIpAddresses(s.props.currentHost).then((function(t){var e=Object(Se.a)(t);!e.includes("0.0.0.0")&&e.push("0.0.0.0"),!e.includes("127.0.0.1")&&e.push("127.0.0.1"),s.setState({IPs:e,loading:!1})})),s}return Object(Mt.a)(a,[{key:"componentDidMount",value:function(){this.focusRef.current&&this.focusRef.current.focus()}},{key:"onChange",value:function(){this.props.onChange({type:this.state.type,host:this.state.host,port:parseInt(this.state.port,10),noFileCache:this.state.noFileCache,connectTimeout:parseInt(this.state.connectTimeout,10),writeFileInterval:parseInt(this.state.writeFileInterval,10),dataDir:this.state.dataDir,options:{auth_pass:this.state.options_auth_pass||null,retry_max_delay:parseInt(this.state.options_retry_max_delay,10),retry_max_count:parseInt(this.state.options_retry_max_count,10),db:parseInt(this.state.options_db,10),family:parseInt(this.state.options_family,10)},backup:{disabled:this.state.backup_disabled,files:parseInt(this.state.backup_files,10),hours:parseInt(this.state.backup_hours,10),period:parseInt(this.state.backup_period,10),path:this.state.backup_path}})}},{key:"renderWarning",value:function(){var t=this;return this.state.showWarningDialog?Object(ft.jsx)(Ie.a,{title:this.props.t("Please confirm"),text:this.props.t("switch_db_note"),onClose:function(e){var a;e?(a="redis"===t.state.toConfirmType?6379:9001,t.setState({type:t.state.toConfirmType,showWarningDialog:!1,port:a},(function(){return t.onChange()}))):t.setState({showWarningDialog:!1})}}):null}},{key:"render",value:function(){var t=this;return Object(ft.jsxs)(Le.a,{className:this.props.classes.paper,children:[this.renderWarning(),Object(ft.jsxs)(Te.a,{item:!0,className:Object(p.default)(this.props.classes.gridSettings,this.props.classes.dangerZone),children:[Object(ft.jsx)("h3",{className:this.props.classes.dangerZoneHeader,title:this.props.t("Invalid settings in these fields could lead to dead host"),children:this.props.t("Danger zone")}),Object(ft.jsx)("p",{className:this.props.classes.warning,children:this.props.t("base_settings_hint")}),Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:[Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(j.a,{title:this.props.t("switch_db_note"),children:Object(ft.jsxs)(J.a,{className:this.props.classes.controlItem,children:[Object(ft.jsx)(z.a,{children:this.props.t("Type")}),Object(ft.jsxs)(E.a,{value:this.state.type,onChange:function(e){var a;e.target.value!==t.state.originalDBType?t.setState({toConfirmType:e.target.value,showWarningDialog:!0}):(a="redis"===e.target.value?6379:9001,t.setState({type:e.target.value,port:a},(function(){return t.onChange()})))},children:[Object(ft.jsx)(U.a,{value:"file",children:this.props.t("File")}),Object(ft.jsx)(U.a,{value:"redis",children:"Redis"})]})]})})}),Object(ft.jsx)(Te.a,{item:!0,style:{paddingLeft:8},children:Object(ft.jsx)(_e.a,{control:Object(ft.jsx)(Pe.a,{checked:this.state.textIP,onChange:function(e){return t.setState({textIP:e.target.checked})}}),label:this.props.t("IP is domain or more than one address")})}),Object(ft.jsx)(Te.a,{item:!0,children:this.state.textIP?Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.host,type:"text",onChange:function(e){return t.setState({host:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Bind IP address"),helperText:this.props.t("You can enter more than one address divided by comma")}):Object(ft.jsxs)(J.a,{className:this.props.classes.controlItem,children:[Object(ft.jsx)(z.a,{children:this.props.t("Bind IP address")}),Object(ft.jsx)(E.a,{value:this.state.host,onChange:function(e){return t.setState({host:e.target.value},(function(){return t.onChange()}))},children:this.state.IPs.map((function(e){return Object(ft.jsx)(U.a,{value:e,children:"0.0.0.0"===e?"0.0.0.0 [".concat(t.props.t("All addresses"),"]"):e},e)}))})]})}),Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.port,type:"number",min:1,max:65535,onChange:function(e){return t.setState({port:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Port")})}),"file"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.dataDir,helperText:this.props.t("Optional. Always relative to iobroker.js-controller/"),onChange:function(e){return t.setState({dataDir:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Directory path")})}):null,Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.options_auth_pass,type:"password",helperText:this.props.t("Optional"),inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}},autoComplete:"off",onChange:function(e){return t.setState({options_auth_pass:e.target.value})},label:"redis"===this.state.type?this.props.t("Redis password"):this.props.t("Connection password")})})]})]}),Object(ft.jsx)(Te.a,{item:!0,className:this.props.classes.gridSettings,children:Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:["file"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.connectTimeout,helperText:this.props.t("ms"),type:"number",min:200,onChange:function(e){return t.setState({connectTimeout:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Connect timeout")})}):null,"file"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsxs)(J.a,{component:"fieldset",className:this.props.classes.controlItem,children:[Object(ft.jsx)(We.a,{children:Object(ft.jsx)(_e.a,{control:Object(ft.jsx)(Ae.a,{checked:this.state.noFileCache,onChange:function(e){return t.setState({noFileCache:e.target.checked},(function(){return t.onChange()}))}}),label:this.props.t("No file cache")})}),Object(ft.jsx)(V.a,{children:this.props.t("Always read files from disk and do not cache them in RAM. Used for debugging.")})]})}):null,"file"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.writeFileInterval,helperText:this.props.t("How often the data from RAM will be saved on disk in ms"),type:"number",min:200,onChange:function(e){return t.setState({writeFileInterval:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Store file interval")})}):null,"redis"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.options_retry_max_delay,type:"number",helperText:this.props.t("Maximum delay between connection attempts"),onChange:function(e){return t.setState({options_retry_max_delay:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Retry maximum delay")})}):null,"redis"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.options_retry_max_count,type:"number",helperText:this.props.t("Maximum number of connection retries"),onChange:function(e){return t.setState({options_retry_max_count:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Retry maximum count")})}):null,"redis"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.options_db,type:"number",helperText:this.props.t("Used for sentinels"),onChange:function(e){return t.setState({options_db:e.target.value})},label:this.props.t("DB number")})}):null,"redis"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsxs)(J.a,{className:this.props.classes.controlItem,children:[Object(ft.jsx)(z.a,{children:this.props.t("Family number")}),Object(ft.jsxs)(E.a,{value:this.state.options_family,onChange:function(e){return t.setState({options_family:e.target.value},(function(){return t.onChange()}))},children:[Object(ft.jsx)(U.a,{value:0,children:"auto"}),Object(ft.jsx)(U.a,{value:4,children:"IPv4"}),Object(ft.jsx)(U.a,{value:6,children:"IPv6"})]}),Object(ft.jsx)(V.a,{children:this.props.t("Used for sentinels")})]})}):null,"file"===this.state.type?Object(ft.jsxs)(Te.a,{item:!0,children:[Object(ft.jsx)(_e.a,{className:this.props.classes.controlItem,control:Object(ft.jsx)(Ae.a,{checked:this.state.backup_disabled,onChange:function(e){return t.setState({backup_disabled:e.target.checked},(function(){return t.onChange()}))}}),label:this.props.t("No on-the-fly backup")}),Object(ft.jsx)("div",{children:this.props.t("By every write the backup of object.json will be created.")})]}):null,"file"!==this.state.type||this.state.backup_disabled?null:Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.backup_files,type:"number",helperText:this.props.t("Minimal number of backup files, after the deletion will be executed according to the backup time settings"),onChange:function(e){return t.setState({backup_files:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Number of files")})}),"file"!==this.state.type||this.state.backup_disabled?null:Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.backup_hours,type:"number",helperText:this.props.t("All backups older than these hours will be deleted, but only if the number of files is greater than of the files number"),onChange:function(e){return t.setState({backup_hours:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Backup hours")})}),"file"!==this.state.type||this.state.backup_disabled?null:Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.backup_period,type:"number",helperText:this.props.t("By default the backup is every 2 hours. Time is in minutes. To disable backup set the value to 0"),onChange:function(e){return t.setState({backup_period:e.target.value},(function(){return t.onChange()}))},label:this.props.t("How often")})}),"file"!==this.state.type||this.state.backup_disabled?null:Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.backup_path,helperText:this.props.t("Absolute path to backup directory or empty to backup in data directory. Leave it empty for default storage place."),onChange:function(e){return t.setState({backup_path:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Path")})})]})})]})}}]),a}(c.Component),Me=Object(h.a)()(Object(u.a)((function(t){return{paper:{height:"100%",maxHeight:"100%",maxWidth:"100%",overflow:"auto",padding:t.spacing(1)},controlItem:{width:400,marginBottom:t.spacing(2),marginRight:t.spacing(1),marginLeft:t.spacing(1)},dangerZone:{backgroundColor:"rgba(255, 165, 0, 0.05)",border:"2px solid rgba(255, 165, 0)",marginBottom:t.spacing(1)},dangerZoneHeader:{background:"rgba(255, 165, 0)",color:"#FFF",paddingLeft:t.spacing(2),paddingTop:4,paddingBottom:4,marginTop:-1,marginLeft:-1},warning:{padding:8,fontSize:14,color:"dark"===t.palette.type?"#ffa500":"#b17200"}}}))(Fe)),Je=function(t){Object(Jt.a)(a,t);var e=Object(zt.a)(a);function a(t){var s;Object(Ft.a)(this,a);var n=(s=e.call(this,t)).props.settings||{};return n.options=n.options||{},n.backup=n.backup||{},s.state={type:n.type||"file",host:Array.isArray(n.host)?n.host.join(","):n.host||"127.0.0.1",port:n.port||9e3,connectTimeout:n.connectTimeout||2e3,writeFileInterval:n.writeFileInterval||5e3,dataDir:n.dataDir||"",options_auth_pass:n.options.auth_pass||n.pass||"",options_retry_max_delay:n.options.retry_max_delay||2e3,options_retry_max_count:n.options.retry_max_count||19,options_db:n.options.db||0,options_family:n.options.family||0,backup_disabled:n.backup.disabled||!1,backup_files:n.backup.files||24,backup_hours:n.backup.hours||48,backup_period:n.backup.period||120,backup_path:n.backup.path||"",textIP:Array.isArray(n.host)||(n.host||"").match(/[^.\d]/)||(n.host||"").includes(","),IPs:["0.0.0.0","127.0.0.1"],loading:!0,showWarningDialog:!1,toConfirmType:"",originalDBType:n.type||"file"},s.focusRef=Object(c.createRef)(),s.props.socket.getIpAddresses(s.props.currentHost).then((function(t){var e=Object(Se.a)(t);!e.includes("0.0.0.0")&&e.push("0.0.0.0"),!e.includes("127.0.0.1")&&e.push("127.0.0.1"),s.setState({IPs:e,loading:!1})})),s}return Object(Mt.a)(a,[{key:"componentDidMount",value:function(){this.focusRef.current&&this.focusRef.current.focus()}},{key:"onChange",value:function(){this.props.onChange({type:this.state.type,host:this.state.host,port:parseInt(this.state.port,10),noFileCache:this.state.noFileCache,connectTimeout:parseInt(this.state.connectTimeout,10),writeFileInterval:parseInt(this.state.writeFileInterval,10),dataDir:this.state.dataDir,options:{auth_pass:this.state.options_auth_pass||null,retry_max_delay:parseInt(this.state.options_retry_max_delay,10),retry_max_count:parseInt(this.state.options_retry_max_count,10),db:parseInt(this.state.options_db,10),family:parseInt(this.state.options_family,10)},backup:{disabled:this.state.backup_disabled,files:parseInt(this.state.backup_files,10),hours:parseInt(this.state.backup_hours,10),period:parseInt(this.state.backup_period,10),path:this.state.backup_path}})}},{key:"renderWarning",value:function(){var t=this;return this.state.showWarningDialog?Object(ft.jsx)(Ie.a,{title:this.props.t("Please confirm"),text:this.props.t("switch_db_note"),onClose:function(e){var a;e?(a="redis"===t.state.toConfirmType?6379:9e3,t.setState({type:t.state.toConfirmType,showWarningDialog:!1,port:a},(function(){return t.onChange()}))):t.setState({showWarningDialog:!1})}}):null}},{key:"render",value:function(){var t=this;return Object(ft.jsxs)(Le.a,{className:this.props.classes.paper,children:[this.renderWarning(),Object(ft.jsxs)(Te.a,{item:!0,className:Object(p.default)(this.props.classes.gridSettings,this.props.classes.dangerZone),children:[Object(ft.jsx)("h3",{className:this.props.classes.dangerZoneHeader,title:this.props.t("Invalid settings in these fields could lead to dead host"),children:this.props.t("Danger zone")}),Object(ft.jsx)("p",{className:this.props.classes.warning,children:this.props.t("base_settings_hint")}),Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:[Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(j.a,{title:this.props.t("switch_db_note"),children:Object(ft.jsxs)(J.a,{className:this.props.classes.controlItem,children:[Object(ft.jsx)(z.a,{children:this.props.t("Type")}),Object(ft.jsxs)(E.a,{value:this.state.type,onChange:function(e){var a;e.target.value!==t.state.originalDBType?t.setState({toConfirmType:e.target.value,showWarningDialog:!0}):(a="redis"===e.target.value?6379:9e3,t.setState({type:e.target.value,port:a},(function(){return t.onChange()})))},children:[Object(ft.jsx)(U.a,{value:"file",children:this.props.t("File")}),Object(ft.jsx)(U.a,{value:"redis",children:"Redis"})]})]})})}),Object(ft.jsx)(Te.a,{item:!0,style:{paddingLeft:8},children:Object(ft.jsx)(_e.a,{control:Object(ft.jsx)(Pe.a,{checked:this.state.textIP,onChange:function(e){return t.setState({textIP:e.target.checked})}}),label:this.props.t("IP is domain or more than one address")})}),Object(ft.jsx)(Te.a,{item:!0,children:this.state.textIP?Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.host,type:"text",onChange:function(e){return t.setState({host:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Bind IP address"),helperText:this.props.t("You can enter more than one address divided by comma")}):Object(ft.jsxs)(J.a,{className:this.props.classes.controlItem,children:[Object(ft.jsx)(z.a,{children:this.props.t("Bind IP address")}),Object(ft.jsx)(E.a,{value:this.state.host,onChange:function(e){return t.setState({host:e.target.value},(function(){return t.onChange()}))},children:this.state.IPs.map((function(e){return Object(ft.jsx)(U.a,{value:e,children:"0.0.0.0"===e?"0.0.0.0 [".concat(t.props.t("All addresses"),"]"):e},e)}))})]})}),Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.port,type:"number",min:1,max:65535,onChange:function(e){return t.setState({port:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Port")})}),"file"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.dataDir,helperText:this.props.t("Optional. Always relative to iobroker.js-controller/"),onChange:function(e){return t.setState({dataDir:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Directory path")})}):null,Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.options_auth_pass,type:"password",helperText:this.props.t("Optional"),inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}},autoComplete:"off",onChange:function(e){return t.setState({options_auth_pass:e.target.value})},label:"redis"===this.state.type?this.props.t("Redis password"):this.props.t("Connection password")})})]})]}),Object(ft.jsx)(Te.a,{item:!0,className:this.props.classes.gridSettings,children:Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:["file"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.connectTimeout,helperText:this.props.t("ms"),type:"number",min:200,onChange:function(e){return t.setState({connectTimeout:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Connect timeout")})}):null,"file"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.writeFileInterval,helperText:this.props.t("How often the data from RAM will be saved on disk in ms"),type:"number",min:200,onChange:function(e){return t.setState({writeFileInterval:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Store file interval")})}):null,"redis"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.options_retry_max_delay,type:"number",helperText:this.props.t("Maximum delay between connection attempts"),onChange:function(e){return t.setState({options_retry_max_delay:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Retry maximum delay")})}):null,"redis"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.options_retry_max_count,type:"number",helperText:this.props.t("Maximum number of connection retries"),onChange:function(e){return t.setState({options_retry_max_count:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Retry maximum count")})}):null,"redis"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.options_db,type:"number",helperText:this.props.t("Used for sentinels"),onChange:function(e){return t.setState({options_db:e.target.value})},label:this.props.t("DB number")})}):null,"redis"===this.state.type?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsxs)(J.a,{className:this.props.classes.controlItem,children:[Object(ft.jsx)(z.a,{children:this.props.t("Family number")}),Object(ft.jsxs)(E.a,{value:this.state.options_family,onChange:function(e){return t.setState({options_family:e.target.value},(function(){return t.onChange()}))},children:[Object(ft.jsx)(U.a,{value:0,children:"auto"}),Object(ft.jsx)(U.a,{value:4,children:"IPv4"}),Object(ft.jsx)(U.a,{value:6,children:"IPv6"})]}),Object(ft.jsx)(V.a,{children:this.props.t("Used for sentinels")})]})}):null,"file"===this.state.type?Object(ft.jsxs)(Te.a,{item:!0,children:[Object(ft.jsx)(_e.a,{className:this.props.classes.controlItem,control:Object(ft.jsx)(Ae.a,{checked:this.state.backup_disabled,onChange:function(e){return t.setState({backup_disabled:e.target.checked},(function(){return t.onChange()}))}}),label:this.props.t("No on-the-fly backup")}),Object(ft.jsx)("div",{children:this.props.t("By every write the backup of object.json will be created.")})]}):null,"file"!==this.state.type||this.state.backup_disabled?null:Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.backup_files,type:"number",helperText:this.props.t("Minimal number of backup files, after the deletion will be executed according to the backup time settings"),onChange:function(e){return t.setState({backup_files:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Number of files")})}),"file"!==this.state.type||this.state.backup_disabled?null:Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.backup_hours,type:"number",helperText:this.props.t("All backups older than these hours will be deleted, but only if the number of files is greater than of the files number"),onChange:function(e){return t.setState({backup_hours:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Backup hours")})}),"file"!==this.state.type||this.state.backup_disabled?null:Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.backup_period,type:"number",helperText:this.props.t("By default the backup is every 2 hours. Time is in minutes. To disable backup set the value to 0"),onChange:function(e){return t.setState({backup_period:e.target.value},(function(){return t.onChange()}))},label:this.props.t("How often")})}),"file"!==this.state.type||this.state.backup_disabled?null:Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.backup_path,helperText:this.props.t("Absolute path to backup directory or empty to backup in data directory. Leave it empty for default storage place."),onChange:function(e){return t.setState({backup_path:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Path")})})]})})]})}}]),a}(c.Component),ze=Object(h.a)()(Object(u.a)((function(t){return{paper:{height:"100%",maxHeight:"100%",maxWidth:"100%",overflow:"auto",padding:t.spacing(1)},controlItem:{width:400,marginBottom:t.spacing(2),marginRight:t.spacing(1),marginLeft:t.spacing(1)},dangerZone:{backgroundColor:"rgba(255, 165, 0, 0.05)",border:"2px solid rgba(255, 165, 0)",marginBottom:t.spacing(1)},dangerZoneHeader:{background:"rgba(255, 165, 0)",color:"#FFF",paddingLeft:t.spacing(2),paddingTop:4,paddingBottom:4,marginTop:-1,marginLeft:-1},warning:{padding:8,fontSize:14,color:"dark"===t.palette.type?"#ffa500":"#b17200"}}}))(Je)),Ee=a(758),Ue=a(256),Ve=a.n(Ue),Xe=a(1587),Ke=a.n(Xe),qe=a(2001),Qe=a.n(qe),Ge=a(2002),Ze=a.n(Ge),Ye=a(1637),$e=function(t){Object(Jt.a)(a,t);var e=Object(zt.a)(a);function a(t){var s;Object(Ft.a)(this,a);var n=(s=e.call(this,t)).props.settings||{};return n.transport=n.transport||{},Object.keys(n.transport).forEach((function(t){"file"===n.transport[t].type?(n.transport[t].maxSize=n.transport[t].maxSize||0,n.transport[t].level=n.transport[t].level||"",n.transport[t].maxFiles=n.transport[t].maxFiles||0):"syslog"===n.transport[t].type?(n.transport[t].level=n.transport[t].level||"",n.transport[t].host=n.transport[t].host||"",n.transport[t].port=n.transport[t].port||0,n.transport[t].path=n.transport[t].path||"",n.transport[t].facility=n.transport[t].facility||"",n.transport[t].sysLogType=n.transport[t].sysLogType||"",n.transport[t].app_name=n.transport[t].app_name||"",n.transport[t].eol=n.transport[t].eol||""):"http"===n.transport[t].type?(n.transport[t].level=n.transport[t].level||"",n.transport[t].host=n.transport[t].host||"",n.transport[t].port=n.transport[t].port||0,n.transport[t].path=n.transport[t].path||"/",n.transport[t].auth=n.transport[t].auth||"None",n.transport[t].ssl=n.transport[t].ssl||!1):"stream"===n.transport[t].type?(n.transport[t].stream=n.transport[t].stream||"",n.transport[t].level=n.transport[t].level||"",n.transport[t].silent=n.transport[t].silent||!1,n.transport[t].eol=n.transport[t].eol||""):"seq"===n.transport[t].type&&(n.transport[t].level=n.transport[t].level||"",n.transport[t].serverUrl=n.transport[t].serverUrl||"",n.transport[t].apiKey=n.transport[t].apiKey||"",n.transport[t].eol=n.transport[t].eol||"")})),s.state={level:n.level||"info",maxDays:n.maxDays||7,noStdout:n.noStdout||!0,transport:n.transport||{},expanded:[]},s.focusRef=Object(c.createRef)(),s}return Object(Mt.a)(a,[{key:"componentDidMount",value:function(){this.focusRef.current&&this.focusRef.current.focus()}},{key:"onChange",value:function(){var t=this,e={level:this.state.level,maxDays:parseInt(this.state.maxDays,10),noStdout:this.state.noStdout,transport:{}};Object.keys(this.state.transport).forEach((function(a){e.transport[a]=JSON.parse(JSON.stringify(t.state.transport[a])),"file"===t.state.transport[a].type?(e.transport[a].maxSize=parseInt(e.transport[a].maxSize,10)||null,e.transport[a].maxSize&&(e.transport[a].maxSize+="MB"),e.transport[a].maxFiles=parseInt(e.transport[a].maxFiles,10)||null):"syslog"===t.state.transport[a].type?(!e.transport[a].port&&delete e.transport[a].port,!e.transport[a].path&&delete e.transport[a].path,!e.transport[a].sysLogType&&delete e.transport[a].sysLogType,!e.transport[a].app_name&&delete e.transport[a].app_name,!e.transport[a].eol&&delete e.transport[a].eol):"http"===t.state.transport[a].type?(e.transport[a].host=e.transport[a].host||"",e.transport[a].port=parseInt(e.transport[a].port,10)||80,e.transport[a].path=e.transport[a].path||"/",e.transport[a].auth=e.transport[a].auth||"",e.transport[a].ssl=e.transport[a].ssl||!1):"stream"===t.state.transport[a].type&&(e.transport[a].stream=e.transport[a].stream||"",e.transport[a].level=e.transport[a].level||"info",e.transport[a].silent=e.transport[a].silent||!1,e.transport[a].eol=e.transport[a].eol||"")})),this.props.onChange(e)}},{key:"onDelete",value:function(t){var e=this,a=JSON.parse(JSON.stringify(this.state.transport));delete a[t],this.setState({transport:a},(function(){return e.onChange()}))}},{key:"renderEnabled",value:function(t){var e=this;return Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(_e.a,{className:this.props.classes.controlItem,control:Object(ft.jsx)(Ae.a,{checked:this.state.transport[t].enabled,onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].enabled=a.target.checked,e.setState({transport:s},(function(){return e.onChange()}))}}),label:this.props.t("Enabled")})})}},{key:"renderLogLevel",value:function(t){var e=this;return this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsxs)(J.a,{className:this.props.classes.controlItem,children:[Object(ft.jsx)(z.a,{children:this.props.t("Level")}),Object(ft.jsxs)(E.a,{value:this.state.transport[t].level||"_",renderValue:function(){return e.state.transport[t].level||e.props.t("default")},onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].level="_"===a.target.value?"":a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},children:[Object(ft.jsx)(U.a,{value:"_",children:this.props.t("default")}),Object(ft.jsx)(U.a,{value:"silly",children:"silly"}),Object(ft.jsx)(U.a,{value:"debug",children:"debug"}),Object(ft.jsx)(U.a,{value:"info",children:"info"}),Object(ft.jsx)(U.a,{value:"warn",children:"warn"}),Object(ft.jsx)(U.a,{value:"error",children:"error"})]}),Object(ft.jsx)(V.a,{children:this.props.t("Level of messages that this transport should log (default: level set on parent logger)")})]})}):null}},{key:"renderSyslog",value:function(t){var e=this;return Object(ft.jsxs)(le.a,{expanded:this.state.expanded.includes(t),onChange:function(){var a=Object(Se.a)(e.state.expanded),s=a.indexOf(t);-1===s?a.push(t):a.splice(s,1),e.setState({expanded:a})},children:[Object(ft.jsxs)(de.a,{expandIcon:Object(ft.jsx)(oe.a,{}),style:{position:"relative",background:"rgba(128, 128, 128, 0.3)"},children:[Object(ft.jsx)(Qe.a,{className:this.props.classes.headingIcon}),Object(ft.jsx)(Z.a,{className:this.props.classes.heading,children:t}),Object(ft.jsx)(G.a,{size:"small",className:this.props.classes.delButton,onClick:function(){return e.onDelete(t)},children:Object(ft.jsx)(at.a,{})})]}),Object(ft.jsx)(pe.a,{children:Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:[this.renderEnabled(t),this.renderLogLevel(t),this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].host,helperText:this.props.t("The host running syslogd, defaults to localhost"),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].host=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("File name")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].port,type:"number",helperText:this.props.t("The port on the host that syslog is running on, defaults to syslogd's default port(514/UDP)."),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].port=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Port")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsxs)(J.a,{className:this.props.classes.controlItem,children:[Object(ft.jsx)(z.a,{children:this.props.t("Protocol")}),Object(ft.jsxs)(E.a,{value:this.state.transport[t].protocol,onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].protocol=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},children:[Object(ft.jsx)(U.a,{value:"udp4",children:"udp4"}),Object(ft.jsx)(U.a,{value:"tcp4",children:"tcp4"}),Object(ft.jsx)(U.a,{value:"unix",children:"unix"}),Object(ft.jsx)(U.a,{value:"unix-connect",children:"unix-connect"})]})]})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].path,helperText:this.props.t("The path to the syslog dgram socket (i.e. /dev/log or /var/run/syslog for OS X)."),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].path=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Path")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].facility,helperText:this.props.t("Syslog facility to use (Default: local0)."),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].facility=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Facility")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].localhost,helperText:this.props.t("Host to indicate that log messages are coming from (Default: localhost)."),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].localhost=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Log name")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].sysLogType,helperText:this.props.t("The type of the syslog protocol to use (Default: BSD)."),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].sysLogType=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("SysLog Type")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].app_name,helperText:this.props.t("The name of the application (Default: process.title)."),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].app_name=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Application name")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].eol,helperText:this.props.t("The end of line character to be added to the end of the message (Default: Message without modifications)."),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].eol=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("End of line char")})}):null]})})]},t)}},{key:"renderFile",value:function(t){var e=this;return Object(ft.jsxs)(le.a,{expanded:this.state.expanded.includes(t),onChange:function(){var a=Object(Se.a)(e.state.expanded),s=a.indexOf(t);-1===s?a.push(t):a.splice(s,1),e.setState({expanded:a})},children:[Object(ft.jsxs)(de.a,{style:{background:"rgba(128, 128, 128, 0.3)"},expandIcon:Object(ft.jsx)(oe.a,{}),children:[Object(ft.jsx)(Ke.a,{className:this.props.classes.headingIcon}),Object(ft.jsx)(Z.a,{className:this.props.classes.heading,children:t}),Object(ft.jsx)(G.a,{size:"small",className:this.props.classes.delButton,onClick:function(){return e.onDelete(t)},children:Object(ft.jsx)(at.a,{})})]}),Object(ft.jsx)(pe.a,{children:Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:[this.renderEnabled(t),this.renderLogLevel(t),this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].filename,onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].filename=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("File name")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].fileext,onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].fileext=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("File extension")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].maxSize,type:"number",helperText:this.props.t("MB"),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].maxSize=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Maximal size of one file")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].maxFiles,type:"number",onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].maxFiles=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Maximal number of files")})}):null]})})]},t)}},{key:"renderHttp",value:function(t){var e=this;return Object(ft.jsxs)(le.a,{expanded:this.state.expanded.includes(t),onChange:function(){var a=Object(Se.a)(e.state.expanded),s=a.indexOf(t);-1===s?a.push(t):a.splice(s,1),e.setState({expanded:a})},children:[Object(ft.jsxs)(de.a,{expandIcon:Object(ft.jsx)(oe.a,{}),style:{position:"relative",background:"rgba(128, 128, 128, 0.3)"},children:[Object(ft.jsx)(Ve.a,{className:this.props.classes.headingIcon}),Object(ft.jsx)(Z.a,{className:this.props.classes.heading,children:t}),Object(ft.jsx)(G.a,{size:"small",className:this.props.classes.delButton,onClick:function(){return e.onDelete(t)},children:Object(ft.jsx)(at.a,{})})]}),Object(ft.jsx)(pe.a,{children:Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:[this.renderEnabled(t),this.renderLogLevel(t),this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].host,helperText:this.props.t("Remote host of the HTTP logging endpoint"),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].host=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Host")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].port,type:"number",helperText:this.props.t("Remote port of the HTTP logging endpoint"),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].port=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Port")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].path,helperText:this.props.t("Remote URI of the HTTP logging endpoint"),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].path=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Path")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].auth,helperText:this.props.t("An object representing the username and password for HTTP Basic Auth"),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].auth=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Auth")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(_e.a,{className:this.props.classes.controlItem,control:Object(ft.jsx)(Ae.a,{checked:this.state.transport[t].ssl,onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].ssl=a.target.checked,e.setState({transport:s},(function(){return e.onChange()}))}}),label:this.props.t("SSL")})}):null]})})]},t)}},{key:"renderStream",value:function(t){var e=this;return Object(ft.jsxs)(le.a,{expanded:this.state.expanded.includes(t),onChange:function(){var a=Object(Se.a)(e.state.expanded),s=a.indexOf(t);-1===s?a.push(t):a.splice(s,1),e.setState({expanded:a})},children:[Object(ft.jsxs)(de.a,{expandIcon:Object(ft.jsx)(oe.a,{}),style:{position:"relative",background:"rgba(128, 128, 128, 0.3)"},children:[Object(ft.jsx)(Ze.a,{className:this.props.classes.headingIcon}),Object(ft.jsx)(Z.a,{className:this.props.classes.heading,children:t}),Object(ft.jsx)(G.a,{size:"small",className:this.props.classes.delButton,onClick:function(){return e.onDelete(t)},children:Object(ft.jsx)(at.a,{})})]}),Object(ft.jsx)(pe.a,{children:Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:[this.renderEnabled(t),this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].stream,helperText:this.props.t("any Node.js stream. If an objectMode stream is provided then the entire info object will be written. Otherwise info[MESSAGE] will be written"),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].stream=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("File name")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(_e.a,{className:this.props.classes.controlItem,control:Object(ft.jsx)(Ae.a,{checked:this.state.transport[t].silent,onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].silent=a.target.checked,e.setState({transport:s},(function(){return e.onChange()}))}}),label:this.props.t("Silent")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].eol,helperText:this.props.t("Line-ending character to use. (default: os.EOL).)"),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].eol=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("EOL")})}):null]})})]},t)}},{key:"renderSEQ",value:function(t){var e=this;return Object(ft.jsxs)(le.a,{expanded:this.state.expanded.includes(t),onChange:function(){var a=Object(Se.a)(e.state.expanded),s=a.indexOf(t);-1===s?a.push(t):a.splice(s,1),e.setState({expanded:a})},children:[Object(ft.jsxs)(de.a,{expandIcon:Object(ft.jsx)(oe.a,{}),style:{position:"relative",background:"rgba(128, 128, 128, 0.3)"},children:[Object(ft.jsx)("img",{className:this.props.classes.headingIcon,src:Ye.default,alt:"seq"}),Object(ft.jsx)(Z.a,{className:this.props.classes.heading,children:t}),Object(ft.jsx)(G.a,{size:"small",className:this.props.classes.delButton,onClick:function(){return e.onDelete(t)},children:Object(ft.jsx)(at.a,{})})]}),Object(ft.jsx)(pe.a,{children:Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:[this.renderEnabled(t),this.renderLogLevel(t),this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].serverUrl,helperText:this.props.t("The http(s) URL including port of the seq server. If you use HTTPS a real certificate is needed; self signed certs are ot accepted."),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].serverUrl=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("Server URL")})}):null,this.state.transport[t].enabled?Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.transport[t].apiKey,helperText:this.props.t("The apiKey of the seq system"),onChange:function(a){var s=JSON.parse(JSON.stringify(e.state.transport));s[t].apiKey=a.target.value,e.setState({transport:s},(function(){return e.onChange()}))},label:this.props.t("API key")})}):null]})})]},t)}},{key:"add",value:function(t){var e=this;"file"===t?function(){for(var a=1;Object.keys(e.state.transport).find((function(e){return e===t+a}));)a++;var s=t+a,n=JSON.parse(JSON.stringify(e.state.transport));n[s]={type:t,enabled:!0,filename:"log/iobroker",fileext:".log",maxSize:0,maxFiles:0},e.setState({transport:n},(function(){return e.onChange()}))}():"syslog"===t?function(){for(var a=1;Object.keys(e.state.transport).find((function(e){return e===t+a}));)a++;var s=t+a,n=JSON.parse(JSON.stringify(e.state.transport));n[s]={type:t,enabled:!0,host:"localhost",port:0,protocol:"udp4",path:"",facility:"",localhost:"iobroker",sysLogType:"",app_name:"",eol:""},e.setState({transport:n},(function(){return e.onChange()}))}():"http"===t?function(){for(var a=1;Object.keys(e.state.transport).find((function(e){return e===t+a}));)a++;var s=t+a,n=JSON.parse(JSON.stringify(e.state.transport));n[s]={type:t,enabled:!0,host:"localhost",port:80,path:"/",auth:"None",ssl:!1},e.setState({transport:n},(function(){return e.onChange()}))}():"stream"===t?function(){for(var a=1;Object.keys(e.state.transport).find((function(e){return e===t+a}));)a++;var s=t+a,n=JSON.parse(JSON.stringify(e.state.transport));n[s]={type:t,enabled:!0,stream:"/dev/null",level:"info",silent:!1,eol:""},e.setState({transport:n},(function(){return e.onChange()}))}():"seq"===t&&function(){for(var a=1;Object.keys(e.state.transport).find((function(e){return e===t+a}));)a++;var s=t+a,n=JSON.parse(JSON.stringify(e.state.transport));n[s]={type:t,enabled:!0,level:"info",serverUrl:"http://IP:PORT",apiKey:""},e.setState({transport:n},(function(){return e.onChange()}))}()}},{key:"render",value:function(){var t=this;return Object(ft.jsxs)(Le.a,{className:this.props.classes.paper,children:[Object(ft.jsx)(Te.a,{item:!0,className:this.props.classes.gridSettings,children:Object(ft.jsxs)(Te.a,{container:!0,direction:"column",children:[Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsxs)(J.a,{className:this.props.classes.controlItem,children:[Object(ft.jsx)(z.a,{children:this.props.t("Level")}),Object(ft.jsxs)(E.a,{value:this.state.level,onChange:function(e){return t.setState({level:e.target.value},(function(){return t.onChange()}))},children:[Object(ft.jsx)(U.a,{value:"silly",children:"silly"}),Object(ft.jsx)(U.a,{value:"debug",children:"debug"}),Object(ft.jsx)(U.a,{value:"info",children:"info"}),Object(ft.jsx)(U.a,{value:"warn",children:"warn"}),Object(ft.jsx)(U.a,{value:"error",children:"error"})]})]})}),Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(f.a,{className:this.props.classes.controlItem,value:this.state.maxDays,helperText:this.props.t("Every day one file"),type:"number",onChange:function(e){return t.setState({maxDays:e.target.value},(function(){return t.onChange()}))},label:this.props.t("Maximum number of days")})}),Object(ft.jsx)(Te.a,{item:!0,children:Object(ft.jsx)(_e.a,{className:this.props.classes.controlItem,control:Object(ft.jsx)(Ae.a,{checked:this.state.noStdout,onChange:function(e){return t.setState({noStdout:e.target.checked},(function(){return t.onChange()}))}}),label:this.props.t("No stdout outputs")})}),Object.keys(this.state.transport).map((function(e){switch(t.state.transport[e].type){case"syslog":return t.renderSyslog(e);case"file":return t.renderFile(e);case"http":return t.renderHttp(e);case"stream":return t.renderStream(e);case"seq":return t.renderSEQ(e);default:return null}}))]})}),Object(ft.jsxs)(Ee.a,{children:[Object(ft.jsxs)(Kt.a,{className:this.props.classes.addButton,variant:"contained",onClick:function(){return t.add("file")},startIcon:Object(ft.jsx)(Zt.a,{}),children:[Object(ft.jsx)(Ke.a,{className:this.props.classes.buttonIcon}),this.props.t("File log")]}),Object(ft.jsxs)(Kt.a,{className:this.props.classes.addButton,variant:"contained",onClick:function(){return t.add("syslog")},startIcon:Object(ft.jsx)(Zt.a,{}),children:[Object(ft.jsx)(Qe.a,{className:this.props.classes.buttonIcon}),this.props.t("Syslog")]}),Object(ft.jsxs)(Kt.a,{className:this.props.classes.addButton,variant:"contained",onClick:function(){return t.add("http")},startIcon:Object(ft.jsx)(Zt.a,{}),children:[Object(ft.jsx)(Ve.a,{className:this.props.classes.buttonIcon}),this.props.t("HTTP log")]}),Object(ft.jsxs)(Kt.a,{className:this.props.classes.addButton,variant:"contained",onClick:function(){return t.add("stream")},startIcon:Object(ft.jsx)(Zt.a,{}),children:[Object(ft.jsx)(Ze.a,{className:this.props.classes.buttonIcon}),this.props.t("Stream log")]}),Object(ft.jsxs)(Kt.a,{className:this.props.classes.addButton,variant:"contained",onClick:function(){return t.add("seq")},startIcon:Object(ft.jsx)(Zt.a,{}),children:[Object(ft.jsx)("img",{src:Ye.default,className:this.props.classes.buttonIcon,alt:"seq"}),this.props.t("SEQ log")]})]})]})}}]),a}(c.Component),ta=Object(h.a)()(Object(u.a)((function(t){return{paper:{height:"100%",maxHeight:"100%",maxWidth:"100%",overflow:"hidden",padding:t.spacing(1)},gridSettings:{height:"calc(100% - "+t.mixins.toolbar.minHeight+"px)",width:"100%",overflow:"auto"},controlItem:{width:400,marginBottom:t.spacing(2),marginRight:t.spacing(1),marginLeft:t.spacing(1)},delButton:{position:"absolute",top:2,right:t.spacing(6)},addButton:{marginRight:t.spacing(1)},buttonIcon:{height:24},headingIcon:{height:24,marginRight:t.spacing(1)}}}))($e)),ea=a(347),aa=a.n(ea),sa=(a(524),a(525),a(526),a(527),a(528),function(t){Object(Jt.a)(a,t);var e=Object(zt.a)(a);function a(t){var s;return Object(Ft.a)(this,a),(s=e.call(this,t)).state={settings:JSON.stringify(s.props.settings||{},null,2),error:!1},s}return Object(Mt.a)(a,[{key:"editorDidMount",value:function(t,e){t.focus()}},{key:"onChange",value:function(t){var e=this,a={settings:t};try{var s=JSON.parse(t);this.state.error&&(a.error=!1),this.setState(a,(function(){return e.props.onChange(s)}))}catch(n){a.error=!0,this.setState(a)}}},{key:"render",value:function(){var t=this;return Object(ft.jsxs)(Le.a,{className:this.props.classes.paper,children:[Object(ft.jsx)("div",{className:this.props.classes.title,children:this.props.t("For future use")}),Object(ft.jsx)("div",{className:Object(p.default)(this.props.classes.divWithoutTitle,this.state.error&&this.props.classes.error),children:Object(ft.jsx)(aa.a,{mode:"json",width:"100%",height:"100%",theme:"dark"===this.props.themeName?"clouds_midnight":"chrome",value:this.state.settings,onChange:function(e){return t.onChange(e)},name:"UNIQUE_ID_OF_DIV1",fontSize:14,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0},editorProps:{$blockScrolling:!0}})})]})}}],[{key:"getDerivedStateFromProps",value:function(t,e){return null}}]),a}(c.Component)),na=Object(h.a)()(Object(u.a)((function(t){return{paper:{height:"100%",maxHeight:"100%",maxWidth:"100%",overflow:"auto",padding:t.spacing(1)},title:{width:"100%",height:32},divWithoutTitle:{width:"100%",height:"calc(100% - 32px)",border:"2px solid #00000000"},error:{border:"2px solid #FF0000"}}}))(sa)),ra=function(t){Object(Jt.a)(a,t);var e=Object(zt.a)(a);function a(t){var s;return Object(Ft.a)(this,a),(s=e.call(this,t)).state={currentTab:0,hasChanges:[],currentHost:s.props.currentHost,hosts:s.props.hosts,loading:!0,confirmExit:!1,showRestart:!1,system:null,multihostService:null,objects:null,states:null,log:null,plugins:null,saving:!1},s}return Object(Mt.a)(a,[{key:"componentDidMount",value:function(){this.getSettings(this.state.currentHost)}},{key:"renderConfirmDialog",value:function(){var t=this;return this.state.confirmExit?Object(ft.jsx)(Ie.a,{text:this.props.t("Discard unsaved changes?"),onClose:function(e){return t.setState({confirmExit:!1},(function(){return e&&t.props.onClose()}))}}):null}},{key:"renderRestartDialog",value:function(){var t=this;return this.state.showRestart?Object(ft.jsx)(Ie.a,{title:this.props.t("Please confirm"),text:Object(ft.jsxs)(ft.Fragment,{children:[Object(ft.jsx)("div",{children:this.props.t("Restart works only if controller started as system service.")}),Object(ft.jsx)("div",{children:this.props.t("Would you like to restart the controller for your changes to take effect?")})]}),onClose:function(e){return t.setState({showRestart:!1},(function(){e&&t.props.socket.restartController(t.props.currentHost).then((function(){return setTimeout((function(){return window.location.reload(!1)}),500)})).catch((function(t){return window.alert("Cannot restart: ".concat(t))})),t.props.onClose()}))}}):null}},{key:"getSettings",value:function(t){var e=this;this.props.socket.readBaseSettings(t||this.state.currentHost).then((function(t){t&&t.config&&(delete t.config.dataDirComment,e.originalSettings=JSON.parse(JSON.stringify(t.config)),t.config.loading=!1,e.setState(t.config))}))}},{key:"onSave",value:function(t){var e=this,a={system:this.state.system,multihostService:this.state.multihostService,objects:this.state.objects,states:this.state.states,log:this.state.log,plugins:this.state.plugins},s=Object.assign({},this.originalSettings,a);this.setState({saving:!0},(function(){e.props.socket.writeBaseSettings(t||e.state.currentHost,s).then((function(){e.originalSettings=JSON.parse(JSON.stringify(a)),e.setState({hasChanges:[],showRestart:!0,saving:!1})}))}))}},{key:"updateSettings",value:function(t,e){var a,s=Object(Se.a)(this.state.hasChanges),n=JSON.stringify(this.originalSettings[t])!==JSON.stringify(e),r=s.indexOf(t);n&&-1===r?s.push(t):n||-1===r||s.splice(r,1),this.setState((a={},Object(M.a)(a,t,e),Object(M.a)(a,"hasChanges",s),a))}},{key:"renderSystem",value:function(){var t=this,e="system";return Object(ft.jsx)(Be,{settings:this.state[e],t:this.props.t,currentHost:this.props.currentHost,onChange:function(a){return t.updateSettings(e,a)}})}},{key:"renderMultihost",value:function(){var t=this,e="multihostService";return Object(ft.jsx)(De,{settings:this.state[e],t:this.props.t,socket:this.props.socket,currentHost:this.props.currentHost,onChange:function(a){return t.updateSettings(e,a)}})}},{key:"renderObjects",value:function(){var t=this,e="objects";return Object(ft.jsx)(Me,{settings:this.state[e],t:this.props.t,socket:this.props.socket,currentHost:this.props.currentHost,onChange:function(a){return t.updateSettings(e,a)}})}},{key:"renderStates",value:function(){var t=this,e="states";return Object(ft.jsx)(ze,{settings:this.state[e],t:this.props.t,socket:this.props.socket,currentHost:this.props.currentHost,onChange:function(a){return t.updateSettings(e,a)}})}},{key:"renderLog",value:function(){var t=this;return Object(ft.jsx)(ta,{settings:this.state.log,t:this.props.t,socket:this.props.socket,currentHost:this.props.currentHost,onChange:function(e){return t.updateSettings("log",e)}})}},{key:"renderPlugins",value:function(){var t=this,e="plugins";return Object(ft.jsx)(na,{settings:this.state[e],t:this.props.t,themeName:this.props.themeName,onChange:function(a){return t.updateSettings(e,a)}})}},{key:"render",value:function(){var t=this;return Object(ft.jsxs)(Et.a,{className:this.props.classes.dialog,open:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"xl","aria-labelledby":"base-settings-dialog-title",children:[Object(ft.jsxs)(Ut.a,{id:"base-settings-dialog-title",children:[this.props.t("Host Base Settings"),": ",this.props.currentHostName||this.props.currentHost]}),Object(ft.jsxs)(Vt.a,{className:this.props.classes.content,children:[Object(ft.jsx)(ke.a,{position:"static",children:Object(ft.jsxs)(Ne.a,{value:this.state.currentTab,onChange:function(e,a){return t.setState({currentTab:a})},"aria-label":"system tabs",children:[Object(ft.jsx)(Ce.a,{label:this.props.t("System"),id:"system-tab","aria-controls":"simple-tabpanel-0"}),Object(ft.jsx)(Ce.a,{label:this.props.t("Multi-host"),id:"multihost-tab","aria-controls":"simple-tabpanel-1"}),Object(ft.jsx)(Ce.a,{label:this.props.t("Objects"),id:"objects-tab","aria-controls":"simple-tabpanel-3"}),Object(ft.jsx)(Ce.a,{label:this.props.t("States"),id:"states-tab","aria-controls":"simple-tabpanel-4"}),Object(ft.jsx)(Ce.a,{label:this.props.t("Log"),id:"log-tab","aria-controls":"simple-tabpanel-5"}),Object(ft.jsx)(Ce.a,{label:this.props.t("Plugins"),id:"plugins-tab","aria-controls":"simple-tabpanel-6"})]})}),this.state.loading?Object(ft.jsx)(m.a,{}):null,this.state.loading||0!==this.state.currentTab?null:Object(ft.jsx)("div",{className:this.props.classes.tabPanel,children:this.renderSystem()}),this.state.loading||1!==this.state.currentTab?null:Object(ft.jsx)("div",{className:this.props.classes.tabPanel,children:this.renderMultihost()}),this.state.loading||2!==this.state.currentTab?null:Object(ft.jsx)("div",{className:this.props.classes.tabPanel,children:this.renderObjects()}),this.state.loading||3!==this.state.currentTab?null:Object(ft.jsx)("div",{className:this.props.classes.tabPanel,children:this.renderStates()}),this.state.loading||4!==this.state.currentTab?null:Object(ft.jsx)("div",{className:this.props.classes.tabPanel,children:this.renderLog()}),this.state.loading||5!==this.state.currentTab?null:Object(ft.jsx)("div",{className:this.props.classes.tabPanel,children:this.renderPlugins()}),this.renderConfirmDialog(),this.renderRestartDialog()]}),Object(ft.jsxs)(Xt.a,{children:[Object(ft.jsx)(Kt.a,{variant:"contained",disabled:!this.state.hasChanges.length||this.state.saving,onClick:function(){return t.onSave()},color:"primary",startIcon:Object(ft.jsx)(Qt.a,{}),children:this.props.t("Save & Close")}),Object(ft.jsx)(Kt.a,{variant:"contained",disabled:this.state.saving,onClick:function(){return t.state.hasChanges.length?t.setState({confirmExit:!0}):t.props.onClose()},startIcon:Object(ft.jsx)(w.a,{}),children:this.state.hasChanges.length?this.props.t("Cancel"):this.props.t("Close")})]})]})}}]),a}(c.Component),oa=Object(h.a)()(Object(u.a)((function(t){return{content:{height:500,overflow:"hidden"},tabPanel:{width:"100%",height:"calc(100% - ".concat(t.mixins.toolbar.minHeight,"px)"),overflow:"auto"}}}))(ra)),ia=a(270),ca=a(632),la=["classes","disabled","socket","currentHost","expertMode","executeCommand","systemConfig","navigate","themeName","lang","hostsWorker","showAdaptersWarning"],da={},pa={Uptime:ye.a.formatSeconds,"System uptime":ye.a.formatSeconds,RAM:ye.a.formatRam,Speed:ye.a.formatSpeed,"Disk size":ye.a.formatBytes,"Disk free":ye.a.formatBytes},ha=function(t,e,a,s){var n=s?s[t]:null;return n?"string"===typeof n?n:[Object(ft.jsx)("ul",{className:a.ul,children:n&&"object"===typeof n&&Object.keys(n).map((function(t){return Object(ft.jsx)("li",{children:n&&"object"===typeof n?Object(ft.jsxs)("span",{className:a.black,children:[Object(ft.jsxs)("span",{className:a.bold,children:[e(t),": "]}),pa[t]?pa[t](n[t],e):n[t]||"--"]}):Object(ft.jsx)(x.a,{})},t)}))}),Object(ft.jsxs)("div",{className:a.wrapperInfo,children:[Object(ft.jsx)("div",{className:a.marginRight,children:n&&"object"===typeof n&&Object.keys(n).map((function(t,s){return s<5&&Object(ft.jsx)("div",{className:a.wrapperBlockItem,children:n&&"object"===typeof n?Object(ft.jsxs)(ft.Fragment,{children:[Object(ft.jsxs)("span",{className:Object(p.default)(a.bold,a.nowrap),children:[e(t),": "]}),pa[t]?pa[t](n[t],e):n[t]||"--"]}):Object(ft.jsx)(x.a,{})},t)}))}),Object(ft.jsx)("div",{className:a.marginRight,children:n&&"object"===typeof n&&Object.keys(n).map((function(t,s){return s>4&&s<10&&Object(ft.jsx)("div",{className:a.wrapperBlockItem,children:n&&"object"===typeof n?Object(ft.jsxs)(ft.Fragment,{children:[Object(ft.jsxs)("span",{className:Object(p.default)(a.bold,a.nowrap),children:[e(t),": "]}),pa[t]?pa[t](n[t],e):n[t]||"--"]}):Object(ft.jsx)(x.a,{})},t)}))}),Object(ft.jsx)("div",{className:a.marginRight,children:n&&"object"===typeof n&&Object.keys(n).map((function(t,s){return s>10&&Object(ft.jsx)("div",{className:a.wrapperBlockItem,children:n&&"object"===typeof n?Object(ft.jsxs)(ft.Fragment,{children:[Object(ft.jsxs)("span",{className:Object(p.default)(a.bold,a.nowrap),children:[e(t),": "]}),pa[t]?pa[t](n[t],e):n[t]||"--"]}):Object(ft.jsx)(x.a,{})},t)}))})]})]:[Object(ft.jsx)(x.a,{})]},ua=function(t){return"debug"===t?Object(ft.jsx)(T.a,{}):"info"===t?Object(ft.jsx)(A.a,{}):"warn"===t?Object(ft.jsx)(H.a,{}):"error"===t?Object(ft.jsx)(R.a,{}):null};e.default=Object(h.a)()(Object(u.a)((function(t){return{grow:{flexGrow:1},cards:{display:"flex",flexFlow:"wrap",justifyContent:"center"},tabHeaderWrapper:{height:30,display:"flex",margin:7},tabHeaderFirstItem:{width:312,paddingLeft:30,fontSize:14,fontWeight:600,alignSelf:"center"},tabHeaderItem:{flex:1,fontSize:14,fontWeight:600,alignSelf:"center"},tabHeaderItemButton:{width:144,fontSize:14,fontWeight:600,alignSelf:"center"},widthButtons:{width:240},tabFlex:{display:"flex",flex:1,padding:"0 10px"},bold:{fontWeight:"bold"},wrapperInfo:{display:"flex",flexFlow:"wrap",width:"100%"},marginRight:{marginRight:"auto"},wrapperBlockItem:{display:"flex",flexFlow:"nowrap",whiteSpace:"nowrap",margin:10},ul:{paddingTop:0,paddingBottom:0,paddingLeft:16,paddingRight:8},nowrap:{display:"flex",flexFlow:"nowrap",flex:1,whiteSpace:"nowrap",marginRight:5},"@media screen and (max-width: 1100px)":{hidden1100:{display:"none !important"}},"@media screen and (max-width: 800px)":{hidden800:{display:"none !important"}},"@media screen and (max-width: 600px)":{hidden600:{display:"none !important"}}}}))((function(t){var e=t.classes,a=(t.disabled,t.socket),s=t.currentHost,l=t.expertMode,h=t.executeCommand,u=t.systemConfig,x=(t.navigate,t.themeName),O=t.lang,y=t.hostsWorker,k=t.showAdaptersWarning,N=Object(i.a)(t,la),I=function(t,e){return void 0===e||da["".concat(t," ").concat(e)]?da[t]||(da[t]=N.t(t)):da["".concat(t," ").concat(e)]=N.t(t,e),void 0!==e?da["".concat(t," ").concat(e)]:da[t]},T=Object(c.useState)([]),_=Object(o.a)(T,2),A=_[0],L=_[1],H=Object(c.useState)({}),B=Object(o.a)(H,2),R=B[0],M=B[1],J=Object(c.useState)({}),z=Object(o.a)(J,2),E=z[0],U=z[1],V=Object(c.useState)({}),X=Object(o.a)(V,2),K=X[0],q=X[1],Q=Object(c.useState)(!1),G=Object(o.a)(Q,2),Z=G[0],Y=G[1],$=Object(F.a)(!1,"Hosts.viewMode"),tt=Object(o.a)($,2),et=tt[0],at=tt[1],st=Object(F.a)("","Hosts.filterText"),nt=Object(o.a)(st,2),rt=nt[0],ot=nt[1],it=Object(c.useState)(!1),ct=Object(o.a)(it,2),lt=ct[0],dt=ct[1],pt=Object(c.useState)(ia.a.getReadTimeoutMs()),ht=Object(o.a)(pt,2),ut=ht[0],bt=ht[1],jt=function(t,e){var s=t.map((function(t){return e[t._id]?a.getHostInfo(t._id,null,ut).catch((function(t){return console.error("Cannot get getHostInfo:"+t),t.toString().includes("timeout")&&dt(!0),t})).then((function(e){return{id:t._id,data:e}})):{id:t._id,data:"offline"}}));return new Promise((function(t){return Promise.all(s).then((function(e){var a={};e.forEach((function(t){return a[t.id]=t.data})),t(a)}))}))},mt=function(t,e){L((function(a){var s=JSON.parse(JSON.stringify(a));if(Array.isArray(t))t.forEach((function(t){var e=a.find((function(e){return e._id===t.id}));if(e){var n=a.indexOf(e);t.obj?s[n]=t.obj:s.splice(n,1)}else s.push(t.obj)}));else{var n=a.find((function(e){return e._id===t}));if(n){var r=a.indexOf(n);e?s[r]=e:s.splice(r,1)}else s.push(e)}return rt&&s.length<=2&&ot(""),s}))},gt=function(){return a.getHosts(!0,!1,ut).then((function(t){return a.getRepository(s,{update:!1},!1,ut).then(function(){var e=Object(r.a)(n.a.mark((function e(s){var r,o,i,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=JSON.parse(JSON.stringify(R)),o=0;case 2:if(!(o<t.length)){e.next=10;break}return e.next=5,a.getState("".concat(t[o]._id,".alive"));case 5:i=e.sent,r[t[o]._id]=!!i&&!!i.val;case 7:o++,e.next=2;break;case 10:return M(r),U(s),L(t),rt&&t.length<=2&&ot(""),e.next=16,jt(t,r);case 16:c=e.sent,q(c);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){window.alert("Cannot getRepository: "+t),t.toString().includes("timeout")&&dt(!0)}))}))};Object(c.useEffect)((function(){return gt().then((function(){return y.registerHandler(mt)})),function(){return y.unregisterHandler(mt)}}),[Z]);var xt=Object(c.useMemo)((function(){return A.map((function(t,n){var r,o,i=t._id,c=t.common,d=c.name,p=c.icon,b=c.color,j=c.title,m=c.installedVersion,f=t.native.os.platform;return{renderCard:et?Object(ft.jsx)(wt,{systemConfig:u,setEditDialog:function(){return St({index:n,dialogName:d})},setBaseSettingsDialog:function(){return It({index:n,dialogName:d})},hostsWorker:y,expertMode:l,socket:a,name:d,getLogLevelIcon:ua,alive:R[i],color:b,image:p,title:j,os:f,openHostUpdateDialog:function(){return Mt(d)},description:ha(i,I,e,K)[0],available:(null===(r=E["js-controller"])||void 0===r?void 0:r.version)||"-",executeCommandRemove:function(){return h("host remove ".concat(d))},dialogUpgrade:function(){return ve(a,i)},currentHost:s===i,installed:m,events:"- / -",t:I,_id:i,showAdaptersWarning:k},i):null,renderRow:et?null:Object(ft.jsx)(Pt,{systemConfig:u,setEditDialog:function(){return St({index:n,dialogName:d})},setBaseSettingsDialog:function(){return It({index:n,dialogName:d})},hostsWorker:y,expertMode:l,socket:a,name:d,alive:R[i],color:b,image:p,title:j,os:f,getLogLevelIcon:ua,openHostUpdateDialog:function(){return Mt(d)},executeCommandRemove:function(){return h("host remove ".concat(d))},dialogUpgrade:function(){return ve(a,i)},currentHost:s===i,description:ha(i,I,e,K)[1],available:(null===(o=E["js-controller"])||void 0===o?void 0:o.version)||"-",installed:m,events:"- / -",t:I,_id:i,showAdaptersWarning:k},i),name:d}}))}),[A,R,E,K,e,l,et]),Ot=Object(c.useState)({index:0,dialogName:""}),vt=Object(o.a)(Ot,2),yt=vt[0],St=vt[1],kt=Object(c.useState)({index:0,dialogName:""}),Ct=Object(o.a)(kt,2),Nt=Ct[0],It=Ct[1],Tt=Object(c.useCallback)((function(){var t=xt.filter((function(t){return!rt||t.name.toLowerCase().includes(rt.toLowerCase())})).map((function(t){return et?t.renderCard:t.renderRow}));return t.length?t:I("All items are filtered out")}),[xt,I,rt,et]),_t=Object(c.useState)(!1),At=Object(o.a)(_t,2),Lt=At[0],Ht=At[1],Bt=Object(c.useState)(null),Rt=Object(o.a)(Bt,2),Dt=Rt[0],Wt=Rt[1],Ft=function(t){Ht(!1),Wt(null),t&&t()},Mt=function(t,e){Ht(!0),Wt(t),e&&e()},Jt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=E["js-controller"],s=A.find((function(t){return t.common.name===Dt})).common.installedVersion,n=[];return s&&a&&a.news&&Object.keys(a.news).forEach((function(t){try{(d.a.gt(t,s)||e)&&n.push({version:t,news:a.news[t][O]||a.news[t].en})}catch(r){console.warn('Cannot compare "'.concat(t,'" and "').concat(s,'"'))}})),n};return A.length?Object(ft.jsxs)(D.a,{children:[yt.dialogName?Object(ft.jsx)(te,{obj:A[yt.index],socket:a,dialogName:yt.dialogName,t:I,expertMode:l,onClose:function(t){St({index:0,dialogName:""}),t&&a.setObject(t._id,t).then((function(t){return Y((function(t){return!t}))})).catch((function(t){return alert("Cannot write object: "+t)}))}}):null,Nt.dialogName?Object(ft.jsx)(oa,{currentHost:Nt.dialogName,hosts:A,themeName:x,currentHostName:Nt.dialogName,onClose:function(){return It({index:0,dialogName:""})},lang:O,socket:a,t:I},"base"):null,lt?Object(ft.jsx)(ia.a,{readTimeoutMs:ut,t:I,onClose:function(){var t=Object(r.a)(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(dt(!1),!e){t.next=5;break}return bt(e),t.next=5,gt();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}):null,Lt?Object(ft.jsx)(ca.a,{open:Lt,adapter:Dt,adapterObject:E["js-controller"],t:N.t,textUpdate:I("Show instructions"),rightDependencies:!0,news:Jt(),onUpdate:function(){return Ft((function(){return ve(a,Dt)}))},onClose:function(){return Ft()}}):null,Object(ft.jsxs)(P.a,{children:[Object(ft.jsx)(j.a,{title:I("Show / hide List"),children:Object(ft.jsx)(b.a,{onClick:function(){return at(!et)},children:et?Object(ft.jsx)(C.a,{}):Object(ft.jsx)(S.a,{})})}),Object(ft.jsx)(j.a,{title:I("Reload"),children:Object(ft.jsx)(b.a,{onClick:function(){return Y((function(t){return!t}))},children:Object(ft.jsx)(v.a,{})})}),Object(ft.jsx)("div",{className:e.grow}),A.length>2?Object(ft.jsx)(f.a,{label:I("Filter"),style:{margin:"5px 0"},value:rt,onChange:function(t){return ot(t.target.value)},InputProps:{endAdornment:rt?Object(ft.jsx)(g.a,{position:"end",children:Object(ft.jsx)(b.a,{size:"small",onClick:function(){return ot("")},children:Object(ft.jsx)(w.a,{})})}):null}}):null,Object(ft.jsx)("div",{className:e.grow})]}),Object(ft.jsx)(W.a,{overflow:"auto",children:Object(ft.jsxs)("div",{className:et?e.cards:"",children:[!et&&Object(ft.jsxs)("div",{className:e.tabHeaderWrapper,children:[Object(ft.jsx)("div",{className:e.tabHeaderFirstItem,children:I("Name:")}),Object(ft.jsxs)("div",{className:e.tabFlex,children:[Object(ft.jsx)("div",{className:Object(p.default)(e.tabHeaderItem,e.hidden800),children:"CPU"}),Object(ft.jsx)("div",{className:Object(p.default)(e.tabHeaderItem,e.hidden800),children:"RAM"}),Object(ft.jsx)("div",{className:Object(p.default)(e.tabHeaderItem,e.hidden800),children:I("Uptime")}),Object(ft.jsx)("div",{className:Object(p.default)(e.tabHeaderItem,e.hidden1100),children:I("Available")}),Object(ft.jsx)("div",{className:Object(p.default)(e.tabHeaderItem,e.hidden1100),children:I("Installed")}),Object(ft.jsx)("div",{className:Object(p.default)(e.tabHeaderItem,e.hidden600),children:I("Events")}),Object(ft.jsx)("div",{className:Object(p.default)(e.tabHeaderItemButton,l&&e.widthButtons)})]})]}),Tt()]})})]}):Object(ft.jsx)(m.a,{})})))}}]);
//# sourceMappingURL=11.5d187238.chunk.js.map