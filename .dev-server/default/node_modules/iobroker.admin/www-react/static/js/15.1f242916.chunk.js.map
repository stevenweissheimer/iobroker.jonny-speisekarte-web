{"version":3,"sources":["components/JsonConfigComponent/ConfigTabs.js","components/JsonConfigComponent/index.js","components/Object/ObjectCustomEditor.js","components/Object/ObjectHistoryData.js","components/Object/ObjectChart.js","dialogs/ObjectCustomDialog.js","components/Object/ObjectBrowserValue.js","components/Object/ObjectBrowserEditObject.js","components/Object/ObjectBrowserEditRole.js","dialogs/ObjectAddNewObject.js","dialogs/ObjectEditOfAccessControl.js","tabs/Objects.js"],"names":["ConfigTabs","props","tab","window","localStorage","getItem","dialogName","adapterName","Object","keys","schema","items","includes","state","this","className","classes","tabs","Tabs","value","onChange","e","setItem","setState","map","name","disabled","execute","Tab","wrapped","label","getText","ConfigPanel","isParentTab","onCommandRunning","commandRunning","panel","socket","instance","common","customs","alive","themeType","themeName","data","originalData","systemConfig","onError","multiEdit","forceUpdate","registerOnForceUpdate","customObj","instanceObj","custom","ConfigGeneric","propTypes","PropTypes","object","isRequired","string","style","func","number","bool","dateFormat","isFloatComma","withStyles","theme","height","width","display","I18n","extendTranslations","words","lang","translations","console","warn","forEach","word","error","JsonConfigComponent","onAlive","id","val","cb","onValueChange","_data","attr","startsWith","changed","JSON","stringify","errors","parse","length","Array","isArray","a","forceUpdateHandlers","updateData","buildDependencies","readData","Promise","resolve","getObject","then","obj","native","readSettings","getCompactSystemConfig","getState","subscribeState","_list","flatten","attrs","confirm","alsoDependsOn","dep","confirmDependsOn","depObj","cancel","push","replace","onChangeDependsOn","hidden","hiddenDependsOn","labelDependsOn","help","helpDependsOn","item","type","root","renderItem","LinearProgress","i18n","getLanguage","path","fileExists","exists","fileName","readFile","json","Component","ObjectCustomEditor","onSave","objectIDs","confirmed","showConfirmation","saveOneState","changedItems","newValues","commonConfig","getCommonConfig","hasChanges","reportChangedIds","changedIds","setTimeout","expanded","loaded","progress","maxOids","scrollDone","lastExpanded","scrollDivRef","createRef","jsonConfigs","controls","refTemplate","customsInstances","objects","loadAllPromises","loadAllCustoms","registerSaveFunc","promises","adapter","undefined","getCustomTemplate","all","instanceObjs","ad","Utils","fixAdminUI","adminUI","alert","loadI18n","catch","processed","_attr","defaultFunc","result","_executeCustom","Function","f","default","defaultValues","enabled","split","flattenItems","filter","ids","commons","inst","_default","getDefaultValues","sort","find","ignoreUnderscore","assign","i","icon","isIndeterminate","combineNewAndOld","Accordion","accordionOdd","accordionEven","ref","pos","indexOf","splice","AccordionSummary","expandIcon","accordionHeaderEnabledOdd","accordionHeaderOdd","accordionHeaderEnabledEven","accordionHeaderEven","src","headingIcon","alt","Typography","heading","t","clsx","titleEnabled","enabledVisible","enabledInvisible","AccordionDetails","enabledControl","FormControlLabel","formControl","control","Checkbox","indeterminate","checked","target","isChanged","customControls","parseInt","pop","log","en","title","text","onClose","oldObjects","_objects","_oldObjects","onProgress","Math","round","shift","ins","instances","setObject","ok","color","fontSize","index","Paper","paper","variant","scrollDiv","renderOneCustom","renderErrorMessage","renderConfirmationDialog","_result","AsyncFunction","getPrototypeOf","constructor","withWidth","maxHeight","maxWidth","overflow","marginRight","float","textTransform","fontWeight","paddingLeft","fullWidth","verticalAlign","backgroundColor","localeMap","enLocale","fr","frLocale","ru","ruLocale","de","deLocale","es","esLocale","br","brLocale","nl","nlLocale","it","itLocale","pt","ptLocale","pl","plLocale","cnLocale","padding3","ms","padding2","num","ObjectHistoryData","_id","values","ts","relativeRange","start","end","selected","lastSelected","lastSelectedColumn","min","max","historyInstance","updateOpened","insertOpened","historyInstances","defaultHistory","lcVisible","qVisible","ackVisible","fromVisible","supportedFeatures","edit","adminInstance","location","search","slice","supportedFeaturesPromises","unit","timeTimer","prepareData","readHistoryRange","setRelativeInterval","readHistory","readSupportedFeaturesTimeout","clearTimeout","sendTo","unsubscribeState","list","getHistoryInstances","config","readSupportedFeatures","instObj","getHistory","listObj","getForeignStates","alives","endsWith","loading","from","ack","q","addID","aggregate","chart","range","rangeValues","cVisible","Date","toISOString","c","substring","lc","noDataForPeriod","noData","now","oldest","getTime","step","column","shiftKey","pps","ppls","ctrlKey","toString","rows","r","TableRow","row","updatedRow","rowInterpolated","hover","TableCell","rowNoData","interpolated","rowSelected","onClick","onToggleSelect","toLocaleDateString","toLocaleTimeString","rowFocused","cellAckTrue","cellAckFalse","delay","getSeconds","getMilliseconds","setMilliseconds","setSeconds","mins","setHours","setMinutes","setFullYear","getFullYear","getDay","setDate","getDate","setMonth","shiftTime","dontSave","removeItem","TableContainer","container","Table","stickyHeader","size","table","TableHead","colTs","colValue","colAck","colFrom","colLastChange","TableBody","getTableRows","Dialog","open","areYouSure","DialogTitle","DialogContent","DialogContentText","suppressMessage","DialogActions","Button","onDelete","autoFocus","startIcon","tasks","parseFloat","date","time","getHours","getMinutes","getMonth","dialogForm","noValidate","autoComplete","updateEdit","TextField","utils","DateFnsUtils","locale","Grid","justify","editorDatePicker","margin","format","views","ampm","editorTimePicker","msInput","inputProps","isUpdate","onUpdate","onInsert","Toolbar","FormControl","selectHistoryControl","InputLabel","Select","MenuItem","notAliveInstance","selectRelativeTime","rangeRef","customRange","toolbarTimeGrid","toolbarDate","disableToolbar","setStartDate","toolbarTime","setEndDate","grow","IconButton","exportData","expertMode","element","document","getElementById","createElement","setAttribute","body","appendChild","lines","join","encodeURIComponent","getObjectName","language","click","removeChild","noLoadingProgress","renderToolbar","tableDiv","renderTable","renderConfirmDialog","renderEditDialog","mixins","toolbar","minHeight","spacing","tableLayout","minWidth","whiteSpace","userSelect","position","opacity","animation","marginLeft","palette","primary","main","background","secondary","pointerEvents","top","bottom","left","right","border","action","active","flexGrow","paddingTop","marginTop","paddingRight","borderRadius","echarts","TimelineComponent","ToolboxComponent","TitleComponent","TooltipComponent","GridComponent","LineChart","SVGRenderer","GRID_PADDING_LEFT","GRID_PADDING_RIGHT","ObjectChart","onResize","timerResize","componentDidUpdate","chartValues","updateChart","chartHeight","chartWidth","splitLine","maxYLen","echartsReact","readTimeout","divRef","bind","addEventListener","noToolbar","maxYLenTimeout","removeEventListener","showJumpToEchart","getAdapterInstances","echartsJump","options","states","minY","maxY","b","ceil","widthAxis","w","serie","xAxisIndex","showSymbol","hoverAnimation","convertData","lineStyle","areaStyle","yAxis","boundaryGap","show","splitNumber","axisLabel","formatter","showMaxLabel","showMinLabel","axisTick","alignWithLabel","interval","getObjectNameFromObj","padding","grid","tooltip","trigger","params","toLocaleString","axisPointer","xAxis","withSeconds","withTime","toolbox","feature","saveAsImage","series","withReadData","diff","getEchartsInstance","setOption","zr","getZr","_iobInstalled","on","mouseDown","lastX","offsetX","setNewRange","move","wheelDelta","moved","preventDefault","touches","originalEvent","pageX","lastWidth","abs","fingerWidth","amount","option","getOption","notMerge","lazyUpdate","opts","renderer","onEvents","rendered","installEventHandlers","current","offsetWidth","offsetHeight","args","protocol","host","Fab","echartsButton","openEcharts","EchartsIcon","buttonIcon","splitLineButton","splitLineButtonIcon","chartWithoutToolbar","chartWithToolbar","renderChart","ObjectCustomDialog","currentTab","chartAvailable","isChartAvailable","Router","getLocation","arg","confirmDialog","mobile","MobileDialog","isMobile","progressRunning","saveFunc","update","isYes","varType","scrollPaper","dialog","scroll","content","AppBar","event","newTab","doNavigate","tabPanel","renderCustomEditor","renderCharts","getButtonTitle","array","textAlign","AntSwitch","switchBase","grey","transform","white","borderColor","thumb","boxShadow","track","Switch","ObjectBrowserValue","propsValue","chartEnabled","expire","inputRef","React","chartFrom","el","setSelectionRange","jsonError","jsonNoError","mode","showPrintMargin","showGutter","highlightActiveLine","defaultValue","newValue","checkJsonError","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","editorProps","$blockScrolling","key","direction","xs","component","alignItems","defaultChecked","onKeyUp","keyCode","textInput","helperText","renderJsonEditor","renderStates","multiline","quality","Hidden","only","wrapperButton","input","ObjectBrowserEditObject","readError","checkFunction","alias","read","writeError","write","showCopyDialog","innerWidth","originalObj","isWrite","jsFunc","initialType","finalType","newState","prepareObject","tabsPadding","selectId","selectRead","selectWrite","imagePrefix","statesOnly","onOk","setAliasItem","nameKey","marginBlock","buttonAdd","Tooltip","close","roleArray","checkState","checkRole","commonTabWrapper","commonWrapper","textField","setCommonItem","buttonAddKey","flex","buttonRemoveKey","removeCommonItem","role","Autocomplete","getOptionSelected","_","renderInput","flexDrop","UploadImage","maxSize","removeIconFunc","base64","funcVisible","aliasIdEdit","InputProps","endAdornment","InputAdornment","button","funcEdit","startAdornment","funcIcon","stopPropagation","copy","oldId","newId","newObj","user","onNewObject","onKeyDown","onClone","withAlias","fullScreen","renderTabs","renderCopyDialog","divWithoutTitle","divWithoutTitleAndTab","renderAliasEdit","renderCommonEdit","renderSelectDialog","onCopy","fontStyle","funcDivEdit","funcEditName","flexFlow","cursor","transition","buttonRemoveWrapper","zIndex","ObjectBrowserEditRole","initRole","roleInput","freeSolo","roles","onInputChange","marginBottom","inputText","stateTypeArray","stateDefValues","boolean","TYPES","ObjectAddNewObject","onApply","names","channel","device","folder","types","parentType","useState","setName","setType","stateType","setStateType","buildId","unique","setUnique","FORBIDDEN_CHARS","onLocalApply","desc","def","CustomModal","titleButtonApply","applyDisabled","flexDirection","readWriteArray","Owner","valueNum","Group","Everyone","newValueAccessControl","mask","ObjectRights","setValue","differentValues","applyToChildren","setMask","useEffect","_checkDifferent","newSelected","borderLeft","borderBottom","justifyContent","idx","borderRight","ObjectEditOfAccessControl","extendObject","modalEmptyId","stateOwnerUser","setStateOwnerUser","stateOwnerGroup","setStateOwnerGroup","ownerUsers","setOwnerUsers","ownerGroups","setOwnerGroups","setApplyToChildren","setCheckState","childrenCount","setChildrenCount","valueObjectAccessControl","setValueObjectAccessControl","valueStateAccessControl","setValueStateAccessControl","differentOwner","setDifferentOwner","differentGroup","setDifferentGroup","differentState","setDifferentState","differentObject","setDifferentObject","maskState","setMaskState","maskObject","setMaskObject","setIds","setProgress","disabledButton","setDisabledButton","different","count","_differentState","_differentObject","idWithDot","_checkState","groups","users","_differentOwner","_differentGroup","_stateOwnerUser","_stateOwnerGroup","_valueObjectAccessControl","_valueStateAccessControl","_ids","k","acl","owner","ownerGroup","defaultNewAcl","isNaN","userItem","groupItem","overflowHidden","newAcl","_maskState","_maskObject","renderValue","getInvertedColor","overflowY","Objects","translate","arg1","arg2","wordCache","filters","toast","deleteObjectShow","withChildren","delObjects","delObject","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","message","Fragment","hasChildren","buttonText","buttonAll","ObjectBrowser","objectsWorker","prefix","defaultFilters","objectCustomDialog","objectBrowserValue","objectBrowserEditObject","objectBrowserEditRole","router","enableStateValueEdit","onObjectDelete","onFilterChanged","filterConfig","onSelect","objectEditBoolean","objectAddBoolean","objectStatesView","objectImportExport","objectEditOfAccessControl","modalNewObject","context","modalNewObj","selectedNonObject","modalEditOfAccessControl","objData","modalEditOfAccess","aclTooltip","modalEditOfAccessObjData","renderDeleteDialog","_export"],"mappings":"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","file":"static/js/15.1f242916.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport ConfigGeneric from './ConfigGeneric';\nimport ConfigPanel from './ConfigPanel';\n\nconst styles = theme => ({\n    tabs: {\n        height: '100%',\n        width: '100%',\n    },\n    panel: {\n        height: 'calc(100% - 48px)',\n        width: '100%',\n        display: 'block'\n    }\n});\n\nclass ConfigTabs extends ConfigGeneric {\n    constructor(props) {\n        super(props);\n\n        let tab = window.localStorage.getItem((this.props.dialogName || 'App') + '.' + this.props.adapterName) || Object.keys(this.props.schema.items)[0];\n        if (!Object.keys(this.props.schema.items).includes(tab)) {\n            tab = Object.keys(this.props.schema.items)[0];\n        }\n        this.state = {\n            tab,\n        };\n    }\n\n    render() {\n        const items = this.props.schema.items;\n\n        return <div className={this.props.classes.tabs}>\n            <Tabs value={this.state.tab} onChange={(e, tab) => {\n                window.localStorage.setItem((this.props.dialogName || 'App') + '.' + this.props.adapterName, tab);\n                this.setState({tab});\n            }}>\n                {Object.keys(items).map(name => {\n                    const disabled = this.execute(items[name].disabled, false);\n                    return <Tab wrapped disabled={disabled} key={name} value={name} label={this.getText(items[name].label)} />\n                })}\n            </Tabs>\n            {<ConfigPanel\n                key={this.state.tab}\n                isParentTab={true}\n                onCommandRunning={this.props.onCommandRunning}\n                commandRunning={this.props.commandRunning}\n                className={this.props.classes.panel}\n                socket={this.props.socket}\n                adapterName={this.props.adapterName}\n                instance={this.props.instance}\n                common={this.props.common}\n                customs={this.props.customs}\n                alive={this.props.alive}\n                themeType={this.props.themeType}\n                themeName={this.props.themeName}\n                data={this.props.data}\n                originalData={this.props.originalData}\n                systemConfig={this.props.systemConfig}\n                onError={this.props.onError}\n                onChange={this.props.onChange}\n                multiEdit={this.props.multiEdit}\n\n                forceUpdate={this.props.forceUpdate}\n                registerOnForceUpdate={this.props.registerOnForceUpdate}\n\n                customObj={this.props.customObj}\n                instanceObj={this.props.instanceObj}\n                custom={this.props.custom}\n\n                schema={items[this.state.tab]}\n            />}\n        </div>;\n    }\n}\n\nConfigTabs.propTypes = {\n    socket: PropTypes.object.isRequired,\n    themeType: PropTypes.string,\n    themeName: PropTypes.string,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    data: PropTypes.object.isRequired,\n    originalData: PropTypes.object,\n    schema: PropTypes.object,\n    onError: PropTypes.func,\n    onChange: PropTypes.func,\n    customs: PropTypes.object,\n    adapterName: PropTypes.string,\n    instance: PropTypes.number,\n    commandRunning: PropTypes.bool,\n    onCommandRunning: PropTypes.func,\n    dateFormat: PropTypes.string,\n    isFloatComma: PropTypes.bool,\n    multiEdit: PropTypes.bool,\n\n    customObj: PropTypes.object,\n    instanceObj: PropTypes.object,\n    custom: PropTypes.bool,\n\n    registerOnForceUpdate: PropTypes.func.isRequired,\n    forceUpdate: PropTypes.func.isRequired,\n    systemConfig: PropTypes.object,\n    alive: PropTypes.bool,\n    common: PropTypes.object,\n};\n\nexport default withStyles(styles)(ConfigTabs);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nimport I18n from '@iobroker/adapter-react/i18n';\n\nimport ConfigTabs from './ConfigTabs';\nimport ConfigPanel from './ConfigPanel';\n\nconst styles = theme => ({\n    root: {\n        width: '100%',\n        height: '100%'\n    }\n});\n\n// Todo: delete it after adapter-react 1.6.9\nI18n.extendTranslations = I18n.extendTranslations || ((words, lang) => {\n    try {\n        if (!lang) {\n            Object.keys(words).forEach(word => {\n                Object.keys(words[word]).forEach(lang => {\n                    if (!I18n.translations[lang]) {\n                        console.warn(`Used unknown language: ${lang}`);\n                    }\n                    if (!I18n.translations[lang][word]) {\n                        I18n.translations[lang][word] = words[word][lang];\n                    } else if (I18n.translations[lang][word] !== words[word][lang]) {\n                        console.warn(`Translation for word \"${word}\" in \"${lang}\" was ignored: existing = \"${I18n.translations[lang][word]}\", new = ${words[word][lang]}`);\n                    }\n                });\n            });\n        } else {\n            if (!I18n.translations[lang]) {\n                console.warn(`Used unknown language: ${lang}`);\n            }\n            I18n.translations[lang] = I18n.translations[lang] || {};\n            Object.keys(words)\n                .forEach(word => {\n                    if (!I18n.translations[lang][word]) {\n                        I18n.translations[lang][word] = words[word];\n                    } else if (I18n.translations[lang][word] !== words[word]) {\n                        console.warn(`Translation for word \"${word}\" in \"${lang}\" was ignored: existing = \"${I18n.translations[lang][word]}\", new = ${words[word]}`);\n                    }\n                });\n        }\n    } catch (e) {\n        console.error(`Cannot apply translations: ${e}`);\n    }\n});\n\nclass JsonConfigComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            originalData: JSON.stringify(this.props.data),\n            changed: false,\n            errors: {\n\n            },\n            updateData: this.props.updateData,\n            systemConfig: null,\n            alive: false,\n            commandRunning: false,\n        };\n\n        this.forceUpdateHandlers = {};\n\n        this.schema = JSON.parse(JSON.stringify(this.props.schema));\n        this.buildDependencies(this.schema);\n\n        this.readData();\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (JSON.stringify(props.updateData) !== JSON.stringify(state.updateData)) {\n            return {updateData: props.updateData, originalData: JSON.stringify(props.data)};\n        } else {\n            return null;\n        }\n    }\n\n    static loadI18n(socket, i18n, adapterName) {\n        if (i18n === true || (i18n && typeof i18n === 'string')) {\n            const lang = I18n.getLanguage();\n            const path = typeof i18n === 'string' ? i18n : 'i18n';\n            return socket.fileExists(adapterName + '.admin', `${path}/${lang}.json`)\n                .then(exists => {\n                    if (exists) {\n                        return `${path}/${lang}.json`;\n                    } else {\n                        return socket.fileExists(adapterName + '.admin', `${path}/${lang}/translations.json`)\n                            .then(exists =>\n                                exists ? `${path}/${lang}/translations.json` : '')\n                    }\n                })\n                .then(fileName => {\n                    if (fileName) {\n                        return socket.readFile(adapterName + '.admin', fileName)\n                            .then(json => {\n                                try {\n                                    json = JSON.parse(json);\n                                    // apply file to I18n\n                                    I18n.extendTranslations(json, lang);\n                                } catch (e) {\n                                    console.error(`Cannot parse language file \"${adapterName}.admin/${fileName}: ${e}`);\n                                }\n                            })\n                    } else {\n                        console.warn(`Cannot find i18n for ${adapterName} / ${fileName}`);\n                        return Promise.resolve();\n                    }\n                });\n        } else if (i18n && typeof i18n === 'object') {\n            I18n.extendTranslations(i18n);\n            return Promise.resolve();\n        } else {\n            return Promise.resolve();\n        }\n    }\n\n    onCommandRunning = commandRunning => this.setState( {commandRunning});\n\n    readSettings() {\n        if ((this.props.custom || this.props.common) && this.props.data) {\n            return Promise.resolve();\n        } else {\n            return this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`)\n                .then(obj => this.setState({common: obj.common, data: this.props.data || obj.native}));\n        }\n    }\n\n    readData() {\n        this.readSettings()\n            .then(() => this.props.socket.getCompactSystemConfig())\n            .then(systemConfig =>\n                this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`)\n                    .then(state => {\n                        if (this.props.custom) {\n                            this.setState({systemConfig: systemConfig.common, alive: !!(state && state.val)});\n                        } else {\n                            this.setState({systemConfig: systemConfig.common, alive: !!(state && state.val)}, () =>\n                                this.props.socket.subscribeState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`, this.onAlive));\n                        }\n                    }));\n    }\n\n    onAlive = (id, state) => {\n        if ((state?.val || false) !== this.state.alive) {\n            this.setState({alive: state?.val || false});\n        }\n    }\n\n    onChange = (data, value, cb) => {\n        if (this.props.onValueChange) {\n            this.props.onValueChange(data, value);\n            cb && cb();\n        } else {\n            const state = {data};\n\n            const _data = {};\n            // remove all attributes starting with \"_\"\n            Object.keys(data).forEach(attr => !attr.startsWith('_') && (_data[attr] = data[attr]));\n\n            state.changed = JSON.stringify(_data) !== this.state.originalData;\n\n            this.setState({state}, () => {\n                this.props.onChange(_data, state.changed);\n                cb && cb();\n            });\n        }\n    }\n\n    onError = (attr, error) => {\n        const errors = JSON.parse(JSON.stringify(this.state.errors));\n        if (error) {\n            errors[attr] = error;\n        } else {\n            delete errors[attr];\n        }\n\n        if (JSON.stringify(errors) !== JSON.parse(JSON.stringify(this.state.errors))) {\n            this.setState({errors}, () =>\n                this.props.onError(!!Object.keys(this.state.errors).length));\n        }\n    }\n\n    flatten(schema, _list) {\n        _list = _list || {};\n        if (schema.items) {\n            Object.keys(schema.items).forEach(attr => {\n                _list[attr] = schema.items[attr];\n                this.flatten(schema.items[attr], _list);\n            });\n        }\n\n        return _list;\n    }\n\n    buildDependencies(schema) {\n        const attrs = this.flatten(schema);\n        Object.keys(attrs).forEach(attr => {\n            if (attrs[attr].confirm?.alsoDependsOn) {\n                attrs[attr].confirm?.alsoDependsOn.forEach(dep => {\n                    if (!attrs[dep]) {\n                        console.error(`[JsonConfigComponent] Attribute ${dep} does not exist!`);\n                        if (dep.startsWith('data.')) {\n                            console.warn(`[JsonConfigComponent] please use \"${dep.replace(/^data\\./, '')}\" instead of \"${dep}\"`);\n                        }\n                    } else {\n                        attrs[dep].confirmDependsOn = attrs[dep].confirmDependsOn || [];\n\n                        const depObj = {...attrs[attr], attr};\n                        if (depObj.confirm) {\n                            depObj.confirm.cancel = 'Undo';\n                        }\n\n                        attrs[dep].confirmDependsOn.push(depObj);\n                    }\n                });\n            }\n\n            if (attrs[attr].onChange?.alsoDependsOn) {\n                attrs[attr].onChange?.alsoDependsOn.forEach(dep => {\n                    if (!attrs[dep]) {\n                        console.error(`[JsonConfigComponent] Attribute ${dep} does not exist!`);\n                        if (dep.startsWith('data.')) {\n                            console.warn(`[JsonConfigComponent] please use \"${dep.replace(/^data\\./, '')}\" instead of \"${dep}\"`);\n                        }\n                    } else {\n                        attrs[dep].onChangeDependsOn = attrs[dep].onChangeDependsOn || [];\n\n                        const depObj = {...attrs[attr], attr};\n\n                        attrs[dep].onChangeDependsOn.push(depObj);\n                    }\n                });\n            }\n\n            if (attrs[attr].hidden?.alsoDependsOn) {\n                attrs[attr].hidden?.alsoDependsOn.forEach(dep => {\n                    if (!attrs[dep]) {\n                        console.error(`[JsonConfigComponent] Attribute ${dep} does not exist!`);\n                        if (dep.startsWith('data.')) {\n                            console.warn(`[JsonConfigComponent] please use \"${dep.replace(/^data\\./, '')}\" instead of \"${dep}\"`);\n                        }\n                    } else {\n                        attrs[dep].hiddenDependsOn = attrs[dep].hiddenDependsOn || [];\n\n                        const depObj = {...attrs[attr], attr};\n\n                        attrs[dep].hiddenDependsOn.push(depObj);\n                    }\n                });\n            }\n\n            if (attrs[attr].label?.alsoDependsOn) {\n                attrs[attr].label?.alsoDependsOn.forEach(dep => {\n                    if (!attrs[dep]) {\n                        console.error(`[JsonConfigComponent] Attribute ${dep} does not exist!`);\n                        if (dep.startsWith('data.')) {\n                            console.warn(`[JsonConfigComponent] please use \"${dep.replace(/^data\\./, '')}\" instead of \"${dep}\"`);\n                        }\n                    } else {\n                        attrs[dep].labelDependsOn = attrs[dep].labelDependsOn || [];\n\n                        const depObj = {...attrs[attr], attr};\n\n                        attrs[dep].labelDependsOn.push(depObj);\n                    }\n                });\n            }\n\n            if (attrs[attr].help?.alsoDependsOn) {\n                attrs[attr].help?.alsoDependsOn.forEach(dep => {\n                    if (!attrs[dep]) {\n                        console.error(`[JsonConfigComponent] Attribute ${dep} does not exist!`);\n                        if (dep.startsWith('data.')) {\n                            console.warn(`[JsonConfigComponent] please use \"${dep.replace(/^data\\./, '')}\" instead of \"${dep}\"`);\n                        }\n                    } else {\n                        attrs[dep].helpDependsOn = attrs[dep].helpDependsOn || [];\n\n                        const depObj = {...attrs[attr], attr};\n\n                        attrs[dep].helpDependsOn.push(depObj);\n                    }\n                });\n            }\n        });\n    }\n\n    renderItem(item) {\n        if (item.type === 'tabs') {\n            return <ConfigTabs\n                onCommandRunning={this.onCommandRunning}\n                commandRunning={this.state.commandRunning}\n                socket={this.props.socket}\n                adapterName={this.props.adapterName}\n                instance={this.props.instance}\n                common={this.props.common}\n                alive={this.state.alive}\n                themeType={this.props.themeType}\n                themeName={this.props.themeName}\n                data={this.props.data}\n                originalData={JSON.parse(this.state.originalData)}\n                schema={item}\n                systemConfig={this.state.systemConfig}\n                customs={this.props.customs}\n                dateFormat={this.props.dateFormat}\n                isFloatComma={this.props.isFloatComma}\n                multiEdit={this.props.multiEdit}\n\n                custom={this.props.custom}\n                customObj={this.props.customObj}\n                instanceObj={this.props.instanceObj}\n\n                forceUpdate={this.forceUpdate}\n                registerOnForceUpdate={this.registerOnForceUpdate}\n\n                onChange={this.onChange}\n                onError={(attr, error) => this.onError(attr, error)}\n            />;\n        } else if (item.type === 'panel' || !item.type) {\n            return <ConfigPanel\n                isParentTab={true}\n                onCommandRunning={this.onCommandRunning}\n                commandRunning={this.state.commandRunning}\n                socket={this.props.socket}\n                adapterName={this.props.adapterName}\n                instance={this.props.instance}\n                common={this.props.common}\n                alive={this.state.alive}\n                themeType={this.props.themeType}\n                themeName={this.props.themeName}\n                data={this.props.data}\n                originalData={JSON.parse(this.state.originalData)}\n                schema={item}\n                systemConfig={this.state.systemConfig}\n                customs={this.props.customs}\n                dateFormat={this.props.dateFormat}\n                isFloatComma={this.props.isFloatComma}\n                multiEdit={this.props.multiEdit}\n\n                forceUpdate={this.forceUpdate}\n                registerOnForceUpdate={this.registerOnForceUpdate}\n\n                custom={this.props.custom}\n                customObj={this.props.customObj}\n                instanceObj={this.props.instanceObj}\n\n                onChange={this.onChange}\n                onError={(attr, error) => this.onError(attr, error)}\n            />\n        }\n    }\n\n    forceUpdate = (attr, data) => {\n        if (Array.isArray(attr)) {\n            attr.forEach(a =>\n                this.forceUpdateHandlers[a] && this.forceUpdateHandlers[a](data));\n        } else {\n            if (this.forceUpdateHandlers[attr]) {\n                this.forceUpdateHandlers[attr](data);\n            }\n        }\n    }\n\n    registerOnForceUpdate = (attr, cb) => {\n        if (cb) {\n            this.forceUpdateHandlers[attr] = cb;\n        } else if (this.forceUpdateHandlers[attr]) {\n            delete this.forceUpdateHandlers[attr];\n        }\n    }\n\n    render() {\n        if (!this.state.systemConfig) {\n            return <LinearProgress />;\n        }\n\n        return <div className={this.props.classes.root}>\n            {this.renderItem(this.schema)}\n        </div>;\n    }\n}\n\nJsonConfigComponent.propTypes = {\n    socket: PropTypes.object.isRequired,\n\n    adapterName: PropTypes.string,\n    instance: PropTypes.number,\n    common: PropTypes.object,\n    customs: PropTypes.object, // custom components\n\n    custom: PropTypes.bool, // is the customs settings must be shown\n    customObj: PropTypes.object,\n    multiEdit: PropTypes.bool, // set if user edits more than one object simultaneously\n    instanceObj: PropTypes.object,\n    dateFormat: PropTypes.string,\n    isFloatComma: PropTypes.bool,\n\n    themeType: PropTypes.string,\n    themeName: PropTypes.string,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    data: PropTypes.object.isRequired,\n    updateData: PropTypes.number,\n    schema: PropTypes.object,\n    onError: PropTypes.func,\n    onChange: PropTypes.func,\n    onValueChange: PropTypes.func,\n};\n\nexport default withStyles(styles)(JsonConfigComponent);","import React, { createRef, Component } from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport withWidth from '@material-ui/core/withWidth';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\n\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from  '@material-ui/core/Paper';\nimport FormControlLabel from  '@material-ui/core/FormControlLabel';\nimport Checkbox from  '@material-ui/core/Checkbox';\n\n// Icons\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport DialogError from '@iobroker/adapter-react/Dialogs/Error';\nimport ConfirmDialog from \"@iobroker/adapter-react/Dialogs/Confirm\";\n\nimport JsonConfigComponent from '../JsonConfigComponent';\nimport Utils from '../../Utils';\n\nconst styles = theme => ({\n    paper: {\n        height: '100%',\n        maxHeight: '100%',\n        maxWidth: '100%',\n        overflow: 'hidden',\n    },\n    headingIcon: {\n        marginRight: 5,\n        width: 32,\n        height: 32,\n    },\n    titleEnabled: {\n        float: 'right',\n        fontSize: 16,\n        color: '#7ff57f',\n        textTransform: 'uppercase',\n        fontWeight: 'bold',\n        paddingLeft: 20,\n    },\n    scrollDiv: {\n        width: '100%',\n        height: '100%',//`calc(100% - ${theme.mixins.toolbar.minHeight}px)`,\n        overflow: 'auto',\n    },\n    fullWidth: {\n        width: '100%',\n    },\n    enabledControl: {\n        width: 130,\n        display: 'inline-block',\n        verticalAlign: 'top',\n    },\n    customControls: {\n        width: 'calc(100% - 130px)',\n        maxWidth: 800,\n        display: 'inline-block',\n        verticalAlign: 'top',\n    },\n\n    accordionOdd: {\n        //backgroundColor: 'rgba(128, 128, 128, 0.2)'\n    },\n    accordionEven: {\n        backgroundColor: 'rgba(128, 128, 128, 0.1)'\n    },\n\n    accordionHeaderOdd: {\n        backgroundColor: 'rgba(128, 128, 128, 0.2)'\n    },\n    accordionHeaderEven: {\n        backgroundColor: 'rgba(128, 128, 128, 0.3)'\n    },\n\n    accordionHeaderEnabledOdd: {\n        backgroundColor: 'rgba(128, 255, 128, 0.2)'\n    },\n    accordionHeaderEnabledEven: {\n        backgroundColor: 'rgba(128, 255, 128, 0.2)'\n    },\n\n\n    enabledVisible: {\n        display: 'inline-block'\n    },\n    enabledInvisible: {\n        display: 'none'\n    }\n});\n\nconst URL_PREFIX = '.'; // or './' or 'http://localhost:8081' for debug\n\nclass ObjectCustomEditor extends Component {\n    static AsyncFunction = Object.getPrototypeOf(async function(){}).constructor;\n\n    constructor(props) {\n        super(props);\n\n        let expanded = window.localStorage.getItem('App.customsExpanded') || '[]';\n        try {\n            expanded = JSON.parse(expanded);\n        } catch (e) {\n            expanded = [];\n        }\n\n        this.changedIds = [];\n\n        this.state = {\n            loaded: false,\n            hasChanges: false,\n            expanded,\n            newValues: {},\n            progress: null,\n            maxOids: null,\n            confirmed: false,\n            showConfirmation: false\n        };\n\n        this.scrollDone   = false;\n        this.lastExpanded = window.localStorage.getItem('App.customsLastExpanded') || '';\n        this.scrollDivRef = createRef();\n\n        this.changedItems = [];\n        this.jsonConfigs  = {};\n\n        this.controls     = {};\n        this.refTemplate  = {};\n        this.props.customsInstances.map(id => this.refTemplate[id] = createRef());\n\n        this.customObj    = this.props.objectIDs.length > 1 ? {custom: {}, native: {}} : JSON.parse(JSON.stringify(this.props.objects[this.props.objectIDs[0]] || null));\n\n        if (this.customObj) {\n            this.loadAllPromises = this.loadAllCustoms()\n                .then(() => {\n                    this.commonConfig = this.getCommonConfig();\n                    this.setState({ loaded: true, newValues: {} });\n                });\n        }\n    }\n\n    componentDidMount() {\n        this.props.registerSaveFunc && this.props.registerSaveFunc(this.onSave);\n    }\n\n    componentWillUnmount() {\n        this.props.registerSaveFunc && this.props.registerSaveFunc(null);\n    }\n\n    loadAllCustoms() {\n        const promises = [];\n        this.props.customsInstances.forEach(id => {\n            const adapter = id.replace(/\\.\\d+$/, '').replace('system.adapter.', '');\n            if (this.jsonConfigs[adapter] === undefined) {\n                this.jsonConfigs[adapter] = false;\n                promises.push(this.getCustomTemplate(adapter));\n            }\n        });\n\n        return Promise.all(promises)\n            .then(() => {\n                this.props.customsInstances.forEach(id => {\n                    const adapter = id.replace(/\\.\\d+$/, '').replace('system.adapter.', '');\n                    if (this.jsonConfigs[adapter]) {\n                        this.jsonConfigs[adapter].instanceObjs = this.jsonConfigs[adapter].instanceObjs || {};\n                        this.jsonConfigs[adapter].instanceObjs[id] = {\n                            common: JSON.parse(JSON.stringify(this.props.objects['system.adapter.' + id]?.common)),\n                            native: JSON.parse(JSON.stringify(this.props.objects['system.adapter.' + id]?.native))\n                        }\n                    }\n                });\n            });\n    }\n\n    showError(error) {\n        this.setState({ error });\n    }\n\n    getCustomTemplate(adapter) {\n        const ad = this.props.objects['system.adapter.' + adapter] ? JSON.parse(JSON.stringify(this.props.objects['system.adapter.' + adapter])) : null;\n\n        if (!ad) {\n            console.error(`Cannot find adapter \"${ad}\"`);\n            return Promise.resolve(null);\n        } else {\n\n            Utils.fixAdminUI(ad);\n\n            if (ad.common?.adminUI.custom === 'json') {\n                return this.props.socket.readFile(adapter + '.admin', 'jsonCustom.json')\n                    .then(json => {\n                        try {\n                            json = JSON.parse(json);\n                            this.jsonConfigs[adapter] = this.jsonConfigs[adapter] || {};\n                            this.jsonConfigs[adapter].json = json;\n                        } catch (e) {\n                            console.error(`Cannot parse jsonConfig of ${adapter}: ${e}`);\n                            window.alert(`Cannot parse jsonConfig of ${adapter}: ${e}`);\n                        }\n\n                        return JsonConfigComponent.loadI18n(this.props.socket, json.i18n, adapter);\n                    })\n                    .catch(e => {\n                        console.error(`Cannot load jsonConfig of ${adapter}: ${e}`);\n                        window.alert(`Cannot load jsonConfig of ${adapter}: ${e}`);\n                    });\n            } else {\n                console.error(`Adapter ${adapter} is not yet supported by this version of admin`);\n                window.alert(`Adapter ${adapter} is not yet supported by this version of admin`);\n                return Promise.resolve(null);\n            }\n        }\n    }\n\n    // See configGeneric _executeCustom\n    _executeCustom(func, data, customObj, instanceObj, items, attr, processed) {\n        if (processed.includes(attr)) {\n            return undefined;\n        }\n        processed.push(attr);\n\n        let alsoDependsOn = [];\n        if (func && typeof func === 'object') {\n            alsoDependsOn = func.alsoDependsOn || [];\n            if (typeof alsoDependsOn === 'string') {\n                alsoDependsOn = [alsoDependsOn];\n            }\n            func = func.func;\n        }\n\n        alsoDependsOn.forEach(_attr => {\n            if (!items[_attr]) {\n                return console.error(`[JsonConfigComponent] attribute \"${_attr}\" does not exist!`);\n            } else\n            if (!items[_attr].defaultFunc) {\n                return console.error(`[JsonConfigComponent] attribute \"${_attr}\" is not required to be includes in \"alsoDependsOn\" while has static value!`);\n            } else {\n                const result = this._executeCustom(items[_attr].defaultFunc, data, customObj, instanceObj, items, _attr, processed);\n                if (result !== undefined) {\n                    data[_attr] = result;\n                }\n            }\n        });\n\n        if (!func) {\n            data[attr] = items[attr].default === undefined ? null: items[attr].default;\n        } else {\n            try {\n                // eslint-disable-next-line no-new-func\n                const f = new Function('data', 'originalData', '_system', 'instanceObj', 'customObj', '_socket', func.includes('return') ? func : 'return ' + func);\n                const result = f(data || this.props.data, this.props.originalData, this.props.systemConfig, instanceObj, customObj, this.props.socket);\n                data[attr] = result;\n            } catch (e) {\n                console.error(`Cannot execute ${func}: ${e}`);\n                data[attr] = !items[attr] || items[attr].default === undefined ? null: items[attr].default;\n            }\n        }\n    }\n\n    static flattenItems(items, _result) {\n        _result = _result || {};\n        items && Object.keys(items).forEach(attr => {\n            if (items[attr].items) {\n                ObjectCustomEditor.flattenItems(items[attr].items, _result);\n            } else {\n                _result[attr] = items[attr];\n            }\n        });\n\n        return _result;\n    }\n\n    getDefaultValues(instance, obj) {\n        const defaultValues = {enabled: false};\n        const adapter = instance.split('.')[0];\n\n        if (this.jsonConfigs[adapter] && !this.jsonConfigs[adapter].disabled) {\n            const items = ObjectCustomEditor.flattenItems(this.jsonConfigs[adapter].json.items);\n\n            if (items) {\n                const processed = [];\n                const attrs = Object.keys(items).filter(attr => items[attr]);\n                // first init simple defaults\n                attrs.forEach(attr => {\n                    if (!items[attr].defaultFunc && items[attr].default !== undefined) {\n                        defaultValues[attr] = items[attr].default;\n                    }\n                });\n                // now init default that must be calculated\n                attrs.forEach(async attr => {\n                    if (items[attr].defaultFunc) {\n                        this._executeCustom(items[attr].defaultFunc, defaultValues, obj, this.jsonConfigs[adapter].instanceObjs[instance], items, attr, processed);\n                    }\n                });\n            }\n        }\n\n        return defaultValues;\n    }\n\n    getCommonConfig () {\n        const ids     = this.props.objectIDs || [];\n        const objects = this.props.objects;\n\n        const commons = {};\n\n        // calculate common settings\n        this.props.customsInstances.forEach(inst => {\n            const adapter = inst.split('.')[0];\n            if (this.jsonConfigs[adapter] && this.jsonConfigs[adapter].disabled) {\n                return;\n            }\n            commons[inst] = {};\n            ids.forEach(id => {\n                const customObj = objects[id];\n                const custom = customObj?.common?.custom ? customObj.common.custom[inst] || null : null;\n\n                if (custom) {\n                    Object.keys(custom).forEach(_attr => {\n                        if (commons[inst][_attr] === undefined) {\n                            commons[inst][_attr] = custom[_attr];\n                        } else if (commons[inst][_attr] !== custom[_attr]) {\n                            // different\n                            if (!Array.isArray(commons[inst][_attr])) {\n                                commons[inst][_attr] = [commons[inst][_attr]];\n                            }\n\n                            !commons[inst][_attr].includes(custom[_attr]) && commons[inst][_attr].push(custom[_attr]);\n                        }\n                    });\n                } else {\n                    // const adapter = inst.split('.')[0];\n                    // Calculate defaults for this object\n                    let _default = this.getDefaultValues(inst, customObj);\n                    _default.enabled = false;\n\n                    Object.keys(_default).forEach(_attr => {\n                        if (commons[inst][_attr] === undefined) {\n                            commons[inst][_attr] = _default[_attr];\n                        } else if (commons[inst][_attr] !== _default[_attr]) {\n                            // different\n                            if (!Array.isArray(commons[inst][_attr])) {\n                                commons[inst][_attr] = [commons[inst][_attr]];\n                            }\n\n                            !commons[inst][_attr].includes(_default[_attr]) && commons[inst][_attr].push(_default[_attr]);\n                        }\n                    });\n                }\n            });\n\n            // sort all \"different\" arrays\n            Object.keys(commons[inst]).forEach(attr => {\n                if (Array.isArray(commons[inst][attr])) {\n                    commons[inst][attr].sort();\n                }\n            });\n        });\n\n        return commons;\n    }\n\n    isChanged(newValues) {\n        newValues = newValues || this.state.newValues;\n        return Object.keys(newValues)\n            .find(instance => newValues[instance] === null || (newValues[instance] && Object.keys(newValues[instance])\n                .find(attr => !attr.startsWith('_'))));\n    }\n\n    combineNewAndOld(instance, ignoreUnderscore) {\n        const data = Object.assign({}, this.commonConfig[instance] || {}, this.state.newValues[instance] || {});\n\n        if (ignoreUnderscore) {\n            Object.keys(data).forEach(attr => {\n                if (attr.startsWith('_')) {\n                    delete data[attr];\n                }\n            });\n        }\n\n        if (this.state.newValues[instance] === null) {\n            data.enabled = false;\n        }\n        return data;\n    }\n\n    renderOneCustom(instance, instanceObj, customObj, i) {\n        const adapter = instance.split('.')[0];\n\n        const icon = `${URL_PREFIX}/adapter/${adapter}/${this.props.objects['system.adapter.' + adapter].common.icon}`;\n        // could be: true, false, [true, false]\n        const enabled = this.state.newValues[instance] !== undefined && (!this.state.newValues[instance] || this.state.newValues[instance].enabled !== undefined) ? !!(this.state.newValues[instance] && this.state.newValues[instance].enabled) : (this.state.newValues[instance] === null ? false : this.commonConfig[instance].enabled);\n        const isIndeterminate = Array.isArray(enabled) && (!this.state.newValues[instance] || this.state.newValues[instance].enabled === undefined);\n\n        const disabled = this.jsonConfigs[adapter] && this.jsonConfigs[adapter].json?.disabled;\n\n        const data = this.combineNewAndOld(instance);\n\n        if (disabled && this.jsonConfigs[adapter].json.hidden === true) {\n            return null;\n        }\n\n        if (typeof this.jsonConfigs[adapter].json.hidden === 'string') {\n            // evaluate function\n            if (this._executeCustom(this.jsonConfigs[adapter].json.hidden, data, customObj, instanceObj, this.jsonConfigs[adapter].json.items, 'enabled', [])) {\n                return null;\n            }\n        }\n\n        return <Accordion\n            key={ instance }\n            id={ 'Accordion_' + instance }\n            className={i % 2 ? this.props.classes.accordionOdd : this.props.classes.accordionEven}\n            expanded={ this.state.expanded.includes(instance) }\n            ref={ this.refTemplate[instance] }\n            onChange={() => {\n                const expanded = [...this.state.expanded];\n                const pos = expanded.indexOf(instance);\n                if (pos === -1) {\n                    expanded.push(instance);\n                } else {\n                    expanded.splice(pos, 1);\n                }\n                window.localStorage.setItem('App.customsExpanded', JSON.stringify(expanded));\n                pos === -1 && window.localStorage.setItem('App.customsLastExpanded', instance);\n                this.setState({expanded});\n            }}\n        >\n            <AccordionSummary expandIcon={<ExpandMoreIcon />} data-id={ instance } className={i % 2 ? (enabled ? this.props.classes.accordionHeaderEnabledOdd : this.props.classes.accordionHeaderOdd) : (enabled ? this.props.classes.accordionHeaderEnabledEven : this.props.classes.accordionHeaderEven)}>\n                <img src={ icon } className={ this.props.classes.headingIcon } alt=\"\" />\n                <Typography className={ this.props.classes.heading }>{ this.props.t('Settings %s', instance)}</Typography>\n                <div className={ clsx(this.props.classes.titleEnabled, 'titleEnabled', enabled ? this.props.classes.enabledVisible : this.props.classes.enabledInvisible) }>{\n                    this.props.t('Enabled')\n                }</div>\n            </AccordionSummary>\n            <AccordionDetails >\n                <div className={this.props.classes.enabledControl}>\n                    <FormControlLabel\n                        className={ this.props.classes.formControl }\n                        control={<Checkbox\n                            indeterminate={ isIndeterminate }\n                            checked={ !!enabled }\n                            disabled={disabled}\n                            onChange={e => {\n                                const newValues = JSON.parse(JSON.stringify(this.state.newValues));\n\n                                newValues[instance] = newValues[instance] || {};\n                                if (isIndeterminate || e.target.checked) {\n                                    newValues[instance].enabled = true;\n                                } else {\n                                    if (enabled) {\n                                        newValues[instance] = null;\n                                    } else {\n                                        delete newValues[instance];\n                                    }\n                                }\n                                this.setState({newValues, hasChanges: this.isChanged(newValues)}, () =>\n                                    this.props.onChange && this.props.onChange(this.state.hasChanges));\n                            }}/>}\n                        label={this.props.t('Enabled')}\n                    />\n                </div>\n                <div className={this.props.classes.customControls}>\n                    {!disabled && (enabled || isIndeterminate) ?\n                        <JsonConfigComponent\n                            instanceObj={instanceObj}\n                            customObj={customObj}\n                            custom={true}\n                            className={ '' }\n                            adapterName={adapter}\n                            instance={parseInt(instance.split('.').pop(), 10) || 0}\n                            socket={this.props.socket}\n                            theme={this.props.theme}\n                            themeName={this.props.themeName}\n                            themeType={this.props.themeType}\n                            multiEdit={this.props.objectIDs.length > 1}\n\n                            schema={this.jsonConfigs[adapter].json}\n                            data={data}\n                            onError={error =>\n                                this.setState({error}, () => this.props.onError && this.props.onError(error))}\n                            onValueChange={(attr, value) => {\n                                console.log(attr + ' => ' + value);\n                                const newValues = JSON.parse(JSON.stringify(this.state.newValues));\n                                newValues[instance] = newValues[instance] || {};\n                                if (this.commonConfig[instance][attr] === value) {\n                                    delete newValues[instance][attr];\n                                    if (!Object.keys(newValues[instance]).length) {\n                                        delete newValues[instance];\n                                    }\n                                } else {\n                                    newValues[instance][attr] = value;\n                                }\n                                this.setState({newValues, hasChanges: this.isChanged(newValues)}, () =>\n                                    this.props.onChange && this.props.onChange(this.state.hasChanges));\n                            }}\n                        /> : null}\n\n                    {disabled && this.jsonConfigs[adapter].json.help ?\n                        (typeof this.jsonConfigs[adapter].json.help === 'object' ?\n                            this.jsonConfigs[adapter].json.help[this.props.lang] ||\n                            this.jsonConfigs[adapter].json.help.en\n                            :\n                            this.props.t(this.jsonConfigs[adapter].json.help)) : null}\n                </div>\n            </AccordionDetails>\n        </Accordion>;\n    }\n\n    isAllOk() {\n        let allOk = true;\n        /*Object.keys(this.refTemplate).forEach(id => {\n            const adapter = id.replace(/\\.\\d+$/, '');\n            // post init => add custom logic\n            if (window.customPostOnSave.hasOwnProperty(adapter) && typeof window.customPostOnSave[adapter] === 'function') {\n                // returns true if some problem detected\n                if (window.customPostOnSave[adapter](window.$(this), id)) {\n                    allOk = false;\n                }\n            }\n        });*/\n        return allOk;\n    }\n\n    renderErrorMessage() {\n        return !!this.state.error && <DialogError\n            title={this.props.t('Error')}\n            text={this.state.error}\n            onClose={() => this.setState({ error: '' })}\n        />;\n    }\n\n    getObject(objects, oldObjects, id) {\n        if (objects[id]) {\n            return Promise.resolve(objects[id]);\n        } else {\n            return this.props.socket.getObject(id)\n                .then(obj => {\n                    oldObjects[id] = JSON.parse(JSON.stringify(obj));\n                    objects[id] = obj;\n                    return obj;\n                });\n        }\n    }\n\n    saveOneState(ids, cb, _objects, _oldObjects) {\n        _objects    = _objects    || {};\n        _oldObjects = _oldObjects || {};\n\n        if (!ids || !ids.length) {\n            // save all objects\n            const keys = Object.keys(_objects);\n            if (!keys.length) {\n                this.setState({maxOids: null}, () =>\n                    this.props.onProgress(false));\n                cb && cb();\n            } else {\n                this.setState({progress: Math.round(((this.state.maxOids - keys.length) / this.state.maxOids) * 50) + 50});\n                const id = keys.shift();\n                if (JSON.stringify(_objects[id].common) !== JSON.stringify(_oldObjects[id].common)) {\n                    !this.changedIds.includes(id) && this.changedIds.push(id);\n\n                    return this.props.socket.setObject(id, _objects[id])\n                        .then(() => {\n                            delete _objects[id];\n                            delete _oldObjects[id];\n                            return this.props.socket.getObject(id)\n                                .then(obj => {\n                                    this.props.objects[id] = obj;\n                                    setTimeout(() =>\n                                        this.saveOneState(ids, cb, _objects, _oldObjects), 0);\n                                });\n                        });\n                } else {\n                    delete _objects[id];\n                    delete _oldObjects[id];\n                    return setTimeout(() =>\n                        this.saveOneState(ids, cb, _objects, _oldObjects), 0);\n                }\n            }\n        } else {\n            const maxOids = this.state.maxOids || ids.length;\n            if (this.state.maxOids === null) {\n                this.setState({maxOids: ids.length}, () =>\n                    this.props.onProgress(true));\n            }\n\n            // 0 - 50\n            this.setState({progress: Math.round(((maxOids - ids.length) / maxOids) * 50)});\n\n            const id = ids.shift();\n            this.getObject(_objects, _oldObjects, id)\n                .then(obj => {\n                    if (!obj) {\n                        return window.alert(`Invalid object ${id}`);\n                    }\n\n                    // remove all disabled commons\n                    if (obj.common && obj.common.custom) {\n                        Object.keys(obj.common.custom).forEach(ins => {\n                            if (!obj.common.custom[ins] || !obj.common.custom[ins].enabled) {\n                                obj.common.custom[ins] = null;\n                            }\n                        });\n                    }\n\n                    const instances = Object.keys(this.state.newValues);\n\n                    for (let i = 0; i < instances.length; i++) {\n                        const instance = instances[i];\n                        // const adapter = instance.split('.')[0];\n                        const newValues = this.combineNewAndOld(instance, true);\n\n                        if (newValues.enabled === false) {\n                            if (obj.common && obj.common.custom && obj.common.custom[instance]) {\n                                obj.common.custom[instance] = null; // here must be null and not deleted, so controller can remove it\n                            }\n                        } else if (newValues.enabled) {\n                            obj.common = obj.common || {};\n                            if (Array.isArray(newValues.enabled)) {\n                                if (!obj.common.custom || !obj.common.custom[instance] || !obj.common.custom[instance].enabled) {\n                                    // leave this object disabled\n                                    if (obj.common.custom && obj.common.custom[instance]) {\n                                        obj.common.custom[instance] = null;\n                                    }\n                                    continue; // instance disabled\n                                }\n                            }\n\n                            obj.common.custom = obj.common.custom || {};\n\n                            if (!obj.common.custom[instance] || !obj.common.custom[instance].enabled) {\n                                // provide defaults\n                                let _default = this.getDefaultValues(instance, obj);\n                                obj.common.custom[instance] = JSON.parse(JSON.stringify(_default || {}));\n                            }\n\n                            obj.common.custom[instance].enabled = true;\n\n                            Object.keys(newValues).forEach(attr => {\n                                // if not different\n                                if (!Array.isArray(newValues[attr])) {\n                                    obj.common.custom[instance][attr] = newValues[attr];\n                                }\n                            });\n                        }\n                    }\n\n                    setTimeout(() =>\n                        this.saveOneState(ids, cb, _objects, _oldObjects), 0);\n                });\n        }\n    }\n\n    renderConfirmationDialog() {\n        if (!this.state.showConfirmation) {\n            return false;\n        } else {\n            return <ConfirmDialog\n                text={this.props.t('The changes will be applied to %s states. Are you sure?', this.props.objectIDs.length)}\n                ok={this.props.t('Yes')}\n                onClose={result => {\n                    if (result) {\n                        this.setState({showConfirmation: false, confirmed: true}, () => {\n                            const cb = this.cb;\n                            this.cb = null;\n                            this.onSave(cb);\n                        });\n                    } else {\n                        this.cb = null;\n                        this.setState({showConfirmation: false});\n                    }\n                }}\n            />;\n        }\n    }\n\n    onSave = cb => {\n        if (this.props.objectIDs.length > 10 && !this.state.confirmed) {\n            this.cb = cb;\n            return this.setState({showConfirmation: true});\n        }\n\n        this.saveOneState([...this.props.objectIDs], () => {\n            this.changedItems = [];\n            this.newValues = {};\n            this.commonConfig = this.getCommonConfig();\n            this.setState({ confirmed: false, hasChanges: false, newValues: {}}, () => {\n                this.props.reportChangedIds(this.changedIds);\n                this.props.onChange(false, true);\n                cb && setTimeout(() => cb(), 100);\n            });\n        });\n    };\n\n    render() {\n        if (this.customObj === null) {\n            return <div style={{color: '#F55', fontSize: 32}}>{this.props.t('Object does not exist!')}</div>;\n        }\n        if (!this.state.loaded) {\n            return <LinearProgress />;\n        }\n        let index = 0;\n\n        return <Paper className={ this.props.classes.paper }>\n            {this.state.maxOids > 1 && <LinearProgress color=\"secondary\" variant=\"determinate\" value={this.state.progress} />}\n            <div className={ this.props.classes.scrollDiv } ref={ this.scrollDivRef }>\n                {this.state.maxOids === null && Object.keys(this.jsonConfigs).map(adapter => {\n                    if (this.jsonConfigs[adapter]) {\n                        return Object.keys(this.jsonConfigs[adapter].instanceObjs)\n                            .map(instance =>\n                                this.renderOneCustom(instance, this.jsonConfigs[adapter].instanceObjs[instance], this.customObj, index++));\n                    } else {\n                        return null;\n                    }\n                })}\n            </div>\n            { this.renderErrorMessage() }\n            { this.renderConfirmationDialog() }\n        </Paper>;\n    }\n}\n\nObjectCustomEditor.propTypes = {\n    t: PropTypes.func,\n    onChange: PropTypes.func, // function onChange(haveChanges)\n    lang: PropTypes.string,\n    expertMode: PropTypes.bool,\n    objects: PropTypes.object,\n    customsInstances: PropTypes.array,\n    socket: PropTypes.object,\n    objectIDs: PropTypes.array,\n    theme: PropTypes.object,\n    themeName: PropTypes.string,\n    themeType: PropTypes.string,\n    registerSaveFunc: PropTypes.func,\n    onProgress: PropTypes.func,\n    onError: PropTypes.func,\n};\n\nexport default withWidth()(withStyles(styles)(ObjectCustomEditor));\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport withWidth from '@material-ui/core/withWidth';\nimport {withStyles} from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport {\n    MuiPickersUtilsProvider,\n    KeyboardTimePicker,\n    KeyboardDatePicker,\n} from '@material-ui/pickers';\nimport Paper from '@material-ui/core/Paper';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Grid from '@material-ui/core/Grid';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport TextField from '@material-ui/core/TextField';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableContainer from '@material-ui/core/TableContainer';\n\nimport DateFnsUtils from '@date-io/date-fns';\nimport frLocale from 'date-fns/locale/fr';\nimport ruLocale from 'date-fns/locale/ru';\nimport enLocale from 'date-fns/locale/en-US';\nimport esLocale from 'date-fns/locale/es';\nimport plLocale from 'date-fns/locale/pl';\nimport ptLocale from 'date-fns/locale/pt';\nimport itLocale from 'date-fns/locale/it';\nimport cnLocale from 'date-fns/locale/zh-CN';\nimport brLocale from 'date-fns/locale/pt-BR';\nimport deLocale from 'date-fns/locale/de';\nimport nlLocale from 'date-fns/locale/nl';\n\nimport Utils from '@iobroker/adapter-react/Components/Utils';\n\n// icons\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { FaPlusSquare as InsertIcon} from 'react-icons/fa';\nimport { FaDownload as ExportIcon} from 'react-icons/fa';\nimport IconDelete from '@material-ui/icons/Delete';\nimport IconClose from '@material-ui/icons/Close';\n\nconst localeMap = {\n    en: enLocale,\n    fr: frLocale,\n    ru: ruLocale,\n    de: deLocale,\n    es: esLocale,\n    br: brLocale,\n    nl: nlLocale,\n    it: itLocale,\n    pt: ptLocale,\n    pl: plLocale,\n    'zh-cn': cnLocale,\n};\n\nfunction padding3(ms) {\n    if (ms < 10) {\n        return '00' + ms;\n    } else if (ms < 100) {\n        return '0' + ms;\n    } else {\n        return ms;\n    }\n}\n\nfunction padding2(num) {\n    if (num < 10) {\n        return '0' + num;\n    } else {\n        return num;\n    }\n}\n\nconst styles = theme => ({\n    paper: {\n        height: '100%',\n        maxHeight: '100%',\n        maxWidth: '100%',\n        overflow: 'hidden',\n    },\n    tableDiv: {\n        height: `calc(100% - ${theme.mixins.toolbar.minHeight + theme.spacing(1)}px)`,\n        overflow: 'hidden',\n        width: '100%',\n    },\n    container: {\n        height: '100%'\n    },\n    table: {\n        tableLayout: 'fixed',\n        minWidth: 960,\n        '& td:nth-of-type(5)': {\n            overflow: 'hidden',\n            whiteSpace: 'nowrap'\n        }\n    },\n    row: {\n        userSelect: 'none',\n        /*'&:nth-of-type(odd)': {\n            backgroundColor: theme.palette.background.default,\n        },*/\n        position: 'relative',\n        '&:hover': {\n            opacity: 0.7,\n        },\n        '& td': {\n            position: 'relative',\n        }\n    },\n    updatedRow: {\n        animation: 'updated 1s',\n    },\n    rowInterpolated: {\n        opacity: 0.5\n    },\n    selectHistoryControl: {\n        width: 130,\n    },\n    selectRelativeTime: {\n        marginLeft: 10,\n        width: 200,\n    },\n    notAliveInstance: {\n        opacity: 0.5,\n    },\n    customRange: {\n        color: theme.palette.primary.main\n    },\n    rowSelected: {\n        background: theme.palette.secondary.main,\n    },\n    rowFocused: {\n        position: 'absolute',\n        pointerEvents: 'none',\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n        margin: 3,\n        border: '1px dotted ' + theme.palette.action.active,\n    },\n    grow: {\n        flexGrow: 1,\n    },\n    editorTimePicker: {\n        marginLeft: theme.spacing(1),\n        width: 120,\n    },\n    editorDatePicker: {\n        marginLeft: theme.spacing(1),\n        width: 150,\n    },\n    msInput: {\n        width: 50,\n        paddingTop: 16,\n        marginLeft: 5,\n        '& label': {\n            marginTop: 15\n        }\n    },\n    cellAckTrue: {\n        color: '#66ff7f',\n    },\n    cellAckFalse: {\n        color: '#FF6666',\n    },\n    toolbarTime: {\n        width: 100,\n        marginTop: 9,\n        marginLeft: theme.spacing(1),\n    },\n    toolbarDate: {\n        width: 160,\n        marginTop: 9,\n    },\n    toolbarTimeGrid: {\n        marginLeft: theme.spacing(1),\n        paddingLeft: theme.spacing(1),\n        paddingRight: theme.spacing(1),\n        border: '1px dotted #AAAAAA',\n        borderRadius: theme.spacing(1),\n    },\n    noLoadingProgress: {\n        width: '100%',\n        height: 4,\n    },\n\n    colValue: {\n\n    },\n    colAck: {\n        width: 50,\n    },\n    colFrom: {\n        width: 150,\n    },\n    colLastChange: {\n        width: 200,\n    },\n    colTs: {\n        width: 200,\n    },\n});\n\nclass ObjectHistoryData extends Component {\n    constructor(props) {\n        super(props);\n\n        let relativeRange      = window.localStorage.getItem('App.relativeRange') || 'absolute';\n        let start              = parseInt(window.localStorage.getItem('App.absoluteStart'), 10) || 0;\n        let end                = parseInt(window.localStorage.getItem('App.absoluteEnd'), 10)   || 0;\n        let selected           = window.localStorage.getItem('App.historySelected') || '';\n        let lastSelected       = parseInt(window.localStorage.getItem('App.historyLastSelected'), 10) || null;\n        let lastSelectedColumn = window.localStorage.getItem('App.historyLastSelectedColumn') || null;\n\n        if ((!start || !end) && (!relativeRange || relativeRange === 'absolute')) {\n            relativeRange = '30';\n        }\n\n        if (start && end) {\n            relativeRange = 'absolute';\n        }\n\n        try {\n            selected = JSON.parse(selected);\n        } catch (e) {\n            selected = [];\n        }\n\n        this.state = {\n            loaded: false,\n            min: null,\n            max: null,\n            start,\n            end,\n            values: null,\n            relativeRange,\n            selected,\n            lastSelected,\n            lastSelectedColumn,\n            historyInstance: '',\n            updateOpened: false,\n            insertOpened: false,\n            historyInstances: null,\n            defaultHistory: '',\n            lcVisible: true,\n            qVisible: true,\n            ackVisible: true,\n            fromVisible: true,\n            supportedFeatures: [],\n            dateFormat: 'dd.MM.yyyy',\n            edit: {}\n        };\n        this.adminInstance = parseInt(window.location.search.slice(1), 10) || 0;\n\n        this.supportedFeaturesPromises = {};\n\n        this.unit = this.props.obj.common && this.props.obj.common.unit ? ' ' + this.props.obj.common.unit : '';\n\n        this.timeTimer = null;\n\n        this.prepareData()\n            .then(() => this.readHistoryRange())\n            .then(() => {\n                if (relativeRange !== 'absolute') {\n                    this.setRelativeInterval(this.state.relativeRange, true);\n                } else {\n                    this.readHistory();\n                }\n            });\n    }\n\n    readSupportedFeatures(historyInstance) {\n        historyInstance = historyInstance || this.state.historyInstance;\n        if (!historyInstance) {\n            return Promise.resolve([]);\n        } else\n        if (this.supportedFeaturesPromises[historyInstance]) {\n            return this.supportedFeaturesPromises[historyInstance];\n        }\n\n        this.supportedFeaturesPromises[historyInstance] = new Promise(resolve => {\n            this.readSupportedFeaturesTimeout && clearTimeout(this.readSupportedFeaturesTimeout);\n            this.readSupportedFeaturesTimeout = setTimeout(() => {\n                this.readSupportedFeaturesTimeout = null;\n                resolve([]);\n            }, 2000);\n\n            this.props.socket.sendTo(historyInstance, 'features', null)\n                .then(result => {\n                    if (this.readSupportedFeaturesTimeout) {\n                        this.readSupportedFeaturesTimeout && clearTimeout(this.readSupportedFeaturesTimeout);\n                        this.readSupportedFeaturesTimeout = null;\n                        resolve(result ? result.supportedFeatures || [] : []);\n                    } else {\n                        this.setState({ supportedFeatures: result ? result.supportedFeatures || [] : [] });\n                    }\n                });\n        });\n        return this.supportedFeaturesPromises[historyInstance];\n    }\n\n    componentDidMount() {\n        this.props.socket.subscribeState(this.props.obj._id, this.onChange);\n    }\n\n    componentWillUnmount() {\n        this.timeTimer && clearTimeout(this.timeTimer);\n        this.timeTimer = null;\n\n        this.props.socket.unsubscribeState(this.props.obj._id, this.onChange);\n    }\n\n    onChange = (id, state) => {\n        if (id === this.props.obj._id &&\n            state &&\n            this.state.values &&\n            (!this.state.values.length || this.state.values[this.state.values.length - 1].ts < state.ts)) {\n            const values = [...this.state.values, state];\n            this.setState({ values });\n        }\n    }\n\n    prepareData() {\n        let list;\n        return this.getHistoryInstances()\n            .then(_list => {\n                list = _list;\n                // read default history\n                return this.props.socket.getCompactSystemConfig();\n            })\n            .then(config => {\n                const defaultHistory = config && config.common && config.common.defaultHistory;\n\n                // find current history\n                // first read from localstorage\n                let historyInstance = window.localStorage.getItem('App.historyInstance') || '';\n                if (!historyInstance || !list.find(it => it.id === historyInstance && it.alive)) {\n                    // try default history\n                    historyInstance = defaultHistory;\n                }\n                if (!historyInstance || !list.find(it => it.id === historyInstance && it.alive)) {\n                    // find first alive history\n                    historyInstance = list.find(it => it.alive);\n                    if (historyInstance) {\n                        historyInstance = historyInstance.id;\n                    }\n                }\n                // get first entry\n                if (!historyInstance && list.length) {\n                    historyInstance = defaultHistory;\n                }\n                return this.readSupportedFeatures(historyInstance)\n                    .then(supportedFeatures => new Promise(resolve => {\n                        // supportedFeatures = ['insert', 'update', 'delete'];\n\n                        this.setState({\n                            historyInstances: list,\n                            defaultHistory,\n                            historyInstance,\n                            supportedFeatures,\n                            dateFormat: (config.common.dateFormat || 'dd.MM.yyyy').replace(/D/g, 'd').replace(/Y/g, 'y')\n                        }, () => resolve());\n                    }));\n            });\n    }\n\n    getHistoryInstances() {\n        const list = [];\n        const ids = [];\n        this.props.customsInstances.forEach(instance => {\n            const instObj = this.props.objects['system.adapter.' + instance];\n            if (instObj && instObj.common && instObj.common.getHistory) {\n                let listObj = {id: instance, alive: false};\n                list.push(listObj);\n                ids.push(`system.adapter.${instance}.alive`);\n            }\n        });\n\n        if (ids.length) {\n            return this.props.socket.getForeignStates(ids)\n                .then(alives => {\n                    Object.keys(alives).forEach(id => {\n                        const item = list.find(it => id.endsWith(it.id + '.alive'));\n                        if (item) {\n                            item.alive = alives[id] && alives[id].val;\n                        }\n                    });\n                    return list;\n                });\n        } else {\n            return Promise.resolve(list);\n        }\n    }\n\n    readHistory(start, end) {\n        /*interface GetHistoryOptions {\n            instance?: string;\n            start?: number;\n            end?: number;\n            step?: number;\n            count?: number;\n            from?: boolean;\n            ack?: boolean;\n            q?: boolean;\n            addID?: boolean;\n            limit?: number;\n            ignoreNull?: boolean;\n            sessionId?: any;\n            aggregate?: 'minmax' | 'min' | 'max' | 'average' | 'total' | 'count' | 'none';\n        }*/\n        start = start || this.state.start;\n        end   = end   || this.state.end;\n\n        if (!this.state.historyInstance) {\n            return null;\n        }\n\n        this.setState({ loading: true });\n        return this.props.socket.getHistory(this.props.obj._id, {\n            instance:  this.state.historyInstance,\n            start,\n            end,\n            from:      true,\n            ack:       true,\n            q:         true,\n            addID:     false,\n            aggregate: 'none'\n        }).then(values => {\n            // merge range and chart\n            let chart       = [];\n            let range       = this.rangeValues;\n            let lcVisible   = false;\n            let qVisible    = false;\n            let ackVisible  = false;\n            let fromVisible = false;\n            let cVisible    = false;\n\n            // get the very first item\n            if (range && range.length && (!values || !values.length || range[0].ts < values[0].ts)) {\n                chart.push(range[0]);\n                chart.push({ts: range[0].ts + 1, e: true});\n                console.log(`add ${new Date(range[0].ts).toISOString()}: ${range[0].val}`);\n                if (!qVisible && range[0].q !== undefined) {\n                    qVisible = true;\n                }\n                if (!ackVisible && range[0].ack !== undefined) {\n                    ackVisible = true;\n                }\n                if (!fromVisible && range[0].from) {\n                    fromVisible = true;\n                }\n                if (!cVisible && range[0].c) {\n                    cVisible = true;\n                }\n            }\n\n            if (values && values.length) {\n                for (let t = 0; t < values.length; t++) {\n                    // if range and details are not equal\n                    if (values[t] && (!chart.length || chart[chart.length - 1].ts < values[t].ts)) {\n                        chart.push(values[t]);\n                        if (values[t].from) {\n                            if (values[t].from.startsWith('system.adapter.')) {\n                                values[t].from = values[t].from.substring(15);\n                            } else if (values[t].from.startsWith('system.host.')) {\n                                values[t].from = values[t].from.substring(7);\n                            }\n                        }\n                        if (!lcVisible && values[t].lc) {\n                            lcVisible = true;\n                        }\n                        if (!qVisible && values[t].q !== undefined) {\n                            qVisible = true;\n                        }\n                        if (!ackVisible && values[t].ack !== undefined) {\n                            ackVisible = true;\n                        }\n                        if (!fromVisible && values[t].from) {\n                            fromVisible = true;\n                        }\n                        if (!cVisible && values[t].c) {\n                            cVisible = true;\n                        }\n                        console.log(`add value ${new Date(values[t].ts).toISOString()}: ${values[t].val}`)\n                    } else if (chart[chart.length - 1].ts === values[t].ts && chart[chart.length - 1].val !== values[t].ts) {\n                        console.error('Strange data!');\n                    }\n                }\n            } else {\n                chart.push({noDataForPeriod: true});\n            }\n\n            if (!chart.length) {\n                chart.push({noData: true});\n            }\n\n            this.setState( {loading: false, values: chart, lcVisible, fromVisible, qVisible, ackVisible, cVisible});\n        });\n    }\n\n    readHistoryRange() {\n        const now = new Date();\n        const oldest = new Date(2000, 0, 1);\n\n        this.setState({ loading: true });\n        return this.props.socket.getHistory(this.props.obj._id, {\n            instance:  this.state.historyInstance,\n            start:     oldest.getTime(),\n            end:       now.getTime(),\n            step:      3600000 * 24 * 30, // monthly\n            from:      false,\n            ack:       false,\n            q:         false,\n            addID:     false,\n            aggregate: 'minmax'\n        })\n            .then(values => {\n                if (values.length) {\n                    // remove interpolated first value\n                    if (values[0].val === null || values[0].ts === oldest.getTime()) {\n                        values.shift();\n                    }\n                    // mark interpolated\n                    values.forEach(it => it.i = true);\n                    this.rangeValues = values;\n                    this.setState({ min: values[0].ts, max: values[values.length - 1].ts, loading: false, });\n                } else {\n                    this.rangeValues = [];\n                    this.setState({ loading: false, });\n                }\n            });\n    }\n\n    onToggleSelect(e, ts, column) {\n        let selected = [...this.state.selected];\n        const pos = selected.indexOf(ts);\n        if (e.shiftKey && this.state.lastSelected) {\n            let pps = -1;\n            let ppls = -1;\n            selected = [];\n            for (let i = 0; i < this.state.values.length; i++) {\n                if (this.state.values[i].ts === ts) {\n                    pps = i;\n                    ppls !== pps && selected.push(this.state.values[i].ts);\n                    if (pps !== -1 && ppls !== -1) {\n                        break;\n                    }\n                }\n                if (this.state.values[i].ts === this.state.lastSelected) {\n                    ppls = i;\n                    ppls !== pps && selected.push(this.state.values[i].ts);\n                    if (pps !== -1 && ppls !== -1) {\n                        break;\n                    }\n                }\n                if (pps !== -1 || ppls !== -1) {\n                    selected.push(this.state.values[i].ts);\n                }\n            }\n        } else\n        if (e.ctrlKey) {\n            if (pos !== -1) {\n                selected.splice(pos, 1);\n            } else {\n                selected.push(ts);\n            }\n            selected.sort();\n        } else {\n            selected = [ts];\n        }\n\n        window.localStorage.setItem('App.historyLastSelected', ts.toString());\n        window.localStorage.setItem('App.historyLastSelectedColumn', column);\n        window.localStorage.setItem('App.historySelected', JSON.stringify(selected));\n        this.setState({selected, lastSelected: ts, lastSelectedColumn: column});\n    }\n\n    getTableRows(classes) {\n        const rows = [];\n        for (let r = this.state.values.length - 1; r >= 0; r--) {\n            const state = this.state.values[r];\n            const ts = state.ts;\n            if (state.e) {\n                rows.push(<TableRow\n                    className={ clsx(classes.row, classes.updatedRow, classes.rowInterpolated) }\n                    key={ ts }\n                    hover\n                >\n                    <TableCell/>\n                    <TableCell>...</TableCell>\n                    {this.state.ackVisible ? <TableCell/> : null}\n                    {this.state.fromVisible ? <TableCell/> : null}\n                    { this.state.lcVisible  ? <TableCell/> : null }\n                </TableRow>);\n            } else\n            if (state.noData || state.noDataForPeriod) {\n                rows.push(<TableRow\n                    className={ clsx(classes.row, classes.updatedRow, classes.rowNoData) }\n                    key={ state.noData ? 'nodata' : ''}\n                    hover\n                >\n                    <TableCell/>\n                    <TableCell>{ state.noData ? this.props.t('No data in history') : this.props.t('No data in history for selected period')}</TableCell>\n                    {this.state.ackVisible  ? <TableCell/> : null}\n                    {this.state.fromVisible ? <TableCell/> : null}\n                    { this.state.lcVisible  ? <TableCell/> : null }\n                </TableRow>);\n            } else {\n                const interpolated = state.i;\n                const selected = this.state.lastSelected === ts;\n                let val = state.val;\n                if (this.props.isFloatComma && this.props.obj.common.type === 'number' && val) {\n                    val = val.toString().replace('.', ',');\n                }\n                if (val === null) {\n                    val = 'null'\n                }\n                if (val === undefined) {\n                    val = '_'\n                }\n\n                rows.push(<TableRow\n                    className={ clsx(\n                        classes.row, classes.updatedRow,\n                        interpolated && classes.rowInterpolated,\n                        this.state.selected.includes(ts) && classes.rowSelected) }\n                    key={ ts + (state.val || '') }\n                >\n                    <TableCell onClick={ e => !interpolated && this.onToggleSelect(e, ts, 'ts') }>\n                        { `${new Date(state.ts).toLocaleDateString()} ${new Date(state.ts).toLocaleTimeString()}.${padding3(state.ts % 1000)}` }\n                        { selected && this.state.lastSelectedColumn === 'ts' ? <div className={ classes.rowFocused } /> : ''}\n                    </TableCell>\n                    <TableCell onClick={ e => !interpolated && this.onToggleSelect(e, ts, 'val') }>\n                        { val + this.unit }\n                        { selected && this.state.lastSelectedColumn === 'val' ? <div className={ classes.rowFocused } /> : ''}\n                    </TableCell>\n                    { this.state.ackVisible ? <TableCell onClick={ e => !interpolated && this.onToggleSelect(e, ts, 'ack') } className={ state.ack ? classes.cellAckTrue : classes.cellAckFalse}>\n                        { state.ack ? 'true' : 'false' }\n                        { selected && this.state.lastSelectedColumn === 'ack' ? <div className={ classes.rowFocused } /> : ''}\n                    </TableCell> : null }\n                    { this.state.fromVisible ? <TableCell onClick={ e => !interpolated && this.onToggleSelect(e, ts, 'from') }>\n                        { state.from || '' }\n                        { selected && this.state.lastSelectedColumn === 'from' ? <div className={ classes.rowFocused } /> : ''}\n                    </TableCell> : null }\n                    { this.state.lcVisible ? <TableCell onClick={ e => !interpolated && this.onToggleSelect(e, ts, 'lc') }>\n                        { state.lc ? `${new Date(state.lc).toLocaleDateString()} ${new Date(state.lc).toLocaleTimeString()}.${padding3(state.ts % 1000)}` : '' }\n                        { selected && this.state.lastSelectedColumn === 'lc' ? <div className={ classes.rowFocused } /> : ''}\n                    </TableCell> : null }\n                </TableRow>);\n            }\n        }\n\n        return rows;\n    }\n\n    shiftTime() {\n        const now = new Date();\n        const delay = 60000 - now.getSeconds() - (1000 - now.getMilliseconds());\n\n        if (now.getMilliseconds()) {\n            now.setMilliseconds(1000);\n        }\n        if (now.getSeconds()) {\n            now.setSeconds(60);\n        }\n\n        const end = now.getTime();\n        let start;\n        let mins = this.state.relativeRange;\n\n        if (mins === 'day') {\n            now.setHours(0);\n            now.setMinutes(0);\n            start = now.getTime();\n        } else if (mins === 'week') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            // find week start\n            if (now.getDay()) { // if not sunday\n                now.setDate(now.getDate() - now.getDay() - 1);\n            } else {\n                now.setDate(now.getDate() - 6);\n            }\n\n        } else if (mins === '2weeks') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            // find week start\n            if (now.getDay()) { // if not sunday\n                now.setDate(now.getDate() - now.getDay() - 8);\n            } else {\n                now.setDate(now.getDate() - 13);\n            }\n        } else if (mins === 'month') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setDate(1);\n            start = now.getTime();\n        } else if (mins === 'year') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setDate(1);\n            now.setMonth(0);\n            start = now.getTime();\n        }  else if (mins === '12months') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            start = now.getTime();\n        } else {\n            mins = parseInt(mins, 10);\n            start = end - mins * 60000;\n        }\n\n        this.setState({ start, end }, () => this.readHistory());\n\n        this.timeTimer = setTimeout(() => {\n            this.timeTimer = null;\n            this.shiftTime();\n        }, delay || 60000);\n    }\n\n    setRelativeInterval(mins, dontSave) {\n        if (!dontSave) {\n            window.localStorage.setItem('App.relativeRange', mins);\n            this.setState({ relativeRange: mins });\n        }\n        if (mins === 'absolute') {\n            this.timeTimer && clearTimeout(this.timeTimer);\n            this.timeTimer = null;\n            return;\n        } else {\n            window.localStorage.removeItem('App.absoluteStart');\n            window.localStorage.removeItem('App.absolute');\n        }\n\n        const now = new Date();\n\n        if (!this.timeTimer) {\n            const delay = 60000 - now.getSeconds() - (1000 - now.getMilliseconds());\n            this.timeTimer = setTimeout(() => {\n                this.timeTimer = null;\n                this.shiftTime();\n            }, delay || 60000);\n        }\n\n        if (now.getMilliseconds()) {\n            now.setMilliseconds(1000);\n        }\n        if (now.getSeconds()) {\n            now.setSeconds(60);\n        }\n\n        const end = now.getTime();\n        let start;\n\n        if (mins === 'day') {\n            now.setHours(0);\n            now.setMinutes(0);\n            start = now.getTime();\n        } else if (mins === 'week') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            // find week start\n            if (now.getDay()) { // if not sunday\n                now.setDate(now.getDate() - now.getDay() - 1);\n            } else {\n                now.setDate(now.getDate() - 6);\n            }\n\n        } else if (mins === '2weeks') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            // find week start\n            if (now.getDay()) { // if not sunday\n                now.setDate(now.getDate() - now.getDay() - 8);\n            } else {\n                now.setDate(now.getDate() - 13);\n            }\n        } else if (mins === 'month') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setDate(1);\n            start = now.getTime();\n        } else if (mins === 'year') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setDate(1);\n            now.setMonth(0);\n            start = now.getTime();\n        }  else if (mins === '12months') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            start = now.getTime();\n        } else {\n            mins = parseInt(mins, 10);\n            start = end - mins * 60000;\n        }\n\n        this.setState({ start, end }, () =>\n            this.readHistory());\n    }\n\n    renderTable() {\n        if (this.state.values) {\n            const { classes } = this.props;\n\n            return <TableContainer className={ classes.container }>\n                <Table stickyHeader size=\"small\" className={ classes.table }>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell className={ classes.colTs }>\n                                { this.props.t('Timestamp') }\n                            </TableCell>\n                            <TableCell className={ classes.colValue }>\n                                { this.props.t('Value') }\n                            </TableCell>\n                            {this.state.ackVisible ? <TableCell className={ classes.colAck }>\n                                { this.props.t('Ack') }\n                            </TableCell> : null}\n                            {this.state.fromVisible ? <TableCell className={ classes.colFrom }>\n                                { this.props.t('From') }\n                            </TableCell> : null}\n\n                            {this.state.lcVisible ? <TableCell className={ classes.colLastChange }>\n                                { this.props.t('Last change') }\n                            </TableCell> : null}\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>{ this.getTableRows(classes) }</TableBody>\n                </Table>\n            </TableContainer>;\n        } else {\n            return <LinearProgress/>;\n        }\n    }\n\n    renderConfirmDialog() {\n        return <Dialog\n            open={ !!this.state.areYouSure }\n            onClose={ () => this.setState({ areYouSure: false }) }\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n        >\n\n            <DialogTitle id=\"alert-dialog-title\">{ }</DialogTitle>\n            <DialogContent>\n                <DialogContentText id=\"alert-dialog-description\">\n                    { this.props.t('Are you sure?') }\n                </DialogContentText>\n                <FormControlLabel\n                    control={<Checkbox value={ this.state.suppressMessage } onChange={() => this.setState({ suppressMessage: true }) }/>}\n                    label={ this.props.t('Suppress for 5 minutes') }\n                />\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant=\"contained\"\n                    onClick={ () => this.setState({ areYouSure: false, suppressMessage: this.state.suppressMessage && Date.now() }, () => this.onDelete())}\n                    color=\"primary\"\n                    autoFocus\n                    startIcon={<IconDelete />}\n                >{ this.props.t('Delete') }</Button>\n                <Button variant=\"contained\" onClick={ () => this.setState({ areYouSure: false }) } color=\"secondary\" startIcon={<IconClose />}>{ this.props.t('Cancel') }</Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    onDelete() {\n        const tasks = this.state.selected.map(ts => ({state: {ts}, id: this.props.obj._id}));\n        this.props.socket.sendTo(this.state.historyInstance, 'delete', tasks)\n            .then(() =>\n                this.readHistory());\n    }\n\n    onUpdate() {\n        let val = this.state.edit.val;\n\n        if (this.props.obj.common) {\n            if (this.props.obj.common.type === 'number') {\n                if (typeof val !== 'number') {\n                    val = parseFloat(val.replace(',', '.'));\n                }\n            } else if (this.props.obj.common.type === 'boolean') {\n                val = val === 'true' || val === 'TRUE' || val === true || val === '1' || val === 1;\n            }\n        }\n\n        const state = {\n            val,\n            ack:  this.state.edit.ack,\n            ts:   this.state.selected[0],\n            from: 'system.adapter.admin.' + this.adminInstance,\n            q:    this.state.edit.q,\n        };\n        Object.keys(state).forEach(attr => {\n            if (state[attr] === undefined) {\n                delete state[attr];\n            }\n        });\n        if (!this.state.lcVisible && state.lc) {\n            delete state.lc;\n        }\n        this.props.socket.sendTo(this.state.historyInstance, 'update', [{id: this.props.obj._id, state}])\n            .then(() =>\n                this.readHistory());\n    }\n\n    onInsert() {\n        let val = this.state.edit.val;\n\n        if (this.props.obj.common) {\n            if (this.props.obj.common.type === 'number') {\n                val = parseFloat(val.replace(',', '.'));\n            } else if (this.props.obj.common.type === 'boolean') {\n                val = val === 'true' || val === 'TRUE' || val === true || val === '1' || val === 1;\n            }\n        }\n\n        const ts = this.state.edit.date;\n        ts.setHours(this.state.edit.time.getHours());\n        ts.setMinutes(this.state.edit.time.getMinutes());\n        ts.setSeconds(this.state.edit.time.getSeconds());\n        ts.setMilliseconds(parseInt(this.state.edit.ms, 10));\n\n        const state = {\n            ts:   ts.getTime(),\n            val,\n            ack:  this.state.edit.ack,\n            from: 'system.adapter.admin.' + this.adminInstance,\n            q:    this.state.edit.q || 0,\n        };\n\n        if (!this.state.lcVisible && state.lc) {\n            delete state.lc;\n        }\n\n        Object.keys(state).forEach(attr => {\n            if (state[attr] === undefined) {\n                delete state[attr];\n            }\n        });\n        this.props.socket.sendTo(this.state.historyInstance, 'insert', [{id: this.props.obj._id, state}])\n            .then(() =>\n                this.readHistory());\n    }\n\n    formatTime(ms) {\n        const time = new Date(ms);\n        return `${padding2(time.getHours())}:${padding2(time.getMinutes())}:${padding2(time.getSeconds())}.${padding3(time.getMilliseconds())}`;\n    }\n\n    formatDate(ms) {\n        const time = new Date(ms);\n        return `${padding2(time.getDate())}.${padding2(time.getMonth() + 1)}.${time.getFullYear()}`;\n    }\n\n    updateEdit(name, value) {\n        const edit = JSON.parse(JSON.stringify(this.state.edit));\n        edit.time = new Date(edit.time);\n        edit.date = new Date(edit.date);\n        edit[name] = value;\n\n        this.setState({edit});\n    }\n\n    renderEditDialog() {\n        return <Dialog\n            open={ this.state.updateOpened || this.state.insertOpened }\n            onClose={ () => this.setState({ updateOpened: false, insertOpened: false }) }\n            aria-labelledby=\"edit-dialog-title\"\n            aria-describedby=\"edit-dialog-description\"\n        >\n            <DialogTitle id=\"edit-dialog-title\">{ this.state.updateOpened ? this.props.t('Update entry') : this.props.t('Insert entry') }</DialogTitle>\n            <DialogContent>\n                <form className={ this.props.classes.dialogForm } noValidate autoComplete=\"off\">\n                    {typeof this.state.edit.val === 'boolean' ?\n                        <FormControlLabel\n                            control={<Checkbox\n                                checked={this.state.edit.val}\n                                onChange={e => this.updateEdit('val', e.target.checked)}\n                            />}\n                            label={this.props.t('Value')}\n                        />\n                        :\n                        <TextField\n                            label={this.props.t('Value')}\n                            value={this.state.edit.val}\n                            onChange={e => this.updateEdit('val', e.target.value)}\n                        />\n                    }\n                    <br/>\n                    <FormControlLabel\n                        control={<Checkbox\n                            checked={ this.state.edit.ack }\n                            onChange={e => this.updateEdit('ack', e.target.checked)}/>}\n                        label={ this.props.t('Acknowledged') }\n                    />\n\n                    {this.state.insertOpened ?\n                        <MuiPickersUtilsProvider utils={DateFnsUtils} locale={localeMap[this.props.lang]}>\n                            <Grid container justify=\"space-around\">\n                                <KeyboardDatePicker\n                                    className={ this.props.classes.editorDatePicker}\n                                    margin=\"normal\"\n                                    label={this.props.t('Date')}\n                                    //format=\"fullDate\"\n                                    format={this.state.dateFormat}\n                                    value={ this.state.edit.date }\n                                    onChange={date =>\n                                        this.updateEdit('date', date)}\n                                />\n                                {/*<TextField\n                                    label=this.props.t('Date')\n                                    defaultValue={ this.edit.date }\n                                    InputLabelProps={{\n                                        shrink: true,\n                                    }}\n                                    onChange={e => this.edit.date = e.target.value}\n                                />*/}\n                                <KeyboardTimePicker\n                                    margin=\"normal\"\n                                    views={['hours', 'minutes', 'seconds']}\n                                    label={this.props.t('Time')}\n                                    ampm={false}\n                                    format=\"HH:mm:ss\"\n                                    className={ this.props.classes.editorTimePicker}\n                                    value={ this.state.edit.time }\n                                    onChange={time =>\n                                        this.updateEdit('time', time)}\n                                />\n                                {/*<TextField\n                                    className={ this.props.classes.editorTimePicker}\n                                    label={ this.props.t('Value') }\n                                    defaultValue={ this.edit.time }\n                                    onChange={e => this.edit.time = e.target.value}\n                                />*/}\n                                <TextField\n                                    classes={{root: this.props.classes.msInput}}\n                                    label={ this.props.t('ms') }\n                                    type=\"number\"\n                                    inputProps={{max: 999, min: 0}}\n                                    value={ this.state.edit.ms }\n                                    onChange={e => this.updateEdit('ms', e.target.value) }\n                                />\n                            </Grid>\n                        </MuiPickersUtilsProvider>\n                        : null }\n                </form>\n            </DialogContent>\n            <DialogActions>\n                <Button variant=\"contained\" onClick={ () => {\n                    const isUpdate = this.state.updateOpened;\n                    this.setState({ updateOpened: false, insertOpened: false }, () =>\n                        isUpdate ? this.onUpdate() : this.onInsert());\n                }}\n                color=\"primary\" autoFocus>{ this.state.updateOpened ? this.props.t('Update') : this.props.t('Add') }</Button>\n                <Button variant=\"contained\" onClick={ () => this.setState({ updateOpened: false, insertOpened: false }) }>{ this.props.t('Cancel') }</Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    setStartDate(start) {\n        start = start.getTime();\n        if (this.timeTimer) {\n            clearTimeout(this.timeTimer);\n            this.timeTimer = null;\n        }\n        window.localStorage.setItem('App.relativeRange', 'absolute');\n        window.localStorage.setItem('App.absoluteStart', start);\n        window.localStorage.setItem('App.absoluteEnd', this.state.end);\n        this.setState({ start, relativeRange: 'absolute' }, () => this.readHistory());\n    }\n\n    setEndDate(end) {\n        end = end.getTime();\n        window.localStorage.setItem('App.relativeRange', 'absolute');\n        window.localStorage.setItem('App.absoluteStart', this.state.start);\n        window.localStorage.setItem('App.absoluteEnd', end);\n        if (this.timeTimer) {\n            clearTimeout(this.timeTimer);\n            this.timeTimer = null;\n        }\n        this.setState({ end, relativeRange: 'absolute'  }, () => this.readHistory());\n    }\n\n    renderToolbar() {\n        const classes = this.props.classes;\n        return <Toolbar>\n            <FormControl className={ classes.selectHistoryControl }>\n                <InputLabel>{ this.props.t('History instance') }</InputLabel>\n                <Select\n                    value={ this.state.historyInstance}\n                    onChange={ e => {\n                        const historyInstance = e.target.value;\n                        window.localStorage.setItem('App.historyInstance', historyInstance);\n                        this.readSupportedFeatures(historyInstance)\n                            .then(supportedFeatures =>\n                                this.setState({ historyInstance, supportedFeatures }, () =>\n                                    this.readHistory()));\n                    }}\n                >\n                    { this.state.historyInstances.map(it => <MenuItem key={ it.id } value={ it.id } className={ clsx(!it.alive && classes.notAliveInstance )}>{ it.id }</MenuItem>) }\n                </Select>\n            </FormControl>\n            <FormControl className={ classes.selectRelativeTime }>\n                <InputLabel>{ this.props.t('Relative') }</InputLabel>\n                <Select\n                    ref={ this.rangeRef }\n                    value={ this.state.relativeRange }\n                    onChange={ e => this.setRelativeInterval(e.target.value) }\n                >\n                    <MenuItem key={ 'custom' } value={ 'absolute' } className={ classes.customRange }>{ this.props.t('custom range') }</MenuItem>\n                    <MenuItem key={ '1'  } value={ 10 }            >{ this.props.t('last 10 minutes') }</MenuItem>\n                    <MenuItem key={ '2'  } value={ 30 }            >{ this.props.t('last 30 minutes') }</MenuItem>\n                    <MenuItem key={ '3'  } value={ 60 }            >{ this.props.t('last hour') }</MenuItem>\n                    <MenuItem key={ '4'  } value={ 'day' }         >{ this.props.t('this day') }</MenuItem>\n                    <MenuItem key={ '5'  } value={ 24 * 60 }       >{ this.props.t('last 24 hours') }</MenuItem>\n                    <MenuItem key={ '6'  } value={ 'week' }        >{ this.props.t('this week') }</MenuItem>\n                    <MenuItem key={ '7'  } value={ 24 * 60 * 7 }   >{ this.props.t('last week') }</MenuItem>\n                    <MenuItem key={ '8'  } value={ '2weeks' }      >{ this.props.t('this 2 weeks') }</MenuItem>\n                    <MenuItem key={ '9'  } value={ 24 * 60 * 14 }  >{ this.props.t('last 2 weeks') }</MenuItem>\n                    <MenuItem key={ '10' } value={ 'month' }       >{ this.props.t('this month') }</MenuItem>\n                    <MenuItem key={ '11' } value={ 30 * 24 * 60 }  >{ this.props.t('last 30 days') }</MenuItem>\n                    <MenuItem key={ '12' } value={ 'year' }        >{ this.props.t('this year') }</MenuItem>\n                    <MenuItem key={ '13' } value={ '12months' }    >{ this.props.t('last 12 months') }</MenuItem>\n                </Select>\n            </FormControl>\n\n            <MuiPickersUtilsProvider utils={DateFnsUtils} locale={localeMap[this.props.lang]}>\n                <div className={ classes.toolbarTimeGrid }>\n                    <KeyboardDatePicker\n                        className={ classes.toolbarDate }\n                        disabled={ this.state.relativeRange !== 'absolute' }\n                        disableToolbar\n                        variant=\"inline\"\n                        margin=\"normal\"\n                        format={this.state.dateFormat}\n                        //format=\"fullDate\"\n                        label={ this.props.t('Start date') }\n                        value={ new Date(this.state.start) }\n                        onChange={date => this.setStartDate(date)}\n                    />\n                    <KeyboardTimePicker\n                        disabled={ this.state.relativeRange !== 'absolute' }\n                        className={ classes.toolbarTime }\n                        margin=\"normal\"\n                        //format=\"fullTime24h\"\n                        ampm={ false }\n                        label={ this.props.t('Start time') }\n                        value={ new Date(this.state.start) }\n                        onChange={date => this.setStartDate(date)}\n                    />\n                </div>\n                <div className={ classes.toolbarTimeGrid }>\n                    <KeyboardDatePicker\n                        disabled={ this.state.relativeRange !== 'absolute' }\n                        className={ classes.toolbarDate }\n                        disableToolbar\n                        format={this.state.dateFormat}\n                        variant=\"inline\"\n                        //format=\"fullDate\"\n                        margin=\"normal\"\n                        label={ this.props.t('End date') }\n                        value={ new Date(this.state.end) }\n                        onChange={date => this.setEndDate(date)}\n                    />\n                    <KeyboardTimePicker\n                        disabled={ this.state.relativeRange !== 'absolute' }\n                        className={ classes.toolbarTime }\n                        margin=\"normal\"\n                        //format=\"fullTime24h\"\n                        ampm={ false }\n                        label={ this.props.t('End time') }\n                        value={ new Date(this.state.end) }\n                        onChange={date => this.setEndDate(date)}\n                    />\n                </div>\n            </MuiPickersUtilsProvider>\n            <div className={classes.grow} />\n\n            { this.state.values && this.state.values.length ? <IconButton onClick={ () => this.exportData() } title={this.props.t('Save data as csv')}>\n                <ExportIcon />\n            </IconButton> : null }\n\n            { this.state.supportedFeatures.includes('insert') && this.props.expertMode ? <IconButton onClick={ () => {\n                const time = new Date();\n                //const date = `${time.getFullYear()}.${padding2(time.getMonth() + 1)}.${padding2(time.getDate())}`;\n                //const tm = `${padding2(time.getHours())}:${padding2(time.getMinutes())}:${padding2(time.getSeconds())}.${padding3(time.getMilliseconds())}`;\n\n                const edit = {\n                    ack:   this.state.values[this.state.values.length - 1].ack,\n                    val:   this.state.values[this.state.values.length - 1].val,\n                    ts:    time,\n                    date:  new Date(time),\n                    ms:    0,\n                    time:  new Date(time),\n                    q:     0\n                };\n\n                this.setState( {\n                    edit,\n                    insertOpened: true })\n            }}>\n                <InsertIcon />\n            </IconButton> : null }\n            { this.state.supportedFeatures.includes('update') && this.props.expertMode ? <IconButton disabled={ this.state.selected.length !== 1 }\n                onClick={ () => {\n                    const state = JSON.parse(JSON.stringify(this.state.values.find(it => it.ts === this.state.lastSelected)));\n                    const time = new Date(state.ts);\n                    state.date = new Date(time);//time.getFullYear() + '.' + padding2(time.getMonth() + 1) + '.' + padding2(time.getDate());\n                    state.time = new Date(time);//padding2(time.getHours()) + ':' + padding2(time.getMinutes()) + ':' + padding2(time.getSeconds()) + '.' + padding3(time.getMilliseconds());\n\n                    this.setState( {\n                        edit: state,\n                        updateOpened: true });\n                }}>\n                <EditIcon />\n            </IconButton> : null }\n            { this.state.supportedFeatures.includes('delete') && this.props.expertMode ? <IconButton disabled={ !this.state.selected.length } onClick={() => {\n                if (this.state.suppressMessage && Date.now() - this.state.suppressMessage < 300000) {\n                    this.onDelete();\n                } else {\n                    this.setState({ areYouSure: true });\n                }\n            }} >\n                <DeleteIcon />\n            </IconButton> : null }\n\n        </Toolbar>;\n    }\n\n    exportData() {\n        let element = window.document.getElementById('export-file');\n        if (!element) {\n            element = document.createElement('a');\n            element.setAttribute('id', 'export-file');\n            element.style.display = 'none';\n            document.body.appendChild(element);\n        }\n\n        let lines = ['timestamp;value;acknowledged;from;'];\n\n        this.state.values.forEach(state => !state.i && !state.e &&\n            lines.push([\n                new Date(state.ts).toISOString(),\n                state.val === null || state.val === undefined ? 'null' : state.val.toString(),\n                state.ack ? 'true' : 'false',\n                state.from || ''\n            ].join(';')));\n\n        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(lines.join('\\n')));\n        element.setAttribute('download', Utils.getObjectName({[this.props.obj._id]: this.props.obj}, this.props.obj._id, { language: this.props.lang }) + '.csv');\n\n        element.click();\n\n        document.body.removeChild(element);\n    }\n\n    render() {\n        if (!this.state.historyInstances) {\n            return <LinearProgress/>;\n        }\n\n        return <Paper className={ this.props.classes.paper }>\n            { this.state.loading ? <LinearProgress /> : <div className={ this.props.classes.noLoadingProgress} /> }\n            { this.renderToolbar() }\n            <div className={ this.props.classes.tableDiv }>\n                { this.renderTable() }\n            </div>\n            { this.renderConfirmDialog() }\n            { this.renderEditDialog() }\n        </Paper>;\n    }\n}\n\nObjectHistoryData.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    expertMode: PropTypes.bool,\n    socket: PropTypes.object,\n    obj: PropTypes.object,\n    customsInstances: PropTypes.array,\n    themeName: PropTypes.string,\n    objects: PropTypes.object,\n    isFloatComma: PropTypes.bool,\n};\n\nexport default withWidth()(withStyles(styles)(ObjectHistoryData));","import { createRef, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport withWidth from '@material-ui/core/withWidth';\nimport {withStyles} from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport {MuiPickersUtilsProvider, KeyboardTimePicker, KeyboardDatePicker} from '@material-ui/pickers';\nimport Paper from '@material-ui/core/Paper';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Fab from '@material-ui/core/Fab';\n\nimport ReactEchartsCore from 'echarts-for-react/lib/core';\n\nimport * as echarts from 'echarts/core';\nimport { LineChart } from 'echarts/charts';\nimport {\n    GridComponent,\n    ToolboxComponent,\n    TooltipComponent,\n    TitleComponent,\n    TimelineComponent,\n} from 'echarts/components';\nimport {SVGRenderer} from 'echarts/renderers';\n\nimport DateFnsUtils from '@date-io/date-fns';\nimport frLocale from 'date-fns/locale/fr';\nimport ruLocale from 'date-fns/locale/ru';\nimport enLocale from 'date-fns/locale/en-US';\nimport esLocale from 'date-fns/locale/es';\nimport plLocale from 'date-fns/locale/pl';\nimport ptLocale from 'date-fns/locale/pt';\nimport itLocale from 'date-fns/locale/it';\nimport cnLocale from 'date-fns/locale/zh-CN';\nimport brLocale from 'date-fns/locale/pt-BR';\nimport deLocale from 'date-fns/locale/de';\nimport nlLocale from 'date-fns/locale/nl';\n\nimport Utils from '@iobroker/adapter-react/Components/Utils';\n\n// icons\nimport {FaChartLine as SplitLineIcon} from 'react-icons/fa';\nimport EchartsIcon from '../../assets/echarts.png';\n\necharts.use([TimelineComponent, ToolboxComponent, TitleComponent, TooltipComponent, GridComponent, LineChart, SVGRenderer]);\n\nconst localeMap = {\n    en: enLocale,\n    fr: frLocale,\n    ru: ruLocale,\n    de: deLocale,\n    es: esLocale,\n    br: brLocale,\n    nl: nlLocale,\n    it: itLocale,\n    pt: ptLocale,\n    pl: plLocale,\n    'zh-cn': cnLocale,\n};\n\nfunction padding3(ms) {\n    if (ms < 10) {\n        return '00' + ms;\n    } else if (ms < 100) {\n        return '0' + ms;\n    } else {\n        return ms;\n    }\n}\n\nfunction padding2(num) {\n    if (num < 10) {\n        return '0' + num;\n    } else {\n        return num;\n    }\n}\n\nconst styles = theme => ({\n    paper: {\n        height: '100%',\n        maxHeight: '100%',\n        maxWidth: '100%',\n        overflow: 'hidden',\n        width: '100%'\n    },\n    chart: {\n        width: '100%',\n        overflow: 'hidden',\n    },\n    chartWithToolbar: {\n        height: `calc(100% - ${theme.mixins.toolbar.minHeight + theme.spacing(1)}px)`,\n    },\n    chartWithoutToolbar: {\n        height: `100%`,\n    },\n    selectHistoryControl: {\n        width: 130,\n    },\n    selectRelativeTime: {\n        marginLeft: 10,\n        width: 200,\n    },\n    notAliveInstance: {\n        opacity: 0.5,\n    },\n    customRange: {\n        color: theme.palette.primary.main\n    },\n    splitLineButtonIcon: {\n        marginRight: theme.spacing(1),\n    },\n    splitLineButton: {\n        float: 'right',\n    },\n    grow: {\n        flexGrow: 1,\n    },\n\n    toolbarTime: {\n        width: 100,\n        marginTop: 9,\n        marginLeft: theme.spacing(1),\n    },\n    toolbarDate: {\n        width: 160,\n        marginTop: 9,\n    },\n    toolbarTimeGrid: {\n        marginLeft: theme.spacing(1),\n        paddingLeft: theme.spacing(1),\n        paddingRight: theme.spacing(1),\n        border: '1px dotted #AAAAAA',\n        borderRadius: theme.spacing(1),\n    },\n    buttonIcon: {\n        width: 24,\n        height: 24\n    },\n    echartsButton: {\n        marginRight: theme.spacing(1),\n        height: 34,\n        width: 34,\n    }\n});\n\nconst GRID_PADDING_LEFT = 80;\nconst GRID_PADDING_RIGHT = 25;\n\nclass ObjectChart extends Component {\n    constructor(props) {\n        super(props);\n        let from;\n        if (!this.props.from) {\n            from = new Date(this.props.from);\n            from.setHours(from.getHours() - 24 * 7);\n            this.start = from.getTime();\n        } else {\n            this.start = this.props.from\n        }\n        if (!this.props.end) {\n            this.end = Date.now();\n        } else {\n            this.end = this.props.end;\n        }\n        let relativeRange = window.localStorage.getItem('App.relativeRange') || '30';\n        let min           = parseInt(window.localStorage.getItem('App.absoluteStart'), 10) || 0;\n        let max           = parseInt(window.localStorage.getItem('App.absoluteEnd'), 10)   || 0;\n\n        if ((!min || !max) && (!relativeRange || relativeRange === 'absolute')) {\n            relativeRange = '30';\n        }\n\n        if (max && min) {\n            relativeRange = 'absolute';\n        }\n\n        this.state = {\n            loaded: false,\n            historyInstance: this.props.historyInstance || '',\n            historyInstances: null,\n            defaultHistory: '',\n            chartHeight: 300,\n            chartWidth: 500,\n            relativeRange,\n            splitLine: window.localStorage.getItem('App.splitLine') === 'true',\n            dateFormat: 'dd.MM.yyyy',\n            min,\n            max,\n            maxYLen: 0,\n        };\n\n        this.echartsReact = createRef();\n        this.rangeRef     = createRef();\n        this.readTimeout  = null;\n        this.chartValues  = null;\n        this.rangeValues  = null;\n\n        this.unit         = this.props.obj.common && this.props.obj.common.unit ? ' ' + this.props.obj.common.unit : '';\n\n        this.divRef       = createRef();\n\n        this.chart        = {};\n\n        this.onChange = this.onChange.bind(this);\n        this.onResize = this.onResize.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.socket.subscribeState(this.props.obj._id, this.onChange);\n        window.addEventListener('resize', this.onResize);\n        this.prepareData()\n            .then(() => !this.props.noToolbar && this.readHistoryRange())\n            .then(() => this.setRelativeInterval(this.state.relativeRange, true, () =>\n                this.forceUpdate()));\n    }\n\n    componentWillUnmount() {\n        this.readTimeout && clearTimeout(this.readTimeout);\n        this.readTimeout = null;\n\n        this.timeTimer && clearTimeout(this.timeTimer);\n        this.timeTimer = null;\n\n        this.maxYLenTimeout && clearTimeout(this.maxYLenTimeout);\n        this.maxYLenTimeout = null;\n\n        this.props.socket.unsubscribeState(this.props.obj._id, this.onChange);\n        window.removeEventListener('resize', this.onResize);\n    }\n\n    onResize = () => {\n        this.timerResize && clearTimeout(this.timerResize);\n        this.timerResize = setTimeout(() => {\n            this.timerResize = null;\n            this.componentDidUpdate();\n        });\n    }\n\n    onChange = (id, state) => {\n        if (id === this.props.obj._id &&\n            state &&\n            this.rangeValues &&\n            (!this.rangeValues.length || this.rangeValues[this.rangeValues.length - 1].ts < state.ts)) {\n\n            this.chartValues && this.chartValues.push({val: state.val, ts: state.ts});\n            this.rangeValues.push({val: state.val, ts: state.ts});\n\n            // update only if end is near to now\n            if (state.ts >= this.chart.min && state.ts <= this.chart.max + 300000) {\n                this.updateChart();\n            }\n        }\n    }\n\n    prepareData() {\n        let list;\n\n        if (this.props.noToolbar) {\n            return new Promise(resolve =>\n                this.setState( {\n                    dateFormat: this.props.dateFormat.replace(/D/g, 'd').replace(/Y/g, 'y'),\n                    defaultHistory: this.props.defaultHistory,\n                    historyInstance: this.props.defaultHistory,\n                }, () => resolve()));\n        } else {\n            return this.getHistoryInstances()\n                .then(_list => {\n                    list = _list;\n                    // read default history\n                    return this.props.socket.getCompactSystemConfig();\n                })\n                .then(config => {\n                    return !this.props.showJumpToEchart ? Promise.resolve([]) : this.props.socket.getAdapterInstances('echarts')\n                        .then(instances => {\n                            // collect all echarts instances\n                            const echartsJump = !!instances.find(item => item._id.startsWith('system.adapter.echarts.'));\n\n                            const defaultHistory = config && config.common && config.common.defaultHistory;\n\n                            // find current history\n                            // first read from localstorage\n                            let historyInstance = window.localStorage.getItem('App.historyInstance') || '';\n                            if (!historyInstance || !list.find(it => it.id === historyInstance && it.alive)) {\n                                // try default history\n                                historyInstance = defaultHistory;\n                            }\n                            if (!historyInstance || !list.find(it => it.id === historyInstance && it.alive)) {\n                                // find first alive history\n                                historyInstance = list.find(it => it.alive);\n                                if (historyInstance) {\n                                    historyInstance = historyInstance.id;\n                                }\n                            }\n                            // get first entry\n                            if (!historyInstance && list.length) {\n                                historyInstance = defaultHistory;\n                            }\n\n                            this.setState( {\n                                dateFormat: (config.common.dateFormat || 'dd.MM.yyyy').replace(/D/g, 'd').replace(/Y/g, 'y'),\n                                historyInstances: list,\n                                defaultHistory,\n                                historyInstance,\n                                echartsJump,\n                            });\n                        });\n                });\n\n        }\n    }\n\n    getHistoryInstances() {\n        const list = [];\n        const ids  = [];\n\n        if (this.props.historyInstance) {\n            return Promise.resolve(list);\n        }\n\n        this.props.customsInstances.forEach(instance => {\n            const instObj = this.props.objects['system.adapter.' + instance];\n            if (instObj && instObj.common && instObj.common.getHistory) {\n                let listObj = {id: instance, alive: false};\n                list.push(listObj);\n                ids.push(`system.adapter.${instance}.alive`);\n            }\n        });\n\n        if (ids.length) {\n            return this.props.socket.getForeignStates(ids)\n                .then(alives => {\n                    Object.keys(alives).forEach(id => {\n                        const item = list.find(it => id.endsWith(it.id + '.alive'));\n                        if (item) {\n                            item.alive = alives[id] && alives[id].val;\n                        }\n                    });\n                    return list;\n                });\n        } else {\n            return Promise.resolve(list);\n        }\n    }\n\n    readHistoryRange() {\n        const now = new Date();\n        const oldest = new Date(2000, 0, 1);\n\n        return this.props.socket.getHistory(this.props.obj._id, {\n            instance:  this.state.historyInstance,\n            start:     oldest.getTime(),\n            end:       now.getTime(),\n            step:      3600000, // hourly\n            from:      false,\n            ack:       false,\n            q:         false,\n            addID:     false,\n            aggregate: 'minmax'\n        })\n            .then(values => {\n                // remove interpolated first value\n                if (values && values[0]?.val === null) {\n                    values.shift();\n                }\n                this.rangeValues = values;\n            });\n    }\n\n    readHistory(start, end) {\n        /*interface GetHistoryOptions {\n            instance?: string;\n            start?: number;\n            end?: number;\n            step?: number;\n            count?: number;\n            from?: boolean;\n            ack?: boolean;\n            q?: boolean;\n            addID?: boolean;\n            limit?: number;\n            ignoreNull?: boolean;\n            sessionId?: any;\n            aggregate?: 'minmax' | 'min' | 'max' | 'average' | 'total' | 'count' | 'none';\n        }*/\n        const options = {\n            instance:  this.state.historyInstance,\n            start,\n            end,\n            from:      false,\n            ack:       false,\n            q:         false,\n            addID:     false,\n            aggregate: 'none'\n        };\n\n        if (end - start > 60000 * 24 &&\n            !(this.props.obj.common.type === 'boolean' || (this.props.obj.common.type === 'number' && this.props.obj.common.states))) {\n            options.aggregate = 'minmax';\n            //options.step = 60000;\n        }\n\n        return this.props.socket.getHistory(this.props.obj._id, options)\n            .then(values => {\n                // merge range and chart\n                let chart = [];\n                let r     = 0;\n                let range = this.rangeValues;\n                let minY  = null;\n                let maxY  = null;\n\n                for (let t = 0; t < values.length; t++) {\n                    if (range) {\n                        while (r < range.length && range[r].ts < values[t].ts) {\n                            chart.push(range[r]);\n                            //console.log(`add ${new Date(range[r].ts).toISOString()}: ${range[r].val}`);\n                            r++;\n                        }\n                    }\n                    // if range and details are not equal\n                    if (!chart.length || chart[chart.length - 1].ts < values[t].ts) {\n                        chart.push(values[t]);\n                        //console.log(`add value ${new Date(values[t].ts).toISOString()}: ${values[t].val}`)\n                    } else if (chart[chart.length - 1].ts === values[t].ts && chart[chart.length - 1].val !== values[t].ts) {\n                        console.error('Strange data!');\n                    }\n                    if (minY === null || values[t].val < minY) {\n                        minY = values[t].val;\n                    }\n                    if (maxY === null || values[t].val > maxY) {\n                        maxY = values[t].val;\n                    }\n                }\n\n                if (range) {\n                    while (r < range.length) {\n                        chart.push(range[r]);\n                        console.log(`add range ${new Date(range[r].ts).toISOString()}: ${range[r].val}`);\n                        r++;\n                    }\n                }\n\n                // sort\n                chart.sort((a, b) => a.ts > b.ts ? 1 : (a.ts < b.ts ? -1 : 0));\n\n                this.chartValues = chart;\n                this.minY = minY;\n                this.maxY = maxY;\n\n                if (this.minY < 10) {\n                    this.minY = Math.round(this.minY * 10) / 10;\n                } else {\n                    this.minY = Math.ceil(this.minY);\n                }\n                if (this.maxY < 10) {\n                    this.maxY = Math.round(this.maxY * 10) / 10;\n                } else {\n                    this.maxY = Math.ceil(this.maxY);\n                }\n                return chart;\n            });\n    }\n\n    convertData(values) {\n        values = values || this.chartValues;\n        const data = [];\n        if (!values.length) {\n            return data;\n        }\n        for (let i = 0; i < values.length; i++) {\n            data.push({value: [values[i].ts, values[i].val]});\n        }\n        if (!this.chart.min) {\n            this.chart.min = values[0].ts;\n            this.chart.max = values[values.length - 1].ts;\n        }\n\n        return data;\n    }\n\n    getOption() {\n        let widthAxis;\n        if (this.minY !== null && this.minY !== undefined) {\n            widthAxis = (this.minY.toString() + this.unit).length * 9 + 12;\n        }\n        if (this.maxY !== null && this.maxY !== undefined) {\n            const w = (this.maxY.toString() + this.unit).length * 9 + 12;\n            if (w > widthAxis) {\n                widthAxis = w;\n            }\n        }\n\n        if (this.state.maxYLen) {\n            const w = this.state.maxYLen * 9 + 12;\n            if (w > widthAxis) {\n                widthAxis = w;\n            }\n        }\n\n        const serie = {\n            xAxisIndex: 0,\n            type: 'line',\n            showSymbol: false,\n            hoverAnimation: true,\n            animation: false,\n            data: this.convertData(),\n            lineStyle: {\n                color: '#4dabf5',\n            },\n            areaStyle: {}\n        };\n\n        const yAxis = {\n            type: 'value',\n            boundaryGap: [0, '100%'],\n            splitLine: {\n                show: this.props.noToolbar || !!this.state.splitLine\n            },\n            splitNumber: Math.round(this.state.chartHeight / 50),\n            axisLabel: {\n                formatter: (value, index) => {\n                    let text;\n                    if (this.props.isFloatComma) {\n                        text = value.toString().replace(',', '.') + this.unit;\n                    } else {\n                        text = value + this.unit;\n                    }\n\n                    if (this.state.maxYLen < text.length) {\n                        this.maxYLenTimeout && clearTimeout(this.maxYLenTimeout);\n                        this.maxYLenTimeout = setTimeout(maxYLen => this.setState({maxYLen}), 200, text.length);\n                    }\n                    return text;\n                },\n                showMaxLabel: true,\n                showMinLabel: true,\n            },\n            axisTick: {\n                alignWithLabel: true,\n            }\n        };\n\n        if (this.props.obj.common.type === 'boolean') {\n            serie.step = 'end';\n            yAxis.axisLabel.showMaxLabel = false;\n            yAxis.axisLabel.formatter = value => value === 1 ? 'TRUE' : 'FALSE';\n            yAxis.max = 1.5;\n            yAxis.interval = 1;\n            widthAxis = 50;\n        } else\n        if (this.props.obj.common.type === 'number' &&\n            this.props.obj.common.states) {\n            serie.step = 'end';\n            yAxis.axisLabel.showMaxLabel = false;\n            yAxis.axisLabel.formatter = value => this.props.obj.common.states[value] !== undefined ? this.props.obj.common.states[value] : value;\n            const keys = Object.keys(this.props.obj.common.states);\n            keys.sort();\n            yAxis.max = parseFloat(keys[keys.length - 1]) + 0.5;\n            yAxis.interval = 1;\n            let max = '';\n            for (let i = 0; i < keys.length; i++) {\n                if (typeof this.props.obj.common.states[keys[i]] === 'string' && this.props.obj.common.states[keys[i]].length > max.length) {\n                    max = this.props.obj.common.states[keys[i]];\n                }\n            }\n            widthAxis = ((max.length * 9) || 50) + 12;\n        }\n\n        return {\n            backgroundColor: 'transparent',\n            title: {\n                text: this.props.noToolbar ? '' : Utils.getObjectNameFromObj(this.props.obj, this.props.lang),\n                padding: [\n                    10, // up\n                    0,  // right\n                    0,  // down\n                    widthAxis ? widthAxis + 10 : GRID_PADDING_LEFT + 10, // left\n                ]\n            },\n            grid: {\n                left: widthAxis || GRID_PADDING_LEFT,\n                top: 8,\n                right: this.props.noToolbar ? 5: GRID_PADDING_RIGHT,\n                bottom: 40,\n            },\n            tooltip: {\n                trigger: 'axis',\n                formatter: params => {\n                    params = params[0];\n                    const date = new Date(params.value[0]);\n                    let value = params.value[1];\n                    if (value !== null && this.props.isFloatComma) {\n                        value = value.toString().replace('.', ',');\n                    }\n                    return `${date.toLocaleString()}.${padding3(date.getMilliseconds())}: ${value}${this.unit}`;\n                },\n                axisPointer: {\n                    animation: true\n                }\n            },\n            xAxis: {\n                type: 'time',\n                splitLine: {\n                    show: false\n                },\n                splitNumber: this.chart.withSeconds ?\n                    Math.round((this.state.chartWidth - GRID_PADDING_RIGHT - GRID_PADDING_LEFT) / 70)\n                    :\n                    Math.round((this.state.chartWidth - GRID_PADDING_RIGHT - GRID_PADDING_LEFT) / 50),\n                min: this.chart.min,\n                max: this.chart.max,\n                axisTick: {alignWithLabel: true,},\n                axisLabel: {\n                    formatter: (value, index) => {\n                        const date = new Date(value);\n                        if (this.chart.withSeconds) {\n                            return padding2(date.getHours()) + ':' + padding2(date.getMinutes()) + ':' + padding2(date.getSeconds());\n                        } else if (this.chart.withTime) {\n                            return padding2(date.getHours()) + ':' + padding2(date.getMinutes()) + '\\n' + padding2(date.getDate()) + '.' + padding2(date.getMonth() + 1);\n                        } else {\n                            return padding2(date.getDate()) + '.' + padding2(date.getMonth() + 1) + '\\n' + date.getFullYear();\n                        }\n                    }\n                }\n            },\n            yAxis,\n            toolbox: {\n                left: 'right',\n                feature: this.props.noToolbar ? undefined : {\n                    saveAsImage: {\n                        title: this.props.t('Save as image'),\n                        show: true,\n                    }\n                }\n            },\n            series: [serie]\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        return null;\n    }\n\n    updateChart(start, end, withReadData, cb) {\n        if (start) {\n            this.start = start;\n        }\n        if (end) {\n            this.end = end;\n        }\n        start = start || this.start;\n        end   = end   || this.end;\n\n        this.readTimeout && clearTimeout(this.readTimeout);\n\n        this.readTimeout = setTimeout(() => {\n            this.readTimeout = null;\n\n            const diff = this.chart.max - this.chart.min;\n            if (diff !== this.chart.diff) {\n                this.chart.diff        = diff;\n                this.chart.withTime    = this.chart.diff < 3600000 * 24 * 7;\n                this.chart.withSeconds = this.chart.diff < 60000 * 30;\n            }\n\n            if (withReadData) {\n                this.readHistory(start, end)\n                    .then(values => {\n                        this.echartsReact && typeof this.echartsReact.getEchartsInstance === 'function' && this.echartsReact.getEchartsInstance().setOption({\n                            series: [{data: this.convertData(values)}],\n                            xAxis: {\n                                min: this.chart.min,\n                                max: this.chart.max,\n                            }\n                        });\n                        cb && cb();\n                    });\n            } else {\n                this.echartsReact && typeof this.echartsReact.getEchartsInstance === 'function' && this.echartsReact.getEchartsInstance().setOption({\n                    series: [{data: this.convertData()}],\n                    xAxis: {\n                        min: this.chart.min,\n                        max: this.chart.max,\n                    }\n                });\n                cb && cb();\n            }\n        }, 400);\n    }\n\n    setNewRange(readData) {\n        /*if (this.rangeRef.current &&\n            this.rangeRef.current.childNodes[1] &&\n            this.rangeRef.current.childNodes[1].value) {\n            this.rangeRef.current.childNodes[0].innerHTML = '';\n            this.rangeRef.current.childNodes[1].value = '';\n        }*/\n        this.chart.diff        = this.chart.max - this.chart.min;\n        this.chart.withTime    = this.chart.diff < 3600000 * 24 * 7;\n        this.chart.withSeconds = this.chart.diff < 60000 * 30;\n\n        if (this.state.relativeRange !== 'absolute') {\n            this.setState({ relativeRange: 'absolute' });\n        } else if (this.echartsReact && typeof this.echartsReact.getEchartsInstance === 'function') {\n            this.echartsReact.getEchartsInstance().setOption({\n                xAxis: {\n                    min: this.chart.min,\n                    max: this.chart.max,\n                }\n            });\n\n            readData && this.updateChart(this.chart.min, this.chart.max, true);\n        }\n    }\n\n    shiftTime() {\n        const now = new Date();\n        const delay = 60000 - now.getSeconds() - (1000 - now.getMilliseconds());\n\n        if (now.getMilliseconds()) {\n            now.setMilliseconds(1000);\n        }\n        if (now.getSeconds()) {\n            now.setSeconds(60);\n        }\n\n        const max = now.getTime();\n        let min;\n        let mins = this.state.relativeRange;\n\n        if (mins === 'day') {\n            now.setHours(0);\n            now.setMinutes(0);\n            min = now.getTime();\n        } else if (mins === 'week') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            // find week start\n            if (now.getDay()) { // if not sunday\n                now.setDate(now.getDate() - now.getDay() - 1);\n            } else {\n                now.setDate(now.getDate() - 6);\n            }\n\n            this.chart.min = now.getTime();\n        } else if (mins === '2weeks') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            // find week start\n            if (now.getDay()) { // if not sunday\n                now.setDate(now.getDate() - now.getDay() - 8);\n            } else {\n                now.setDate(now.getDate() - 13);\n            }\n            this.chart.min = now.getTime();\n        } else if (mins === 'month') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setDate(1);\n            min = now.getTime();\n        } else if (mins === 'year') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setDate(1);\n            now.setMonth(0);\n            min = now.getTime();\n        }  else if (mins === '12months') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            min = now.getTime();\n        } else {\n            mins = parseInt(mins, 10);\n            min = max - mins * 60000;\n        }\n\n        this.chart.min = min;\n        this.chart.max = max;\n\n        this.setState({ min, max }, () =>\n            this.updateChart(this.chart.min, this.chart.max, true));\n\n        this.timeTimer = setTimeout(() => {\n            this.timeTimer = null;\n            this.shiftTime();\n        }, delay || 60000);\n    }\n\n    setRelativeInterval(mins, dontSave, cb) {\n        if (!dontSave) {\n            window.localStorage.setItem('App.relativeRange', mins);\n            this.setState({ relativeRange: mins });\n        }\n        if (mins === 'absolute') {\n            this.timeTimer && clearTimeout(this.timeTimer);\n            this.timeTimer = null;\n            return;\n        } else {\n            window.localStorage.removeItem('App.absoluteStart');\n            window.localStorage.removeItem('App.absoluteEnd');\n        }\n\n        const now = new Date();\n\n        if (!this.timeTimer) {\n            const delay = 60000 - now.getSeconds() - (1000 - now.getMilliseconds());\n            this.timeTimer = setTimeout(() => {\n                this.timeTimer = null;\n                this.shiftTime();\n            }, delay || 60000);\n        }\n\n        if (now.getMilliseconds()) {\n            now.setMilliseconds(1000);\n        }\n        if (now.getSeconds()) {\n            now.setSeconds(60);\n        }\n\n        this.chart.max = now.getTime();\n\n        if (mins === 'day') {\n            now.setHours(0);\n            now.setMinutes(0);\n            this.chart.min = now.getTime();\n        } else if (mins === 'week') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            // find week start\n            if (now.getDay()) { // if not sunday\n                now.setDate(now.getDate() - now.getDay() - 1);\n            } else {\n                now.setDate(now.getDate() - 6);\n            }\n\n            this.chart.min = now.getTime();\n        } else if (mins === '2weeks') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            // find week start\n            if (now.getDay()) { // if not sunday\n                now.setDate(now.getDate() - now.getDay() - 8);\n            } else {\n                now.setDate(now.getDate() - 13);\n            }\n            this.chart.min = now.getTime();\n        } else if (mins === 'month') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setDate(1);\n            this.chart.min = now.getTime();\n        } else if (mins === 'year') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setDate(1);\n            now.setMonth(0);\n            this.chart.min = now.getTime();\n        } else if (mins === '12months') {\n            now.setHours(0);\n            now.setMinutes(0);\n            now.setFullYear(now.getFullYear() - 1);\n            this.chart.min = now.getTime();\n        } else {\n            mins = parseInt(mins, 10);\n            this.chart.min = this.chart.max - mins * 60000;\n        }\n\n        this.setState({min: this.chart.min, max: this.chart.max}, () =>\n            this.updateChart(this.chart.min, this.chart.max, true, cb));\n    }\n\n    installEventHandlers() {\n        if (!this.echartsReact || typeof this.echartsReact.getEchartsInstance !== 'function') {\n            return;\n        }\n\n        const zr = this.echartsReact.getEchartsInstance().getZr();\n        if (!zr._iobInstalled) {\n            zr._iobInstalled = true;\n            zr.on('mousedown', e => {\n                console.log('mouse down');\n                this.mouseDown = true;\n                this.chart.lastX = e.offsetX;\n            });\n            zr.on('mouseup', () => {\n                console.log('mouse up');\n                this.mouseDown = false;\n                this.setNewRange(true);\n            });\n            zr.on('mousewheel', e => {\n                let diff = this.chart.max - this.chart.min;\n                const width = this.state.chartWidth - GRID_PADDING_RIGHT - GRID_PADDING_LEFT;\n                const x = e.offsetX - GRID_PADDING_LEFT;\n                const pos = x / width;\n\n                const oldDiff = diff;\n                const amount = e.wheelDelta > 0 ? 1.1 : 0.9;\n                diff = diff * amount;\n                const move = oldDiff - diff;\n                this.chart.max += move * (1 - pos);\n                this.chart.min -= move * pos;\n\n                this.setNewRange();\n            });\n            zr.on('mousemove', e => {\n                if (this.mouseDown) {\n                    const moved = this.chart.lastX - (e.offsetX - GRID_PADDING_LEFT);\n                    this.chart.lastX = e.offsetX - GRID_PADDING_LEFT;\n                    const diff = this.chart.max - this.chart.min;\n                    const width = this.state.chartWidth - GRID_PADDING_RIGHT - GRID_PADDING_LEFT;\n\n                    const shift = Math.round(moved * diff / width);\n                    this.chart.min += shift;\n                    this.chart.max += shift;\n                    this.setNewRange();\n                }\n            });\n\n            zr.on('touchstart', e => {\n                e.preventDefault();\n                this.mouseDown = true;\n                const touches = e.touches || e.originalEvent.touches;\n                if (touches) {\n                    this.chart.lastX = touches[touches.length - 1].pageX;\n                    if (touches.length > 1) {\n                        this.chart.lastWidth = Math.abs(touches[0].pageX - touches[1].pageX);\n                    } else {\n                        this.chart.lastWidth = null;\n                    }\n                }\n            });\n            zr.on('touchend', e => {\n                e.preventDefault();\n                this.mouseDown = false;\n                this.setNewRange(true);\n            });\n            zr.on('touchmove', e => {\n                e.preventDefault();\n                const touches = e.touches || e.originalEvent.touches;\n                if (!touches) {\n                    return;\n                }\n                const pageX = touches[touches.length - 1].pageX - GRID_PADDING_LEFT;\n                if (this.mouseDown) {\n                    if (touches.length > 1) {\n                        // zoom\n                        const fingerWidth = Math.abs(touches[0].pageX - touches[1].pageX);\n                        if (this.chart.lastWidth !== null && fingerWidth !== this.chart.lastWidth) {\n                            let diff = this.chart.max - this.chart.min;\n                            const chartWidth = this.state.chartWidth - GRID_PADDING_RIGHT - GRID_PADDING_LEFT;\n\n                            const amount     = fingerWidth > this.chart.lastWidth ? 1.1 : 0.9;\n                            const positionX  = touches[0].pageX > touches[1].pageX ?\n                                touches[1].pageX - GRID_PADDING_LEFT + fingerWidth / 2 :\n                                touches[0].pageX - GRID_PADDING_LEFT + fingerWidth / 2;\n\n                            const pos = positionX / chartWidth;\n\n                            const oldDiff = diff;\n                            diff = diff * amount;\n                            const move = oldDiff - diff;\n\n                            this.chart.max += move * (1 - pos);\n                            this.chart.min -= move * pos;\n\n                            this.setNewRange();\n                        }\n                        this.chart.lastWidth = fingerWidth;\n                    } else {\n                        // swipe\n                        const moved = this.chart.lastX - pageX;\n                        const diff  = this.chart.max - this.chart.min;\n                        const chartWidth = this.state.chartWidth - GRID_PADDING_RIGHT - GRID_PADDING_LEFT;\n\n                        const shift = Math.round(moved * diff / chartWidth);\n                        this.chart.min += shift;\n                        this.chart.max += shift;\n\n                        this.setNewRange();\n                    }\n                }\n                this.chart.lastX = pageX;\n            });\n        }\n    }\n\n    renderChart() {\n        if (this.chartValues) {\n            return <ReactEchartsCore\n                ref={e => this.echartsReact = e}\n                echarts={ echarts }\n                option={ this.getOption() }\n                notMerge={ true }\n                lazyUpdate={ true }\n                theme={ this.props.themeType === 'dark' ? 'dark' : '' }\n                style={{ height: this.state.chartHeight + 'px', width: '100%' }}\n                opts={{ renderer: 'svg' }}\n                onEvents={ {\n                    rendered: e => {\n                        this.installEventHandlers();\n                    }\n                }}\n            />;\n        } else {\n            return <LinearProgress/>;\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.divRef.current) {\n            const width = this.divRef.current.offsetWidth;\n            const height = this.divRef.current.offsetHeight;\n            if (this.state.chartHeight !== height) {// || this.state.chartHeight !== height) {\n                setTimeout(() => this.setState({ chartHeight: height, chartWidth: width }), 100);\n            }\n        }\n    }\n\n    setStartDate(min) {\n        min = min.getTime();\n        if (this.timeTimer) {\n            clearTimeout(this.timeTimer);\n            this.timeTimer = null;\n        }\n        window.localStorage.setItem('App.relativeRange', 'absolute');\n        window.localStorage.setItem('App.absoluteStart', min);\n        window.localStorage.setItem('App.absoluteEnd', this.state.max);\n\n        this.chart.min = min;\n        this.setState({ min, relativeRange: 'absolute' }, () =>\n            this.updateChart(this.chart.min, this.chart.max, true));\n    }\n\n    setEndDate(max) {\n        max = max.getTime();\n        window.localStorage.setItem('App.relativeRange', 'absolute');\n        window.localStorage.setItem('App.absoluteStart', this.state.min);\n        window.localStorage.setItem('App.absoluteEnd', max);\n        if (this.timeTimer) {\n            clearTimeout(this.timeTimer);\n            this.timeTimer = null;\n        }\n        this.chart.max = max;\n        this.setState({ max, relativeRange: 'absolute'  }, () =>\n            this.updateChart(this.chart.min, this.chart.max, true));\n    }\n\n    openEcharts() {\n        const args = [\n            'id=' + window.encodeURIComponent(this.props.obj._id),\n            'instance=' + window.encodeURIComponent(this.state.historyInstance),\n            'menuOpened=false',\n        ];\n\n        if (this.state.relativeRange === 'absolute') {\n            args.push('start=' + this.chart.min);\n            args.push('end=' + this.chart.max);\n        } else {\n            args.push('range=' + this.state.relativeRange);\n        }\n\n        window.open(`${window.location.protocol}//${window.location.host}/adapter/echarts/tab.html#${args.join('&')}`, 'echarts');\n    }\n\n    renderToolbar() {\n        if (this.props.noToolbar) {\n            return null;\n        }\n\n        const classes = this.props.classes;\n\n        return <Toolbar>\n            {!this.props.historyInstance && <FormControl className={ classes.selectHistoryControl }>\n                <InputLabel>{ this.props.t('History instance') }</InputLabel>\n                <Select\n                    value={ this.state.historyInstance }\n                    onChange={ e => {\n                        window.localStorage.setItem('App.historyInstance', e.target.value);\n                        this.setState({ historyInstance: e.target.value });\n                    }}\n                >\n                    { this.state.historyInstances.map(it => <MenuItem key={ it.id } value={ it.id } className={ clsx(!it.alive && classes.notAliveInstance )}>{ it.id }</MenuItem>) }\n                </Select>\n            </FormControl>}\n            <FormControl className={ classes.selectRelativeTime }>\n                <InputLabel>{ this.props.t('Relative') }</InputLabel>\n                <Select\n                    ref={ this.rangeRef }\n                    value={ this.state.relativeRange }\n                    onChange={ e => this.setRelativeInterval(e.target.value) }\n                >\n                    <MenuItem key={ 'custom' } value={ 'absolute' } className={ classes.customRange }>{ this.props.t('custom range') }</MenuItem>\n                    <MenuItem key={ '1'  } value={ 10 }            >{ this.props.t('last 10 minutes') }</MenuItem>\n                    <MenuItem key={ '2'  } value={ 30 }            >{ this.props.t('last 30 minutes') }</MenuItem>\n                    <MenuItem key={ '3'  } value={ 60 }            >{ this.props.t('last hour') }</MenuItem>\n                    <MenuItem key={ '4'  } value={ 'day' }         >{ this.props.t('this day') }</MenuItem>\n                    <MenuItem key={ '5'  } value={ 24 * 60 }       >{ this.props.t('last 24 hours') }</MenuItem>\n                    <MenuItem key={ '6'  } value={ 'week' }        >{ this.props.t('this week') }</MenuItem>\n                    <MenuItem key={ '7'  } value={ 24 * 60 * 7 }   >{ this.props.t('last week') }</MenuItem>\n                    <MenuItem key={ '8'  } value={ '2weeks' }      >{ this.props.t('this 2 weeks') }</MenuItem>\n                    <MenuItem key={ '9'  } value={ 24 * 60 * 14 }  >{ this.props.t('last 2 weeks') }</MenuItem>\n                    <MenuItem key={ '10' } value={ 'month' }       >{ this.props.t('this month') }</MenuItem>\n                    <MenuItem key={ '11' } value={ 30 * 24 * 60 }  >{ this.props.t('last 30 days') }</MenuItem>\n                    <MenuItem key={ '12' } value={ 'year' }        >{ this.props.t('this year') }</MenuItem>\n                    <MenuItem key={ '13' } value={ '12months' }    >{ this.props.t('last 12 months') }</MenuItem>\n                </Select>\n            </FormControl>\n            <MuiPickersUtilsProvider utils={DateFnsUtils} locale={localeMap[this.props.lang]}>\n                <div className={ classes.toolbarTimeGrid }>\n                    <KeyboardDatePicker\n                        className={ classes.toolbarDate }\n                        disabled={ this.state.relativeRange !== 'absolute' }\n                        disableToolbar\n                        variant=\"inline\"\n                        margin=\"normal\"\n                        format={this.state.dateFormat}\n                        //format=\"fullDate\"\n                        label={ this.props.t('Start date') }\n                        value={ new Date(this.state.min) }\n                        onChange={date => this.setStartDate(date)}\n                    />\n                    <KeyboardTimePicker\n                        disabled={ this.state.relativeRange !== 'absolute' }\n                        className={ classes.toolbarTime }\n                        margin=\"normal\"\n                        //format=\"fullTime24h\"\n                        ampm={ false }\n                        label={ this.props.t('Start time') }\n                        value={ new Date(this.state.min) }\n                        onChange={date => this.setStartDate(date)}\n                    />\n                </div>\n                <div className={ classes.toolbarTimeGrid }>\n                    <KeyboardDatePicker\n                        disabled={ this.state.relativeRange !== 'absolute' }\n                        className={ classes.toolbarDate }\n                        disableToolbar\n                        format={this.state.dateFormat}\n                        variant=\"inline\"\n                        //format=\"fullDate\"\n                        margin=\"normal\"\n                        label={ this.props.t('End date') }\n                        value={ new Date(this.state.max) }\n                        onChange={date => this.setEndDate(date)}\n                    />\n                    <KeyboardTimePicker\n                        disabled={ this.state.relativeRange !== 'absolute' }\n                        className={ classes.toolbarTime }\n                        margin=\"normal\"\n                        //format=\"fullTime24h\"\n                        ampm={ false }\n                        label={ this.props.t('End time') }\n                        value={ new Date(this.state.max) }\n                        onChange={date => this.setEndDate(date)}\n                    />\n                </div>\n            </MuiPickersUtilsProvider>\n            <div className={classes.grow} />\n            {this.props.showJumpToEchart && this.state.echartsJump && <Fab\n                className={classes.echartsButton}\n                size=\"small\"\n                onClick={() => this.openEcharts()}\n                title={this.props.t('Open charts in new window')}\n            >\n                <img src={EchartsIcon} alt=\"echarts\" className={classes.buttonIcon}/>\n            </Fab>}\n            <Fab\n                variant=\"extended\"\n                size=\"small\"\n                color={ this.state.splitLine ? 'primary' : 'inherit' }\n                aria-label=\"show lines\"\n                onClick={() => {\n                    window.localStorage.setItem('App.splitLine', this.state.splitLine ? 'false' : 'true');\n                    this.setState({splitLine: !this.state.splitLine});\n                }}\n                className={ classes.splitLineButton }\n            >\n                <SplitLineIcon className={ classes.splitLineButtonIcon } />\n                { this.props.t('Show lines') }\n            </Fab>\n        </Toolbar>;\n    }\n\n    render() {\n        if (!this.state.historyInstances && !this.state.defaultHistory) {\n            return <LinearProgress/>;\n        }\n\n        return <Paper className={ this.props.classes.paper }>\n            { this.renderToolbar() }\n            <div ref={ this.divRef } className={clsx(this.props.classes.chart, this.props.noToolbar ? this.props.classes.chartWithoutToolbar : this.props.classes.chartWithToolbar) }>\n                { this.renderChart() }\n            </div>\n        </Paper>;\n    }\n}\n\nObjectChart.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    expertMode: PropTypes.bool,\n    socket: PropTypes.object,\n    obj: PropTypes.object,\n    customsInstances: PropTypes.array,\n    themeType: PropTypes.string,\n    objects: PropTypes.object,\n    from: PropTypes.number,\n    end: PropTypes.number,\n    noToolbar: PropTypes.bool,\n    defaultHistory: PropTypes.string,\n    historyInstance: PropTypes.string,\n    showJumpToEchart: PropTypes.bool,\n    isFloatComma: PropTypes.bool,\n};\n\nexport default withWidth()(withStyles(styles)(ObjectChart));","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport Router from '@iobroker/adapter-react/Components/Router';\nimport ConfirmDialog from '@iobroker/adapter-react/Dialogs/Confirm';\nimport I18n from '@iobroker/adapter-react/i18n';\n\n// Icons\nimport CloseIcon from '@material-ui/icons/Close';\nimport SaveIcon from '@material-ui/icons/Save';\n\n\nimport ObjectCustomEditor from '../components/Object/ObjectCustomEditor';\nimport ObjectHistoryData from '../components/Object/ObjectHistoryData';\nimport ObjectChart from '../components/Object/ObjectChart';\nimport MobileDialog from '../helpers/MobileDialog';\n\nconst styles = theme => ({\n    dialog: {\n        height: '100%',\n    },\n    paper: {\n        height: 'calc(100% - 64px)',\n    },\n    content: {\n        textAlign: 'center',\n        overflow: 'hidden',\n    },\n    tabPanel: {\n        width: '100%',\n        overflow: 'hidden',\n        height: 'calc(100% - ' + theme.mixins.toolbar.minHeight + 'px)',\n    }\n});\n\nexport const EXTENSIONS = {\n    images: ['png', 'jpg', 'svg', 'jpeg'],\n    code: ['js', 'json'],\n    txt: ['log', 'txt', 'html', 'css', 'xml'],\n};\n\nclass ObjectCustomDialog extends MobileDialog {\n    constructor(props) {\n        super(props);\n\n        let currentTab = parseInt(window.localStorage.getItem('App.objectCustomTab') || 0, 10);\n        this.chartAvailable = this.isChartAvailable();\n\n        if (this.chartAvailable) {\n            const location = Router.getLocation();\n            if (location.arg === 'chart') {\n                currentTab = 2;\n            } else if (location.arg === 'table') {\n                currentTab = 1;\n            }\n        } else {\n            currentTab = 0;\n        }\n\n        this.state = {\n            hasChanges: false,\n            currentTab,\n            confirmDialog: false,\n            mobile: MobileDialog.isMobile(),\n            progressRunning: false,\n        };\n\n        this.saveFunc = null;\n    }\n\n    isChartAvailable() {\n        let chartAvailable = this.props.objectIDs.length === 1;\n        if (chartAvailable) {\n            const id = this.props.objectIDs[0];\n            if (this.props.objects[id] && this.props.objects[id].common && this.props.objects[id].common.custom && this.props.objects[id].common.custom) {\n                chartAvailable = Object.keys(this.props.objects[id].common.custom).find(inst => {\n                    const obj = this.props.objects['system.adapter.' + inst];\n                    return obj && obj.common && obj.common.getHistory;\n                });\n            } else {\n                chartAvailable = false;\n            }\n        }\n        return chartAvailable;\n    }\n\n    renderCharts() {\n        return <ObjectChart\n            id={'chart-tabpanel'}\n            isFloatComma={this.props.isFloatComma}\n            showJumpToEchart={true}\n            t={this.props.t}\n            lang={this.props.lang}\n            expertMode={this.props.expertMode}\n            socket={this.props.socket}\n            obj={this.props.objects[this.props.objectIDs[0]]}\n            customsInstances={this.props.customsInstances}\n            themeType={this.props.themeType}\n            objects={this.props.objects}\n        />;\n    }\n\n    renderTable() {\n        return <ObjectHistoryData\n            id={'table-tabpanel'}\n            t={this.props.t}\n            isFloatComma={this.props.isFloatComma}\n            lang={this.props.lang}\n            expertMode={this.props.expertMode}\n            socket={this.props.socket}\n            obj={this.props.objects[this.props.objectIDs[0]]}\n            customsInstances={this.props.customsInstances}\n            themeName={this.props.themeName}\n            objects={this.props.objects}\n        />;\n    }\n\n    renderCustomEditor() {\n        return <ObjectCustomEditor\n            id={'custom-settings-tabpanel'}\n            registerSaveFunc={func => this.saveFunc = func }\n            t={this.props.t}\n            lang={this.props.lang}\n            expertMode={this.props.expertMode}\n            socket={this.props.socket}\n            objectIDs={this.props.objectIDs}\n            customsInstances={this.props.customsInstances}\n            objects={this.props.objects}\n            onProgress={progressRunning => this.setState({progressRunning})}\n            reportChangedIds={this.props.reportChangedIds}\n            onChange={(hasChanges, update) => {\n                this.setState({ hasChanges }, () => {\n                    if (update) {\n                        const chartAvailable = this.isChartAvailable();\n                        if (chartAvailable !== this.chartAvailable) {\n                            this.chartAvailable = chartAvailable;\n                            this.forceUpdate();\n                        }\n                    }\n                });\n            }}\n            theme={this.props.theme}\n            themeName={this.props.themeName}\n            themeType={this.props.themeType}\n        />;\n    }\n\n    renderConfirmDialog() {\n        if (!this.state.confirmDialog) {\n            return null;\n        }\n        return <ConfirmDialog\n            title={ I18n.t('You have unsaved changes') }\n            text={ I18n.t('Discard?') }\n            ok={ I18n.t('Yes') }\n            cancel={ I18n.t('Cancel') }\n            onClose={isYes =>\n                this.setState({ confirmDialog: false}, () => isYes && this.props.onClose())}\n        />;\n    }\n\n    onClose() {\n        if (this.state.hasChanges) {\n            this.setState({confirmDialog: true});\n        } else {\n            this.props.onClose();\n        }\n    }\n\n    render() {\n        const varType = this.props.objects[this.props.objectIDs[0]]?.common?.type;\n\n        return <Dialog\n            classes={{scrollPaper: this.props.classes.dialog, paper: this.props.classes.paper}}\n            scroll=\"paper\"\n            open={true}\n            onClose={() => this.props.onClose()}\n            fullWidth={true}\n            maxWidth=\"xl\"\n            aria-labelledby=\"form-dialog-title\"\n        >\n            {this.renderConfirmDialog()}\n            <DialogTitle>{\n                this.props.objectIDs.length > 1 ?\n                    this.props.t('Edit config for %s states', this.props.objectIDs.length) :\n                    this.props.t('Edit config: %s', this.props.objectIDs[0])\n            }</DialogTitle>\n            <DialogContent className={this.props.classes.content}>\n                <AppBar position=\"static\">\n                    <Tabs value={this.state.currentTab} onChange={(event, newTab) => {\n                        Router.doNavigate(null, null, null, newTab === 1 ? 'table' : (newTab === 2 ? 'chart' : 'config'));\n                        this.setState({ currentTab: newTab });\n                        window.localStorage.setItem('App.objectCustomTab', newTab);\n                    }}>\n                        <Tab disabled={this.state.progressRunning} label={this.props.t('Custom settings')} id={'custom-settings-tab'} aria-controls={'simple-tabpanel-0'} />\n                        {this.props.objectIDs.length === 1 && this.chartAvailable ? <Tab disabled={this.state.progressRunning} label={this.props.t('History data')} id={'history-data-tab'} aria-controls={'simple-tabpanel-1'} /> : null}\n                        {(varType === 'number' || varType === 'boolean') && this.props.objectIDs.length === 1 && this.chartAvailable ? <Tab disabled={this.state.progressRunning} label={this.props.t('Chart')} id={'chart-tab'} aria-controls={'simple-tabpanel-2'} /> : null}\n                    </Tabs>\n                </AppBar>\n                {this.state.currentTab === 0 ? <div className={this.props.classes.tabPanel}>{this.renderCustomEditor()}</div> : null}\n                {this.props.objectIDs.length === 1 && this.chartAvailable && this.state.currentTab === 1 ? <div className={this.props.classes.tabPanel}>{this.renderTable()}</div> : null}\n                {(varType === 'number' || varType === 'boolean') && this.props.objectIDs.length === 1 && this.chartAvailable && this.state.currentTab === 2 ? <div className={this.props.classes.tabPanel}>{this.renderCharts()}</div> : null}\n            </DialogContent>\n            <DialogActions>\n                {this.state.currentTab === 0 && <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={!this.state.hasChanges || this.state.progressRunning}\n                    onClick={() => this.saveFunc && this.saveFunc()}\n                >\n                    {this.getButtonTitle(<SaveIcon />, this.props.t('Save'))}\n                </Button>}\n                {this.state.currentTab === 0 && <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={!this.state.hasChanges || this.state.progressRunning}\n                    onClick={() => {\n                        if (this.saveFunc) {\n                            this.saveFunc(error => !error && this.onClose());\n                        }  else {\n                            this.onClose();\n                        }\n                    }}\n                >\n                    {this.getButtonTitle(<SaveIcon />, this.props.t('Save & close'), <CloseIcon />)}\n                </Button>}\n                <Button\n                    disabled={this.state.progressRunning}\n                    variant=\"contained\"\n                    onClick={() => this.onClose()} >\n                    {this.getButtonTitle(<CloseIcon />, this.props.t('Close'))}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nObjectCustomDialog.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    expertMode: PropTypes.bool,\n    objects: PropTypes.object,\n    socket: PropTypes.object,\n    theme: PropTypes.object,\n    themeName: PropTypes.string,\n    themeType: PropTypes.string,\n    customsInstances: PropTypes.array,\n    objectIDs: PropTypes.array,\n    onClose: PropTypes.func,\n    reportChangedIds: PropTypes.func,\n    isFloatComma: PropTypes.bool,\n};\n\nexport default withStyles(styles)(ObjectCustomDialog);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from '@material-ui/core/styles';\n\nimport AceEditor from 'react-ace';\nimport 'ace-builds/webpack-resolver';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-clouds_midnight';\nimport 'ace-builds/src-noconflict/theme-chrome';\nimport 'ace-builds/src-noconflict/ext-language_tools'\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TextField from '@material-ui/core/TextField';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Grid from '@material-ui/core/Grid';\nimport Hidden from '@material-ui/core/Hidden';\nimport Fab from '@material-ui/core/Fab';\nimport Typography from '@material-ui/core/Typography';\nimport Switch from '@material-ui/core/Switch';\n\nimport ChartIcon from '@material-ui/icons/ShowChart';\nimport IconCancel from '@material-ui/icons/Close';\nimport IconCheck from '@material-ui/icons/Check';\n\nimport ObjectChart from './ObjectChart';\n\nconst styles = theme => ({\n    input: {\n        width: '100%'\n    },\n    textInput: {\n        width: '100%'\n    },\n    formControl: {\n        minWidth: 150,\n    },\n    quality: {\n        width: 'calc(100% - 88px)'\n    },\n    expire: {\n        marginLeft: 8,\n        width: 80\n    },\n    jsonError: {\n        border: '1px solid red'\n    },\n    jsonNoError: {\n        border: '1px solid #00000000'\n    },\n    wrapperButton: {\n    },\n    '@media screen and (max-width: 465px)': {\n        wrapperButton: {\n            '& *': {\n                fontSize: 12\n            }\n        },\n    },\n    '@media screen and (max-width: 380px)': {\n        wrapperButton: {\n            '& *': {\n                fontSize: 11\n            }\n        },\n    },\n});\n\nconst AntSwitch = withStyles((theme) => ({\n    root: {\n        width: 28,\n        height: 16,\n        padding: 0,\n        display: 'flex',\n    },\n    switchBase: {\n        padding: 2,\n        color: theme.palette.grey[500],\n        '&$checked': {\n            transform: 'translateX(12px)',\n            color: theme.palette.common.white,\n            '& + $track': {\n                opacity: 1,\n                backgroundColor: theme.palette.primary.main,\n                borderColor: theme.palette.primary.main,\n            },\n        },\n    },\n    thumb: {\n        width: 12,\n        height: 12,\n        boxShadow: 'none',\n    },\n    track: {\n        border: `1px solid ${theme.palette.grey[500]}`,\n        borderRadius: 16 / 2,\n        opacity: 1,\n        backgroundColor: theme.palette.common.white,\n    },\n    checked: {},\n}))(Switch);\n\nclass ObjectBrowserValue extends Component {\n    constructor(props) {\n        super(props);\n\n        let type = this.props.type || typeof this.props.value;\n\n        this.value = this.props.value;\n        this.propsValue = this.value;\n        if (this.propsValue === null) {\n            this.propsValue = 'null';\n        } else if (this.propsValue === undefined) {\n            this.propsValue = 'undefined';\n        }\n\n        if (this.props.states) {\n            type = 'states';\n        } else\n        if (type === 'string' || type === 'json') {\n            if (this.value && typeof this.value === 'string' &&\n                ((this.value.startsWith('[') && this.value.endsWith(']')) ||\n                 (this.value.startsWith('{') && this.value.endsWith('}')))\n            ) {\n                try {\n                    this.value = JSON.parse(this.value);\n                    this.value = JSON.stringify(this.value, null, 2);\n                    this.propsValue = this.value;\n                    type = 'json';\n                } catch (e) {\n\n                }\n            }\n        }\n\n        this.state = {\n            type,\n            chart: false,\n            chartEnabled: window.localStorage.getItem('App.chartSetValue') !== 'false',\n        };\n\n        this.ack    = false;\n        this.q      = 0;\n        this.expire = 0;\n\n        this.inputRef = React.createRef();\n\n        this.chartFrom = Date.now() - 3600000 * 2;\n    }\n\n    componentDidMount() {\n        if (this.props.defaultHistory &&\n            this.props.object?.common?.custom &&\n            this.props.object.common.custom[this.props.defaultHistory]?.enabled) {\n            this.props.socket.getState('system.adapter.' + this.props.defaultHistory + '.alive')\n                .then(state => this.setState({chart: state && !!state.val}));\n        }\n\n        setTimeout(() => {\n            if (this.inputRef && this.inputRef.current) {\n                const el = this.inputRef.current;\n                const value = el.value || '';\n                el.setSelectionRange(0, value.length);\n            }\n        }, 200);\n    }\n\n    onUpdate() {\n        if (this.state.type === 'states') {\n            let type = this.props.type || typeof this.props.value;\n\n            if (type === 'number') {\n                if (typeof this.value === 'string') {\n                    this.value = parseFloat(this.value.replace(',', '.')) || 0;\n                }\n            } else if (type === 'boolean') {\n                this.value = this.value === true || this.value === 'true' || this.value === '1' || this.value === 'ON' || this.value === 'on';\n            }\n        } else\n        if (this.state.type === 'number') {\n            if (typeof this.value === 'string') {\n                this.value = parseFloat(this.value.replace(',', '.')) || 0;\n            }\n        } else if (this.state.type === 'boolean') {\n            this.value = this.value === true || this.value === 'true' || this.value === '1' || this.value === 'ON' || this.value === 'on';\n        }\n\n        this.props.onClose({val: this.value, ack: this.ack, q: this.q, expire: parseInt(this.expire, 10) || undefined});\n    }\n\n    renderChart() {\n        return <ObjectChart\n            t={this.props.t}\n            isFloatComma={this.props.isFloatComma}\n            showJumpToEchart={false}\n            lang={this.props.lang}\n            socket={this.props.socket}\n            obj={this.props.object}\n            themeType={this.props.themeType}\n            from={this.chartFrom}\n            end={Date.now()}\n            noToolbar={true}\n            dateFormat={this.props.dateFormat}\n            defaultHistory={this.props.defaultHistory}\n        />;\n    }\n\n    checkJsonError() {\n        try {\n            JSON.parse(this.value);\n            this.setState({jsonError: false});\n        } catch (e) {\n            this.setState({jsonError: true});\n        }\n    }\n\n    renderJsonEditor() {\n        return <AceEditor\n            className={this.state.jsonError ? this.props.classes.jsonError : this.props.classes.jsonNoError}\n            mode=\"json\"\n            width=\"100%\"\n            height=\"200px\"\n            showPrintMargin={true}\n            showGutter={true}\n            highlightActiveLine={true}\n            theme={this.props.themeType === 'dark' ? 'clouds_midnight' : 'chrome'}\n            defaultValue={(this.propsValue || '').toString()}\n            onChange={newValue => {\n                this.value = newValue;\n                this.checkJsonError();\n            }}\n            name=\"UNIQUE_ID_OF_DIV1\"\n            fontSize={14}\n            setOptions={{\n                enableBasicAutocompletion: true,\n                enableLiveAutocompletion: true,\n                enableSnippets: true,\n                showLineNumbers: true,\n                tabSize: 2,\n            }}\n            editorProps={{$blockScrolling: true}}\n        />;\n    }\n\n    renderStates() {\n        if (!this.props.states) {\n            return null;\n        } else {\n            return <FormControl className={ this.props.classes.formControl }>\n                <InputLabel>{ this.props.t('Value') }</InputLabel>\n                <Select\n                    defaultValue={ this.propsValue }\n                    onChange={ e => this.value = e.target.value }\n                >\n                    {Object.keys(this.props.states).map((key, i) => <MenuItem key={i} value={key}>{this.props.states[key]}</MenuItem>)}\n                </Select>\n            </FormControl>;\n        }\n    }\n\n    render() {\n        return <Dialog\n            open={ true }\n            maxWidth={ this.state.type === 'number' || this.state.type === 'boolean' || this.state.type === 'states' ? (this.state.chart && this.state.chartEnabled ? 'lg' : null) : 'md'}\n            fullWidth={ (this.state.type !== 'number' && this.state.type !== 'boolean' && this.state.type !== 'states') || (this.state.chart && this.state.chartEnabled)}\n            onClose={ () => this.props.onClose() }\n            aria-labelledby=\"edit-value-dialog-title\"\n            aria-describedby=\"edit-value-dialog-description\"\n        >\n            <DialogTitle id=\"edit-value-dialog-title\">\n                { this.props.t('Write value') }\n                {/*this.state.chart ? <div style={{flexGrow: 1}}/> : null*/}\n                {this.state.chart ? <Fab\n                    style={{float: 'right'}}\n                    size=\"small\"\n                    color={this.state.chartEnabled ? 'primary' : 'default'}\n                    onClick={() => {\n                    window.localStorage.setItem('App.chartSetValue', this.state.chartEnabled ? 'false' : 'true');\n                    this.setState({chartEnabled: !this.state.chartEnabled});\n                }}><ChartIcon /></Fab> : null}\n            </DialogTitle>\n            <DialogContent>\n                <form className={ this.props.classes.dialogForm } noValidate autoComplete=\"off\">\n                    <Grid container direction=\"row\" spacing={2}>\n                        <Grid item xs={this.state.chart && this.state.chartEnabled ? 6 : 12}>\n                            <Grid container direction=\"column\" spacing={2}>\n                                { this.props.expertMode ? <Grid item><FormControl className={ this.props.classes.formControl }>\n                                    <InputLabel>{ this.props.t('Value type') }</InputLabel>\n                                    <Select\n                                        value={ this.state.type }\n                                        onChange={ e => {\n                                            if (e.target.value === 'json') {\n                                                this.value = (this.value || '').toString();\n                                                this.checkJsonError();\n                                            }\n\n                                            this.setState({ type: e.target.value })\n                                        }}\n                                    >\n                                        <MenuItem value=\"string\">String</MenuItem>\n                                        <MenuItem value=\"number\">Number</MenuItem>\n                                        <MenuItem value=\"boolean\">Boolean</MenuItem>\n                                        <MenuItem value=\"json\">JSON</MenuItem>\n                                        {this.props.states ? <MenuItem value=\"states\">States</MenuItem> : null}\n                                    </Select>\n                                </FormControl></Grid> : null }\n\n                                <Grid item>\n                                    { this.state.type === 'boolean' ?\n                                        /*<FormControl component=\"fieldset\" className={ this.props.classes.formControl }>\n                                            <FormControlLabel\n                                                className={ this.props.classes.formControl }\n                                                control={<Checkbox\n                                                    autoFocus\n                                                    defaultChecked={ !!this.propsValue }\n                                                    onKeyUp={e => e.keyCode === 13 && this.onUpdate() }\n                                                    onChange={e => this.value = e.target.checked}/>}\n                                                label={this.props.t('Value')}\n                                            />\n                                            <FormHelperText>{this.props.t('Press ENTER to write the value, when focused')}</FormHelperText>\n                                        </FormControl>*/\n                                        <Typography component=\"div\">\n                                            <Grid component=\"label\" container alignItems=\"center\" spacing={1}>\n                                                <Grid item style={{marginRight: 10}}>{this.props.t('Value')}:</Grid>\n                                                <Grid item>FALSE</Grid>\n                                                <Grid item>\n                                                    <AntSwitch\n                                                        autoFocus\n                                                        defaultChecked={ !!this.propsValue }\n                                                        onKeyUp={e => e.keyCode === 13 && this.onUpdate() }\n                                                        onChange={e => this.value = e.target.checked}\n                                                    />\n                                                </Grid>\n                                                <Grid item>TRUE</Grid>\n                                            </Grid>\n                                        </Typography>\n                                        :\n                                        (this.state.type === 'number' ?\n                                                <TextField\n                                                    classes={{ root: this.props.classes.textInput }}\n                                                    autoFocus\n                                                    inputRef={this.inputRef}\n                                                    helperText={ this.props.t('Press ENTER to write the value, when focused') }\n                                                    label={ this.props.t('Value') }\n                                                    defaultValue={ parseFloat(this.propsValue) || 0 }\n                                                    onKeyUp={ e => e.keyCode === 13 && this.onUpdate() }\n                                                    onChange={ e => this.value = e.target.value }/>\n                                                :\n                                                (this.state.type === 'json' ?\n                                                        this.renderJsonEditor()\n                                                        :\n                                                        (this.state.type === 'states' ?\n                                                                this.renderStates()\n                                                                :\n                                                                <TextField\n                                                                    classes={{ root: this.props.classes.textInput }}\n                                                                    inputRef={this.inputRef}\n                                                                    autoFocus\n                                                                    helperText={ this.props.t('Press CTRL+ENTER to write the value, when focused')}\n                                                                    label={ this.props.t('Value') }\n                                                                    fullWidth={ true }\n                                                                    multiline\n                                                                    onKeyUp={e => e.ctrlKey && e.keyCode === 13 && this.onUpdate() }\n                                                                    defaultValue={ this.propsValue.toString() }\n                                                                    onChange={ e => this.value = e.target.value }/>\n                                                        )\n                                                )\n                                        )\n                                    }\n                                </Grid>\n                                <Grid item>\n                                    <FormControlLabel\n                                        className={ this.props.classes.formControl }\n                                        control={ <Checkbox\n                                            defaultChecked={ false }\n                                            onChange={ e => this.ack = e.target.checked }/> }\n                                        label={ this.props.t('Acknowledged') }\n                                    />\n                                </Grid>\n\n                                { this.props.expertMode ? <Grid item><FormControl className={ this.props.classes.quality }>\n                                    <InputLabel>{ this.props.t('Quality') }</InputLabel>\n                                    <Select\n                                        defaultValue={ 0 }\n                                        onChange={ e => this.q = parseInt(e.target.value, 10) }\n                                    >\n                                        <MenuItem value={ 0x00 }>0x00 - good</MenuItem>\n\n                                        <MenuItem value={ 0x01 }>0x01 - general problem</MenuItem>\n                                        <MenuItem value={ 0x02 }>0x02 - no connection problem</MenuItem>\n\n                                        <MenuItem value={ 0x10 }>0x10 - substitute value from controller</MenuItem>\n                                        <MenuItem value={ 0x20 }>0x20 - substitute initial value</MenuItem>\n                                        <MenuItem value={ 0x40 }>0x40 - substitute value from device or instance</MenuItem>\n                                        <MenuItem value={ 0x80 }>0x80 - substitute value from sensor</MenuItem>\n\n                                        <MenuItem value={ 0x11 }>0x11 - general problem by instance</MenuItem>\n                                        <MenuItem value={ 0x41 }>0x41 - general problem by device</MenuItem>\n                                        <MenuItem value={ 0x81 }>0x81 - general problem by sensor</MenuItem>\n\n                                        <MenuItem value={ 0x12 }>0x12 - instance not connected</MenuItem>\n                                        <MenuItem value={ 0x42 }>0x42 - device not connected</MenuItem>\n                                        <MenuItem value={ 0x82 }>0x82 - sensor not connected</MenuItem>\n\n                                        <MenuItem value={ 0x44 }>0x44 - device reports error</MenuItem>\n                                        <MenuItem value={ 0x84 }>0x84 - sensor reports error</MenuItem>\n                                    </Select>\n                                </FormControl>\n                                    <TextField\n                                        title={this.props.t('0 - no expiration')}\n                                        classes={{root: this.props.classes.expire}}\n                                        label={this.props.t('Expire')}\n                                        type=\"number\"\n                                        inputProps={{min: 0}}\n                                        helperText={this.props.t('in seconds')}\n                                        defaultValue={this.expire}\n                                        onChange={e => this.expire = e.target.value}\n                                    />\n                                </Grid> : null }\n                            </Grid>\n                        </Grid>\n                        {this.state.chart && this.state.chartEnabled ? <Hidden only={['sm', 'xs']}><Grid item xs={6} style={{minHeight: 300}}>\n                            {this.renderChart()}\n                        </Grid></Hidden>: null}\n                    </Grid>\n                </form>\n            </DialogContent>\n            <DialogActions className={this.props.classes.wrapperButton}>\n                <Button variant=\"contained\" onClick={ () => this.onUpdate() } color=\"primary\" startIcon={<IconCheck />}>{ this.props.t('Set value') }</Button>\n                <Button variant=\"contained\" onClick={ () => this.props.onClose() } startIcon={<IconCancel />}>{ this.props.t('Cancel') }</Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nObjectBrowserValue.propTypes = {\n    classes: PropTypes.object,\n    type: PropTypes.string,\n    states: PropTypes.object,\n    value: PropTypes.any,\n    expertMode: PropTypes.bool,\n    onClose: PropTypes.func.isRequired,\n    themeType: PropTypes.string,\n    socket: PropTypes.object,\n    defaultHistory: PropTypes.string,\n    dateFormat: PropTypes.string,\n    object: PropTypes.object,\n    isFloatComma: PropTypes.bool,\n\n    t: PropTypes.func,\n    lang: PropTypes.string,\n};\n\nexport default withStyles(styles)(ObjectBrowserValue);\n","import React, { Component } from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AceEditor from 'react-ace';\nimport 'ace-builds/webpack-resolver';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-clouds_midnight';\nimport 'ace-builds/src-noconflict/theme-chrome';\nimport 'ace-builds/src-noconflict/ext-language_tools'\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport IconClose from '@material-ui/icons/Close';\nimport IconCheck from '@material-ui/icons/Check';\nimport AddIcon from '@material-ui/icons/Add';\nimport {FaClipboard as IconCopyClipboard} from 'react-icons/fa';\nimport IconCopy from '@material-ui/icons/FileCopy';\nimport IconFx from '@iobroker/adapter-react/icons/IconFx';\n\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\nimport Utils from '@iobroker/adapter-react/Components/Utils';\nimport I18n from '@iobroker/adapter-react/i18n';\nimport copy from \"@iobroker/adapter-react/Components/copy-to-clipboard\";\nimport { FormControl, InputLabel, MenuItem, Select, Tooltip } from '@material-ui/core';\nimport { Autocomplete } from '@material-ui/lab';\nimport UploadImage from '../UploadImage';\n\n\nconst styles = theme => ({\n    divWithoutTitle: {\n        width: '100%',\n        height: '100%',\n        border: '2px solid #00000000',\n    },\n    divWithoutTitleAndTab: {\n        height: 'calc(100% - 48px)',\n    },\n    error: {\n        border: '2px solid #FF0000',\n    },\n    id: {\n        fontStyle: 'italic',\n    },\n    dialog: {\n        height: 'calc(100% - 64px)'\n    },\n    aliasIdEdit: {\n        width: 400 - 32,\n    },\n    button: {\n        marginTop: 20,\n        marginLeft: theme.spacing(1),\n    },\n    funcDivEdit: {\n        width: '100%'\n    },\n    funcEditName: {\n        display: 'inline-block',\n        width: 85\n    },\n    funcEdit: {\n        width: 400,\n    },\n    funcIcon: {\n        width: 16,\n        height: 16,\n    },\n    marginTop: {\n        marginTop: 20,\n    },\n    commonTabWrapper: {\n        flexFlow: 'wrap',\n        display: 'flex'\n    },\n    commonWrapper: {\n        width: 500,\n        minWidth: 300\n    },\n    flexDrop: {\n        width: '100%',\n        maxWidth: 500,\n        margin: 'auto',\n        display: 'flex'\n    },\n    marginBlock: {\n        marginTop: 20\n    },\n    buttonAdd: {\n        minWidth: 150\n    },\n    textField: {\n        width: '100%'\n    },\n    flex: {\n        display: 'flex'\n    },\n    close: {\n        width: '20px',\n        height: '20px',\n        opacity: '0.9',\n        cursor: 'pointer',\n        position: 'relative',\n        top: 20,\n        transition: 'all 0.6s ease',\n        '&:hover': {\n            transform: 'rotate(90deg)'\n        },\n        '&:before': {\n            position: 'absolute',\n            left: '9px',\n            content: '\"\"',\n            height: '20px',\n            width: '3px',\n            backgroundColor: '#ff4f4f',\n            transform: 'rotate(45deg)'\n        },\n        '&:after': {\n            position: 'absolute',\n            left: '9px',\n            content: '\"\"',\n            height: '20px',\n            width: '3px',\n            backgroundColor: '#ff4f4f',\n            transform: 'rotate(-45deg)'\n        },\n    },\n    color: {\n        width: 70\n    },\n    buttonRemoveWrapper: {\n        position: 'absolute',\n        zIndex: 222,\n        right: 0\n    },\n    tabsPadding: {\n        padding: '0px 24px'\n    },\n    '@media screen and (max-width: 465px)': {\n        wrapperButton: {\n            '& *':{\n                fontSize:10\n            }\n        },\n    },\n    '@media screen and (max-width: 380px)': {\n        wrapperButton: {\n            '& *':{\n                fontSize:9\n            }\n        },\n    },\n});\n\nclass ObjectBrowserEditObject extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            text: JSON.stringify(this.props.obj, null, 2),\n            error: false,\n            changed: false,\n            readError: this.checkFunction(this.props.obj.common?.alias?.read, false),\n            writeError: this.checkFunction(this.props.obj.common?.alias?.write, true),\n            tab: window.localStorage.getItem((this.props.dialogName || 'App') + '.editTab') || 'object',\n            showCopyDialog: false,\n        };\n\n        this.isMobile = window.innerWidth < 850;\n\n        this.originalObj = JSON.stringify(this.props.obj, null, 2);\n    }\n\n    checkFunction(func, isWrite) {\n        if (!func) {\n            return '';\n        } else {\n            let json;\n            try {\n                json = JSON.parse(this.state.text);\n            } catch (e) {\n\n            }\n\n            let jsFunc;\n            try {\n                // eslint-disable-next-line no-new-func\n                jsFunc = new Function('val', func.includes('return') ? func : 'return ' + func);\n            } catch (e) {\n                return this.props.t('Cannot parse code!');\n            }\n\n            if (json?.common?.type && this.props.objects[json.common?.alias?.id]?.common?.type) {\n                const initialType = isWrite ? json.common.type : this.props.objects[json.common.alias.id].common.type;\n                const finalType = isWrite ? this.props.objects[json.common.alias.id].common.type : json.common.type;\n                if (initialType && finalType) {\n                    let arg = null;\n                    if (initialType === 'boolean') {\n                        arg = true;\n                    } else if (initialType === 'number') {\n                        arg = 1;\n                    } else if (initialType === 'string') {\n                        arg = 'string';\n                    }\n                    if (arg !== null) {\n                        try {\n                            const result = jsFunc(arg);\n                            return result !== null && typeof result !== finalType ?\n                                this.props.t('Type of result is not as expected: %s', finalType) : '';\n                        } catch (e) {\n                            return this.props.t('Cannot execute function') + ': ' + e.toString();\n                        }\n                    }\n                }\n            }\n\n            return '';\n        }\n    }\n\n    prepareObject(value) {\n        value = value || this.state.text;\n        try {\n            const obj = JSON.parse(value);\n            obj._id = this.props.obj._id; // do not allow change of id\n\n            // check aliases\n            if (obj.common?.alias) {\n                if (!obj.common.alias.id) {\n                    delete obj.common.alias.id;\n                }\n                if ((!obj.common.alias.read && obj.common.alias.read !== undefined) || obj.common.alias.read === 'val') {\n                    delete obj.common.alias.read;\n                }\n                if ((!obj.common.alias.write && obj.common.alias.write !== undefined) || obj.common.alias.write === 'val') {\n                    delete obj.common.alias.write;\n                }\n                if (!obj.common.alias.id && !obj.common.alias.read && !obj.common.alias.write) {\n                    delete obj.common.alias;\n                }\n            }\n            return obj;\n        } catch (e) {\n            return null;\n        }\n    }\n\n    onChange(value, cb) {\n        const newState = { text: value };\n        const json = this.prepareObject(value);\n        if (json) {\n            newState.changed = this.originalObj !== JSON.stringify(json, null, 2);\n            if (this.state.error) {\n                newState.error = false;\n            }\n            newState.readError = this.checkFunction(json.common?.alias?.read, false);\n            newState.writeError = this.checkFunction(json.common?.alias?.write, true);\n        } else {\n            newState.error = true;\n        }\n        this.setState(newState, () => cb && cb());\n    }\n\n    onUpdate() {\n        const obj = JSON.parse(this.state.text);\n        obj._id = this.props.obj._id; // do not allow change of id\n\n        // check aliases\n        if (obj.common?.alias) {\n            if (!obj.common.alias.id) {\n                delete obj.common.alias.id;\n            }\n            if ((!obj.common.alias.read && obj.common.alias.read !== undefined) || obj.common.alias.read === 'val') {\n                delete obj.common.alias.read;\n            }\n            if ((!obj.common.alias.write && obj.common.alias.write !== undefined) || obj.common.alias.write === 'val') {\n                delete obj.common.alias.write;\n            }\n            if (!obj.common.alias.id && !obj.common.alias.read && !obj.common.alias.write) {\n                delete obj.common.alias;\n            }\n        }\n\n        this.props.onClose(obj);\n    }\n\n    renderTabs() {\n        return <Tabs className={this.props.classes.tabsPadding} value={this.state.tab} onChange={(e, tab) => {\n            window.localStorage.setItem((this.props.dialogName || 'App') + '.editTab', tab);\n            this.setState({ tab });\n        }}>\n            <Tab value=\"common\" label={this.props.t('Common')} />\n            <Tab value=\"object\" label={this.props.t('Object data')} />\n            {this.props.obj._id.startsWith('alias.0') && this.props.obj.type === 'state' && <Tab value=\"alias\" label={this.props.t('Alias')} />}\n        </Tabs>;\n    }\n\n    renderSelectDialog() {\n        if (!this.state.selectId && !this.state.selectRead && !this.state.selectWrite) {\n            return null;\n        }\n\n        const json = JSON.parse(this.state.text);\n\n        let id;\n\n        if (this.state.selectId) {\n            id = json.common?.alias?.id || '';\n        } else if (this.state.selectRead) {\n            id = json.common?.alias?.id?.read || '';\n        } else if (this.state.selectWrite) {\n            id = json.common?.alias?.id?.write || '';\n        }\n\n        return <DialogSelectID\n            key=\"selectDialog\"\n            imagePrefix=\".\"\n            dateFormat={this.props.dateFormat}\n            isFloatComma={this.props.isFloatComma}\n            socket={this.props.socket}\n            dialogName=\"aliasesEdit\"\n            title={`${this.props.t('Select for')} ${this.props.obj._id}`}\n            selected={id}\n            statesOnly={true}\n            onOk={id => {\n                const selectRead = this.state.selectRead;\n                const selectWrite = this.state.selectWrite;\n                const selectId = this.state.selectId;\n                this.setState({ selectId: false, selectRead: false, selectWrite: false }, () => {\n                    if (selectRead) {\n                        this.setAliasItem(json, 'id.read', id);\n                    } else if (selectWrite) {\n                        this.setAliasItem(json, 'id.write', id);\n                    } else if (selectId) {\n                        this.setAliasItem(json, 'id', id);\n                    }\n                });\n            }}\n            onClose={() => this.setState({ selectId: false, selectRead: false, selectWrite: false })}\n        />;\n    }\n\n    setAliasItem(json, name, value, cb) {\n        json.common = json.common || {};\n        json.common.alias = json.common.alias || {};\n\n        if (name === 'id.read') {\n            if (json.common.alias.id && typeof json.common.alias.id === 'object') {\n                json.common.alias.id.read = value;\n            } else {\n                json.common.alias.id = {read: value, write: value};\n            }\n        } else if (name === 'id.write') {\n            if (json.common.alias.id && typeof json.common.alias.id === 'object') {\n                json.common.alias.id.write = value;\n            } else {\n                json.common.alias.id = {read: value, write: value};\n            }\n        } else {\n            json.common.alias[name] = value;\n        }\n\n        this.onChange(JSON.stringify(json, null, 2), cb);\n    }\n\n    setCommonItem(json, name, value) {\n        json.common[name] = value;\n        this.onChange(JSON.stringify(json, null, 2));\n    }\n\n    removeCommonItem(json, name) {\n        delete json.common[name]\n        this.onChange(JSON.stringify(json, null, 2));\n    }\n\n    buttonAddKey(nameKey, cb) {\n        const { t, classes } = this.props;\n        return <div\n            className={classes.marginBlock}>\n            <Button\n                className={classes.buttonAdd}\n                variant=\"contained\"\n                color=\"secondary\"\n                startIcon={<AddIcon />}\n                onClick={cb}>{t('add %s', nameKey)}</Button>\n        </div>;\n    }\n\n    buttonRemoveKey(nameKey, cb) {\n        const { t, classes } = this.props;\n        return <Tooltip title={t('Remove %s', nameKey)}><div className={classes.close} onClick={cb} /></Tooltip>;\n    }\n\n    renderCommonEdit() {\n        try {\n            const json = JSON.parse(this.state.text);\n            const stateTypeArray = [\n                'boolean',\n                'json',\n                'string',\n                'number',\n                'multistate',\n                'file',\n                'object',\n                'mixed'\n            ];\n            const disabled = false;\n            const { classes, t, roleArray, obj } = this.props;\n            const checkState = obj.type === 'state';\n            const checkRole = obj.type === 'channel' || obj.type === 'device' || checkState;\n            return <div className={classes.commonTabWrapper}>\n                <div className={classes.commonWrapper}>\n                    {typeof json.common.name !== 'undefined' ?\n                        <TextField\n                            disabled={disabled}\n                            label={t('Name')}\n                            className={clsx(classes.marginBlock, classes.textField)}\n                            fullWidth\n                            value={Utils.getObjectNameFromObj(json, I18n.getLanguage())}\n                            onChange={(el) => this.setCommonItem(json, 'name', el.target.value)}\n                        /> :\n                        this.buttonAddKey('name', () => this.setCommonItem(json, 'name', ''))\n                    }\n                    {checkState ? typeof json.common.type !== 'undefined' ?\n                        <div className={classes.flex}>\n                            <FormControl\n                                className={classes.marginBlock}\n                                fullWidth>\n                                <InputLabel >{t('State type')}</InputLabel>\n                                <Select\n                                    disabled={disabled}\n                                    value={json.common.type}\n                                    onChange={(el) => this.setCommonItem(json, 'type', el.target.value)}\n                                >\n                                    {stateTypeArray.map(el => <MenuItem key={el} value={el}>{t(el)}</MenuItem>)}\n                                </Select>\n                            </FormControl>\n                            {this.buttonRemoveKey('type', () => this.removeCommonItem(json, 'type'))}\n                        </div>\n                        :\n                        this.buttonAddKey('type', () => this.setCommonItem(json, 'type', 'string'))\n                        : null}\n                    {checkRole ? typeof json.common.role !== 'undefined' ?\n                        <div className={classes.flex}>\n                            <Autocomplete\n                                className={classes.marginBlock}\n                                fullWidth\n                                disabled={disabled}\n                                value={json.common.role}\n                                getOptionSelected={(option, value) => option.name === value.name}\n                                onChange={(_, e) => this.setCommonItem(json, 'role', e)}\n                                options={roleArray}\n                                renderInput={(params) => <TextField {...params} label={t('Role')} />}\n                            />\n                            {this.buttonRemoveKey('role', () => this.removeCommonItem(json, 'role'))}\n                        </div> :\n                        this.buttonAddKey('role', () => this.setCommonItem(json, 'role', ''))\n                        : null}\n                    {typeof json.common.color !== 'undefined' ?\n                        <div className={classes.flex}>\n                            <TextField\n                                disabled={disabled}\n                                className={clsx(classes.marginBlock, classes.color)}\n                                label={t('Color')}\n                                type=\"color\"\n                                value={json.common.color}\n                                onChange={el => this.setCommonItem(json, 'color', el.target.value)} />\n                            {this.buttonRemoveKey('color', () => this.removeCommonItem(json, 'color'))}\n                        </div> :\n                        this.buttonAddKey('color', () => this.setCommonItem(json, 'color', ''))\n                    }\n                </div>\n                {typeof json.common.icon !== 'undefined' ?\n                    <div className={classes.flexDrop}>\n                        <UploadImage\n                            disabled={disabled}\n                            maxSize={10 * 1024}\n                            icon={json.common.icon}\n                            removeIconFunc={() => this.setCommonItem(json, 'icon', '')}\n                            onChange={(base64) => this.setCommonItem(json, 'icon', base64)}\n                            t={t}\n                        />\n                        {this.buttonRemoveKey('icon', () => this.removeCommonItem(json, 'icon'))}\n                    </div> :\n                    <div className={classes.flexDrop}>\n                        {this.buttonAddKey('icon', () => this.setCommonItem(json, 'icon', ''))}\n                    </div>\n                }\n            </div>\n        } catch (e) {\n            return <div>{this.props.t('Cannot parse JSON!')}</div>;\n        }\n    }\n    renderAliasEdit() {\n        try {\n            const json = JSON.parse(this.state.text);\n            const funcVisible = json.common?.alias?.read !== undefined;\n\n            return <Grid container direction=\"column\" className={this.props.classes.marginTop}>\n                <Grid item>\n                    <FormControlLabel\n                        control={<Checkbox checked={typeof json.common?.alias?.id === 'object'} onChange={() => {\n                            if (typeof json.common?.alias?.id === 'object') {\n                                this.setAliasItem(json, 'id', json.common?.alias?.id?.read || '');\n                            } else {\n                                this.setAliasItem(json, 'id.read', json.common?.alias?.id || '');\n                            }\n                        }} />}\n                        label={this.props.t('Different IDs for read and write')}\n                    />\n                </Grid>\n                {typeof json.common?.alias?.id !== 'object' ? <Grid item>\n                    <TextField\n                            label={this.props.t('Alias state')}\n                            value={json.common?.alias?.id || ''}\n                            className={this.props.classes.aliasIdEdit}\n                            InputProps={{\n                                endAdornment: json.common?.alias?.id ? <InputAdornment position=\"end\"><IconButton\n                                    onClick={() => this.setAliasItem(json, 'id', '')}><IconClose/></IconButton></InputAdornment> : null,\n                            }}\n                            onChange={e => this.setAliasItem(json, 'id', e.target.value)}\n                            margin=\"normal\"\n                    />\n                    <Fab\n                        className={this.props.classes.button}\n                        size=\"small\"\n                        onClick={() => this.setState({selectId: true, selectRead: false, selectWrite: false})}>...</Fab>\n                </Grid> : null}\n\n                {typeof json.common?.alias?.id === 'object' ? <Grid item>\n                    <TextField\n                        label={this.props.t('Alias read state')}\n                        value={json.common?.alias?.id?.read || ''}\n                        className={this.props.classes.aliasIdEdit}\n                        InputProps={{\n                            endAdornment: json.common?.alias?.id?.read ? <InputAdornment position=\"end\"><IconButton\n                                onClick={() => this.setAliasItem(json, 'id.read', '')}><IconClose/></IconButton></InputAdornment> : null,\n                        }}\n                        onChange={e => this.setAliasItem(json, 'id.read', e.target.value)}\n                        margin=\"normal\"\n                    />\n                    <Fab\n                        className={this.props.classes.button}\n                        size=\"small\"\n                        onClick={() => this.setState({selectId: false, selectRead: true, selectWrite: false})}>...</Fab>\n                </Grid> : null}\n\n                {typeof json.common?.alias?.id === 'object' ? <Grid item>\n                    <TextField\n                        label={this.props.t('Alias write state')}\n                        value={json.common?.alias?.id?.write || ''}\n                        className={this.props.classes.aliasIdEdit}\n                        InputProps={{\n                            endAdornment: json.common?.alias?.id?.write ? <InputAdornment position=\"end\"><IconButton\n                                onClick={() => this.setAliasItem(json, 'id.write', '')}><IconClose/></IconButton></InputAdornment> : null,\n                        }}\n                        onChange={e => this.setAliasItem(json, 'id.write', e.target.value)}\n                        margin=\"normal\"\n                    />\n                    <Fab\n                    className={this.props.classes.button}\n                    size=\"small\"\n                    onClick={() => this.setState({selectId: false, selectRead: false, selectWrite: true})}>...</Fab>\n                </Grid> : null}\n                <Grid item className={this.props.classes.marginTop}>\n                    <FormControlLabel\n                        control={\n                            <Checkbox\n                                checked={json.common?.alias?.read !== undefined}\n                                onChange={() => {\n                                    if (funcVisible) {\n                                        delete json.common.alias.read;\n                                        delete json.common.alias.write;\n                                    } else {\n                                        json.common = json.common || {};\n                                        json.common.alias = json.common.alias || {};\n                                        json.common.alias.read = 'val';\n                                        json.common.alias.write = 'val';\n                                    }\n                                    this.onChange(JSON.stringify(json, null, 2));\n                                }}\n                            />\n                        }\n                        label={this.props.t('Use convert functions')}\n                    />\n                </Grid>\n                {funcVisible ?\n                    <Grid item>\n                        <TextField\n                            label={this.props.t('Read converter')}\n                            value={json.common?.alias?.read || ''}\n                            className={this.props.classes.funcEdit}\n                            error={!!this.state.readError}\n                            InputProps={{\n                                endAdornment: json.common?.alias?.read ? <InputAdornment position=\"end\"><IconButton onClick={() => this.setAliasItem(json, 'read', '')}><IconClose /></IconButton></InputAdornment> : null,\n                                startAdornment: <InputAdornment position=\"start\"><IconFx className={this.props.classes.funcIcon}/></InputAdornment>,\n                            }}\n                            onChange={e => this.setAliasItem(json, 'read', e.target.value)}\n                            helperText={this.state.readError || (this.props.t('JS function like') + ' \"val / 5 + 21\"')}\n                            margin=\"normal\"\n                        />\n                    </Grid> : null}\n                {funcVisible ?\n                    <Grid item>\n                        <TextField\n                            label={this.props.t('Write converter')}\n                            error={!!this.state.writeError}\n                            value={json.common?.alias?.write || ''}\n                            helperText={this.state.writeError || (this.props.t('JS function like') + ' \"(val - 21) * 5\"')}\n                            className={this.props.classes.funcEdit}\n                            InputProps={{\n                                endAdornment: json.common?.alias?.write ? <InputAdornment position=\"end\"><IconButton onClick={() => this.setAliasItem(json, 'write', '')}><IconClose /></IconButton></InputAdornment> : null,\n                                startAdornment: <InputAdornment position=\"start\"><IconFx className={this.props.classes.funcIcon}/></InputAdornment>,\n                            }}\n                            onChange={e => this.setAliasItem(json, 'write', e.target.value)}\n                            margin=\"normal\"\n                        />\n                    </Grid> : null}\n            </Grid>;\n        } catch (e) {\n            return <div>{this.props.t('Cannot parse JSON!')}</div>;\n        }\n    }\n\n    onCopy(e) {\n        e.stopPropagation();\n        e.preventDefault();\n        copy(this.state.text);\n        window.alert(this.props.t('ra_Copied'));\n    }\n\n    onClone(oldId, newId, cb) {\n        const newObj = JSON.parse(JSON.stringify(this.props.objects[oldId]));\n        delete newObj.from;\n        delete newObj.ts;\n        delete newObj.user;\n        newObj._id = newId;\n        this.props.objects[newObj._id] = newObj; // bad practise, but no time to wait till this object will be created\n        this.props.onNewObject(newObj);\n    }\n\n    renderCopyDialog() {\n        if (!this.state.showCopyDialog) {\n            return null;\n        } else {\n            return <Dialog\n                open={true}\n                maxWidth=\"md\"\n                fullWidth\n                onClose={() => this.setState({showCopyDialog: false})}\n            >\n                <DialogTitle>{this.props.t('Enter new ID for this object')}</DialogTitle>\n                <DialogContent>\n                    <TextField\n                        autoFocus\n                        fullWidth\n                        label={this.props.t('New object ID')}\n                        value={this.state.newId}\n                        onKeyDown={e => {\n                            if (e.keyCode === 13 && !this.props.objects[this.state.newId]) {\n                                this.setState({showCopyDialog: ''});\n                                this.onClone(this.state.showCopyDialog, this.state.newId);\n                            }\n                        }}\n                        onChange={e => this.setState({newId: e.target.value})}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        disabled={!!this.props.objects[this.state.newId]}\n                        onClick={() => {\n                            this.setState({showCopyDialog: ''});\n                            this.onClone(this.state.showCopyDialog, this.state.newId);\n                        }}\n                        color=\"primary\"\n                        startIcon={<IconCopy />}\n                    >\n                        {this.props.t('Clone')}\n                    </Button>\n                    <Button\n                        onClick={() => this.setState({showCopyDialog: ''})}\n                        startIcon={<IconClose />}\n                    >\n                        {this.props.t('Cancel')}\n                    </Button>\n                </DialogActions>\n            </Dialog>;\n        }\n    }\n\n    render() {\n        const withAlias = this.props.obj._id.startsWith('alias.0') && this.props.obj.type === 'state';\n\n        return <Dialog\n            classes={{ paper: this.props.classes.dialog }}\n            open={true}\n            maxWidth=\"lg\"\n            fullWidth={this.state.type !== 'number' && this.state.type !== 'boolean'}\n            fullScreen={false}\n            onClose={() => this.props.onClose()}\n            aria-labelledby=\"edit-value-dialog-title\"\n            aria-describedby=\"edit-value-dialog-description\"\n        >\n            <DialogTitle id=\"edit-value-dialog-title\">{this.props.t('Edit object:')} <span className={this.props.classes.id}>{this.props.obj._id}</span></DialogTitle>\n\n            {this.renderTabs()}\n            {this.renderCopyDialog()}\n            <DialogContent>\n                {this.state.tab === 'object' ?\n                    <div className={clsx(this.props.classes.divWithoutTitle, withAlias && this.props.classes.divWithoutTitleAndTab, this.state.error && this.props.classes.error)}>\n                        <AceEditor\n                            mode=\"json\"\n                            width=\"100%\"\n                            height=\"100%\"\n                            theme={this.props.themeName === 'dark' ? 'clouds_midnight' : 'chrome'}\n                            value={this.state.text}\n                            onChange={newValue => this.onChange(newValue)}\n                            name=\"UNIQUE_ID_OF_DIV\"\n                            fontSize={14}\n                            setOptions={{\n                                enableBasicAutocompletion: true,\n                                enableLiveAutocompletion: true,\n                                enableSnippets: true\n                            }}\n                            editorProps={{ $blockScrolling: true }}\n                        />\n                    </div>\n                    : null\n                }\n                {this.state.tab === 'alias' && this.props.obj._id.startsWith('alias.0') && this.props.obj.type === 'state' ?\n                    this.renderAliasEdit() : null\n                }\n                {this.state.tab === 'common' ? this.renderCommonEdit() : null}\n                {this.renderSelectDialog()}\n            </DialogContent>\n            <DialogActions className={this.props.classes.wrapperButton}>\n                {<Button\n                    onClick={() => this.setState({showCopyDialog: this.props.obj._id, newId: this.props.obj._id})}\n                    disabled={this.state.error || this.state.changed}\n                    title={this.props.t('Create a copy of this object')}\n                ><IconCopy/></Button>}\n                <div style={{flexGrow: 1}}/>\n                {this.state.tab === 'object' && <Button\n                    onClick={e => this.onCopy(e)}\n                    disabled={this.state.error}\n                    title={this.isMobile ? this.props.t('Copy into clipboard') : ''}\n                    startIcon={<IconCopyClipboard />}\n                >{this.isMobile ? null : this.props.t('Copy into clipboard')}</Button>}\n                <Button\n                    variant=\"contained\"\n                    disabled={this.state.error || !this.state.changed}\n                    onClick={() => this.onUpdate()}\n                    startIcon={<IconCheck />}\n                    color=\"primary\">{this.props.t('Write')}</Button>\n                <Button\n                    variant=\"contained\"\n                    onClick={() => this.props.onClose()}\n                    startIcon={<IconClose />}\n                >{this.props.t('Cancel')}</Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nObjectBrowserEditObject.propTypes = {\n    classes: PropTypes.object,\n    socket: PropTypes.object,\n    obj: PropTypes.object,\n    expertMode: PropTypes.bool,\n    themeName: PropTypes.string,\n    onClose: PropTypes.func.isRequired,\n    dialogName: PropTypes.string,\n    objects: PropTypes.object,\n    dateFormat: PropTypes.string,\n    isFloatComma: PropTypes.bool,\n    onNewObject: PropTypes.func,\n\n    t: PropTypes.func,\n};\n\nexport default withStyles(styles)(ObjectBrowserEditObject);\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\nimport IconCancel from '@material-ui/icons/Close';\nimport IconCheck from '@material-ui/icons/Check';\n\nconst styles = theme => ({\n    input: {\n        marginBottom: theme.spacing(2),\n    },\n    inputText: {\n        width: 400,\n        height: 300,\n        marginBottom: theme.spacing(2),\n    },\n    formControl: {\n        marginBottom: theme.spacing(2),\n        minWidth: 150,\n    },\n    quality: {\n        width: '100%'\n    }\n});\n\nclass ObjectBrowserEditRole extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            role: null,\n            initRole: null,\n            roleInput: null\n        };\n    }\n\n    componentDidMount() {\n        this.props.socket.getObject(this.props.id)\n            .then(obj => {\n                this.object = obj;\n                const value = obj?.common?.role || null;\n                this.setState({ role: value, initRole: value, roleInput: value });\n            })\n            .catch(e => console.error(e));\n    }\n\n    onUpdate() {\n        this.object.common = this.object.common || {};\n        this.object.common.role = this.state.roleInput;\n        this.props.socket.setObject(this.object._id, this.object)\n            .then(() => this.props.onClose(this.object));\n    }\n\n    render() {\n        return <Dialog\n            key=\"objectBrowserEditRole\"\n            open={true}\n            maxWidth=\"sm\"\n            fullWidth={true}\n            onClose={() => this.props.onClose()}\n            aria-labelledby=\"edit-role-dialog-title\"\n            aria-describedby=\"edit-role-dialog-description\"\n        >\n            <DialogTitle id=\"edit-role-dialog-title\">{this.object ? this.props.t('Update role for %s', this.object._id) : null}</DialogTitle>\n            <DialogContent>\n                <Autocomplete\n                    freeSolo\n                    options={this.props.roles}\n                    style={{ width: '100%' }}\n                    value={this.state.role}\n                    onChange={(event, role) => this.setState({ role, roleInput: role })}\n                    onInputChange={(event, role) => this.setState({ roleInput: role })}\n                    renderInput={params => <TextField\n                        {...params}\n                        label={this.props.t('Role')}\n                        variant=\"outlined\"\n                    />}\n                />\n            </DialogContent>\n            <DialogActions>\n                <Button disabled={this.state.initRole === this.state.roleInput} variant=\"contained\" onClick={() => this.onUpdate()} color=\"primary\" startIcon={<IconCheck />}>{this.props.t('Apply')}</Button>\n                <Button variant=\"contained\" onClick={() => this.props.onClose()} color=\"default\" startIcon={<IconCancel />}>{this.props.t('Cancel')}</Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nObjectBrowserEditRole.propTypes = {\n    classes: PropTypes.object,\n    roles: PropTypes.array,\n    id: PropTypes.string,\n    socket: PropTypes.object,\n    onClose: PropTypes.func.isRequired,\n\n    t: PropTypes.func,\n};\n\nexport default withStyles(styles)(ObjectBrowserEditRole);\n","import React, {useState} from 'react';\n\nimport { FormControl, InputLabel, MenuItem, Select, TextField } from '@material-ui/core';\n\nimport AddIcon from '@material-ui/icons/AddBox';\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport Utils from '../components/Utils'; // @iobroker/adapter-react/i18n\n\nimport CustomModal from '../components/CustomModal';\n\nconst stateTypeArray = [\n    'boolean',\n    'string',\n    'number',\n    'array',\n    'json',\n    'object',\n    'mixed'\n];\n\nconst stateDefValues = {\n    boolean: false,\n    string: '',\n    number: 0,\n};\n\nconst TYPES = {\n    state:   {name: 'Datapoint', value: 'state'},\n    channel: {name: 'Channel', value: 'channel'},\n    device:  {name: 'Device', value: 'device'},\n    folder:  {name: 'Folder', value: 'folder'}\n};\n\nconst ObjectAddNewObject = ({ onClose, onApply, open, selected, setObject, objects }) => {\n    const names = {\n        state:   I18n.t('New state'),\n        channel: I18n.t('New channel'),\n        device:  I18n.t('New device'),\n        folder:  I18n.t('New folder'),\n    };\n\n    const types = [];\n\n    // analyse possible types\n    const parentType = objects[selected]?.type;\n    let initialType = '';\n    if (objects[selected]) {\n        if (parentType === 'channel') {\n            types.push(TYPES.state);\n            initialType = 'state';\n        } else if (parentType === 'device') {\n            initialType = 'channel';\n            types.push(TYPES.state);\n            types.push(TYPES.channel);\n        } else if (parentType === 'state') {\n            initialType = '';\n        } else {\n            types.push(TYPES.state);\n            types.push(TYPES.channel);\n            types.push(TYPES.device);\n\n            if (selected.startsWith('0_userdata.') ||\n                selected.startsWith('alias.0.') ||\n                selected === '0_userdata' ||\n                selected === 'alias.0') {\n                types.push(TYPES.folder);\n                initialType = 'folder';\n            } else {\n                initialType = 'state';\n            }\n        }\n    } else {\n        types.push(TYPES.folder);\n        initialType = 'folder';\n    }\n\n    const [name, setName] = useState(names[initialType]);\n    const [type, setType] = useState(initialType);\n    const [stateType, setStateType] = useState('string');\n    const [unique, setUnique] = useState(!objects[buildId(names.state)]);\n\n    function buildId(name) {\n        return name.toString().replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\n    }\n\n    const onLocalApply = () => {\n        const newObj = {\n            common: {\n                name,\n                desc: I18n.t('Manually created'),\n            },\n            type\n        };\n\n        if (type === 'state') {\n            newObj.common = {\n                ...newObj.common,\n                role: 'state',\n                type: stateType,\n                read: true,\n                write: true,\n                def: stateDefValues[stateType]\n            };\n        } else if (type !== 'folder') {\n            newObj.common = {\n                ...newObj.common,\n                role: '',\n                icon: '',\n            };\n        } else {\n            delete newObj.common.desc;\n        }\n\n        setObject(`${selected}.${name.split(' ').join('_')}`, newObj)\n            .then(() => onApply());\n    }\n\n    return <CustomModal\n        open={open}\n        fullWidth\n        maxWidth=\"lg\"\n        titleButtonApply=\"add\"\n        applyDisabled={!name || !unique || !types.length}\n        onClose={onClose}\n        onApply={() => onLocalApply()}>\n        <div style={{ display: 'flex', flexDirection: 'column' }}>\n            <div style={{\n                margin: 10,\n                fontSize: 20\n            }}><AddIcon/> {I18n.t('Add new object:')} <span style={{fontStyle: 'italic'}}>{selected}.{name}</span></div>\n            <TextField\n                label={I18n.t('Parent')}\n                style={{ margin: '5px 0' }}\n                disabled\n                value={selected}\n            />\n            <FormControl style={{ marginTop: 10, marginBottom: 10 }}>\n                <InputLabel>{I18n.t('Type')}</InputLabel>\n                <Select\n                    value={type}\n                    onChange={(el) => {\n                        if (name === names[type]) {\n                            setName(names[el.target.value]);\n                            setUnique(objects[buildId(names[el.target.value])]);\n                        }\n                        setType(el.target.value);\n                    }}\n                >\n                    {types.map(el => <MenuItem key={el.value} value={el.value}>{I18n.t(el.name)}</MenuItem>)}\n                </Select>\n            </FormControl>            {type === 'state' && <FormControl >\n                <InputLabel>{I18n.t('State type')}</InputLabel>\n                <Select\n                    value={stateType}\n                    onChange={el => setStateType(el.target.value)}\n                >\n                    {stateTypeArray.map(el => <MenuItem key={el} value={el}>{el}</MenuItem>)}\n                </Select>\n            </FormControl>}\n            <TextField\n                label={I18n.t('Name')}\n                style={{ margin: '5px 0' }}\n                autoFocus\n                value={name}\n                onKeyDown={e => {\n                    if (e.keyCode === 13) {\n                        e.preventDefault();\n                        name && onLocalApply();\n                    }\n                }}\n                onChange={el => {\n                    setUnique(!objects[buildId(el.target.value)]);\n                    setName(el.target.value);\n                }}\n            />\n        </div>\n    </CustomModal>;\n}\n\nexport default ObjectAddNewObject;","import React, { useEffect, useState } from 'react';\nimport { Checkbox, FormControl, InputLabel, LinearProgress, MenuItem, Select, Switch } from '@material-ui/core';\n\nimport Icon from '@iobroker/adapter-react/Components/Icon';\nimport I18n from '@iobroker/adapter-react/i18n';\n\nimport Utils from '../components/Utils';\nimport CustomModal from '../components/CustomModal';\n\nconst readWriteArray = [\n    {\n        Owner: [\n            { name: 'read', valueNum: 0x400, title: 'read owner' },\n            { name: 'write', valueNum: 0x200, title: 'write owner' }\n        ]\n    },\n    {\n        Group: [\n            { name: 'read', valueNum: 0x40, title: 'read group' },\n            { name: 'write', valueNum: 0x20, title: 'write group' }\n        ]\n    },\n    {\n        Everyone: [\n            { name: 'read', valueNum: 0x4, title: 'read everyone' },\n            { name: 'write', valueNum: 0x2, title: 'write everyone' }\n        ]\n    },\n];\n\nconst newValueAccessControl = (value, newValue, mask) => {\n    value |= newValue & mask;\n    value &= newValue | (~mask & 0xFFFF);\n    return value;\n}\n\nconst ObjectRights = ({ value, disabled, setValue, t, differentValues, applyToChildren, mask, setMask }) => {\n    useEffect(() => {\n        if (applyToChildren) {\n            let _checkDifferent = 0;\n            for (let e = 0; e < differentValues.length; e++) {\n                _checkDifferent |= value ^ differentValues[e];\n            }\n            setMask(_checkDifferent);\n        } else {\n            setMask(0);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [differentValues, applyToChildren]);\n\n    let newSelected = value;\n\n    return <div style={{\n        display: 'flex',\n        width: 'fit-content',\n        margin: 20,\n        border: '1px solid',\n        borderLeft: 0\n    }}>\n        {readWriteArray.map(el => {\n            const name = Object.keys(el)[0];\n            return <div style={{\n                width: 150,\n                height: 150,\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                borderLeft: '1px solid'\n            }} key={name} >\n                <div style={{\n                    height: 50,\n                    display: 'flex',\n                    alignItems: 'center',\n                    fontSize: 18,\n                    borderBottom: '1px solid silver',\n                    width: '100%',\n                    justifyContent: 'center'\n                }}>{t(name)}</div>\n                <div style={{\n                    display: 'flex',\n                    width: '100%'\n                }}>\n                    {el[name].map((obj, idx) => {\n                        let bool = false;\n                        if (newSelected - obj.valueNum >= 0) {\n                            newSelected = newSelected - obj.valueNum;\n                            bool = true;\n                        }\n                        return <div style={{\n                            display: 'flex',\n                            flexDirection: 'column',\n                            flex: 1,\n                            alignItems: 'center',\n                            borderRight: idx === 0 ? '1px solid' : 0\n                        }} key={obj.valueNum}>\n                            <div style={{\n                                height: 50,\n                                borderBottom: '1px solid',\n                                width: '100%',\n                                justifyContent: 'center',\n                                display: 'flex',\n                                alignItems: 'center',\n                                color: 'silver'\n                            }}>{t(obj.name)}</div>\n                            <div style={{ height: 50, display: 'flex' }}>\n                                <Checkbox\n                                    disabled={disabled}\n                                    checked={bool}\n                                    color={mask & obj.valueNum ? 'primary' : 'secondary'}\n                                    indeterminate={!!(mask & obj.valueNum)}\n                                    style={mask & obj.valueNum ? { opacity: 0.5 } : null}\n                                    onChange={e => {\n                                        if (mask & obj.valueNum) {\n                                            mask &= (~obj.valueNum) & 0xFFFF;\n                                            setMask(mask);\n                                        }\n                                        let newValue = value;\n                                        if (!e.target.checked) {\n                                            newValue &= (~obj.valueNum) & 0xFFFF;\n                                        } else {\n                                            newValue |= obj.valueNum;\n                                        }\n                                        setValue(newValue);\n                                    }}\n                                />\n                            </div>\n                        </div>\n                    })}\n                </div>\n            </div>\n        })}\n    </div>;\n}\n\nconst ObjectEditOfAccessControl = ({ onClose, onApply, open, selected, extendObject, objects, t, modalEmptyId, themeType }) => {\n    const [stateOwnerUser, setStateOwnerUser] = useState(null);\n    const [stateOwnerGroup, setStateOwnerGroup] = useState(null);\n    const [ownerUsers, setOwnerUsers] = useState([]);\n    const [ownerGroups, setOwnerGroups] = useState([]);\n    const [applyToChildren, setApplyToChildren] = useState(false);\n    const [checkState, setCheckState] = useState(false);\n    const [childrenCount, setChildrenCount] = useState(0);\n    const [valueObjectAccessControl, setValueObjectAccessControl] = useState(null);\n    const [valueStateAccessControl, setValueStateAccessControl] = useState(null);\n    const [differentOwner, setDifferentOwner] = useState(false);\n    const [differentGroup, setDifferentGroup] = useState(false);\n    const [differentState, setDifferentState] = useState([]);\n    const [differentObject, setDifferentObject] = useState([]);\n    const [maskState, setMaskState] = useState(0);\n    const [maskObject, setMaskObject] = useState(0);\n    const [ids, setIds] = useState([]);\n    const [progress, setProgress] = useState(false);\n\n    const [disabledButton, setDisabledButton] = useState(true);\n\n    const different = t('different');\n\n    useEffect(() => {\n        let count = 0\n        let _differentState = [];\n        let _differentObject = [];\n\n        let id = selected || modalEmptyId;\n        let idWithDot = id + '.';\n        const keys = Object.keys(objects).sort();\n        let _checkState = false;\n        let groups = [];\n        let users = [];\n        const lang = I18n.getLanguage();\n\n        let _differentOwner = false;\n        let _differentGroup = false;\n        let _stateOwnerUser = null;\n        let _stateOwnerGroup = null;\n        let _valueObjectAccessControl = null;\n        let _valueStateAccessControl = null;\n        const _ids = [];\n\n        for (let k = 0; k < keys.length; k++) {\n            const key = keys[k];\n            const obj = objects[key];\n            if (obj && (key === id || key.startsWith(idWithDot))) {\n                count++;\n                _ids.push(key);\n                if (!obj.acl) {\n                    continue;\n                }\n\n                if (_valueObjectAccessControl === null && obj.acl.object !== undefined) {\n                    _valueObjectAccessControl = obj.acl.object;\n                }\n                if (_valueStateAccessControl === null && obj.acl.state !== undefined) {\n                    _valueStateAccessControl = obj.acl.state;\n                }\n                if (_stateOwnerUser === null && obj.acl.owner !== undefined) {\n                    _stateOwnerUser = obj.acl.owner;\n                }\n                if (_stateOwnerGroup === null && obj.acl.ownerGroup !== undefined) {\n                    _stateOwnerGroup = obj.acl.ownerGroup;\n                }\n\n                if (!differentOwner && _stateOwnerUser !== obj.acl.owner && obj.acl.owner !== undefined) {\n                    _differentOwner = true;\n                }\n                if (!differentGroup && _stateOwnerGroup !== obj.acl.ownerGroup && obj.acl.ownerGroup !== undefined) {\n                    _differentGroup = true;\n                }\n                if (obj.acl.state !== undefined && _valueStateAccessControl !== obj.acl.state && !_differentState.includes(obj.acl.state)) {\n                    _differentState.push(obj.acl.state);\n                }\n                if (obj.acl.object !== undefined && _valueObjectAccessControl !== obj.acl.object && !_differentObject.includes(obj.acl.object)) {\n                    _differentObject.push(obj.acl.object);\n                }\n                if (obj.type === 'state') {\n                    _checkState = true;\n                }\n            }\n\n            if (key.startsWith('system.group.') && obj?.type === 'group') {\n                groups.push({\n                    name: Utils.getObjectNameFromObj(obj, lang).replace('system.group.', ''),\n                    value: key,\n                    icon: obj.common?.icon,\n                    color: obj.common?.color,\n                });\n            } else\n                if (key.startsWith('system.user.') && obj?.type === 'user') {\n                    users.push({\n                        name: Utils.getObjectNameFromObj(obj, lang).replace('system.user.', ''),\n                        value: key,\n                        icon: obj.common?.icon,\n                        color: obj.common?.color,\n                    });\n                }\n        }\n\n        _stateOwnerUser = _stateOwnerUser || objects['system.config'].common.defaultNewAcl.owner;\n        _stateOwnerGroup = _stateOwnerGroup || objects['system.config'].common.defaultNewAcl.ownerGroup;\n        _valueObjectAccessControl = _valueObjectAccessControl || objects['system.config'].common.defaultNewAcl.object;\n        setValueObjectAccessControl(isNaN(_valueObjectAccessControl) ? objects['system.config'].common.defaultNewAcl.object : _valueObjectAccessControl);\n\n        if (_checkState) {\n            _valueStateAccessControl = _valueStateAccessControl || objects['system.config'].common.defaultNewAcl.state;\n            setValueStateAccessControl(isNaN(_valueStateAccessControl) ? objects['system.config'].common.defaultNewAcl.state : _valueStateAccessControl);\n        }\n\n        const userItem = users.find(item => item.value === _stateOwnerUser);\n        const groupItem = groups.find(item => item.value === _stateOwnerGroup);\n\n        setStateOwnerUser(userItem);\n        setStateOwnerGroup(groupItem);\n\n        setDifferentOwner(_differentOwner);\n        setDifferentGroup(_differentGroup);\n\n        setOwnerUsers(users);\n        setOwnerGroups(groups);\n\n        _checkState && setCheckState(true);\n        modalEmptyId && setApplyToChildren(true);\n        setChildrenCount(count);\n\n        setDifferentState(_differentState);\n        setDifferentObject(_differentObject);\n\n        setIds(_ids);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [objects, selected]);\n\n    useEffect(() => {\n        if (applyToChildren) {\n            if (differentGroup) {\n                stateOwnerGroup.value !== 'different' && setStateOwnerGroup({ name: different, value: 'different' });\n                if (!ownerGroups.find(item => item.value === 'different')) {\n                    setOwnerGroups(el => ([{\n                        name: different,\n                        value: 'different'\n                    }, ...el]));\n                }\n            }\n\n            if (differentOwner) {\n                stateOwnerUser.value !== 'different' && setStateOwnerUser({ name: different, value: 'different' });\n                if (!ownerUsers.find(item => item.value === 'different')) {\n                    setOwnerUsers(el => ([{\n                        name: different,\n                        value: 'different'\n                    }, ...el]));\n                }\n            }\n        } else {\n            if (stateOwnerUser && stateOwnerUser.value === 'different') {\n                setStateOwnerUser(objects[selected].acl.owner);\n            }\n            if (stateOwnerGroup && stateOwnerGroup.value === 'different') {\n                setStateOwnerGroup(objects[selected].acl.ownerGroup);\n            }\n            // remove different from list\n            setOwnerGroups(el => el.filter(({ value }) => value !== 'different'));\n            setOwnerUsers(el => el.filter(({ value }) => value !== 'different'));\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [applyToChildren, /*stateOwnerUser, stateOwnerGroup,*/ differentOwner, differentGroup]);\n\n    if (!ids.length) {\n        return <LinearProgress />;\n    } else {\n        return <CustomModal\n            open={open}\n            titleButtonApply=\"apply\"\n            overflowHidden\n            applyDisabled={disabledButton}\n            progress={progress}\n            onClose={onClose}\n            onApply={() => {\n                setProgress(true);\n                setTimeout(async () => {\n                    if (!applyToChildren) {\n                        let newAcl = JSON.parse(JSON.stringify(objects[selected].acl || {}));\n                        newAcl.object = valueObjectAccessControl;\n                        newAcl.owner = stateOwnerUser.value;\n                        newAcl.ownerGroup = stateOwnerGroup.value;\n\n                        if (objects[selected].type === 'state') {\n                            newAcl.state = valueStateAccessControl;\n                        }\n                        extendObject(selected, { acl: newAcl });\n                    }\n                    else {\n                        //let maskState = Object.keys(differentHexState).reduce((sum, key) => sum | (differentHexState[key] ? parseInt(key, 16) : 0), 0);\n                        let _maskState = ~maskState & 0xFFFF;\n\n                        //let maskObject = Object.keys(differentHexObject).reduce((sum, key) => sum | (differentHexObject[key] ? parseInt(key, 16) : 0), 0);\n                        let _maskObject = ~maskObject & 0xFFFF;\n\n                        for (let i = 0; i < ids.length; i++) {\n                            const key = ids[i];\n                            const obj = objects[key];\n                            let newAcl = JSON.parse(JSON.stringify(obj.acl || {}));\n                            newAcl.object = newValueAccessControl(obj.acl.object, valueObjectAccessControl, _maskState);\n                            if (stateOwnerUser.value !== 'different') {\n                                newAcl.owner = stateOwnerUser.value;\n                            }\n                            if (stateOwnerGroup.value !== 'different') {\n                                newAcl.ownerGroup = stateOwnerGroup.value;\n                            }\n                            if (obj.type === 'state') {\n                                newAcl.state = newValueAccessControl(obj.acl.state, valueStateAccessControl, _maskObject);\n                            }\n                            await extendObject(key, { acl: newAcl });\n                        }\n                    }\n\n                    setProgress(false);\n                    onApply();\n                }, 200);\n            }}>\n\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <div style={{\n                    margin: 10,\n                    fontSize: 20\n                }}>{t('Access control list: %s', selected || modalEmptyId)}</div>\n                <div style={{ display: 'flex' }}>\n                    <FormControl fullWidth style={{ marginRight: 10 }}>\n                        <InputLabel>{t('Owner user')}</InputLabel>\n                        <Select\n                            disabled={progress}\n                            value={stateOwnerUser.value}\n                            renderValue={value => <span>{stateOwnerUser.icon ? <Icon src={stateOwnerUser.icon} style={{ width: 16, height: 16, marginRight: 8 }} /> : null}{stateOwnerUser.name}</span>}\n                            style={stateOwnerUser.value === 'different' ? { opacity: 0.5 } : { color: stateOwnerUser.color || undefined, backgroundColor: Utils.getInvertedColor(stateOwnerUser.color, themeType) }}\n                            onChange={el => {\n                                const userItem = ownerUsers.find(item => item.value === el.target.value);\n                                setStateOwnerUser(userItem);\n                                setDisabledButton(false);\n                            }}\n                        >\n                            {ownerUsers.map(el => <MenuItem style={el.value === 'different' ? { opacity: 0.5 } : { color: el.color || undefined, backgroundColor: Utils.getInvertedColor(el.color, themeType) }} key={el.value} value={el.value}>\n                                {el.icon ? <Icon src={el.icon} style={{ width: 16, height: 16, marginRight: 8 }} /> : null}\n                                {el.name}\n                            </MenuItem>)}\n                        </Select>\n                    </FormControl>\n                    <FormControl fullWidth>\n                        <InputLabel>{t('Owner group')}</InputLabel>\n                        <Select\n                            disabled={progress}\n                            value={stateOwnerGroup.value}\n                            renderValue={value => <span>{stateOwnerGroup.icon ? <Icon src={stateOwnerGroup.icon} style={{ width: 16, height: 16, marginRight: 8 }} /> : null}{stateOwnerGroup.name}</span>}\n                            style={stateOwnerGroup.value === 'different' ? { opacity: 0.5 } : { color: stateOwnerGroup.color || undefined, backgroundColor: Utils.getInvertedColor(stateOwnerGroup.color, themeType) }}\n                            onChange={el => {\n                                const groupItem = ownerGroups.find(item => item.value === el.target.value);\n                                setStateOwnerGroup(groupItem);\n                                setDisabledButton(false);\n                            }}\n                        >\n                            {ownerGroups.map(el => <MenuItem key={el.value} value={el.value} style={el.value === 'different' ? { opacity: 0.5 } : { color: el.color || undefined, backgroundColor: Utils.getInvertedColor(el.color, themeType) }}>\n                                {el.icon ? <Icon src={el.icon} style={{ width: 16, height: 16, marginRight: 8 }} /> : null}\n                                {el.name}\n                            </MenuItem>)}\n                        </Select>\n                    </FormControl>\n                </div>\n\n                <div style={{\n                    display: 'flex',\n                    margin: 10,\n                    alignItems: 'center',\n                    fontSize: 10,\n                    marginLeft: 0,\n                    color: 'silver'\n                }}>\n                    <div style={!applyToChildren ? { color: 'green' } : null}>{t('to apply one item')}</div>\n                    <Switch\n                        disabled={progress || !!modalEmptyId || childrenCount === 1}\n                        checked={!!modalEmptyId || applyToChildren}\n                        onChange={e => {\n                            setApplyToChildren(e.target.checked);\n                            setDisabledButton(false);\n                        }}\n                        color=\"primary\"\n                    />\n                    <div style={applyToChildren ? { color: 'green' } : null}>{t('to apply with children')} {(modalEmptyId || childrenCount > 1) ? `(${childrenCount} ${t('object(s)')})` : ''}</div>\n                </div>\n\n                {progress && <LinearProgress />}\n\n                <div style={{ overflowY: 'auto' }}>\n                    <div>\n                        <h2>{t('Object rights')}</h2>\n                        <ObjectRights\n                            mask={maskObject}\n                            disabled={progress}\n                            setMask={setMaskObject}\n                            applyToChildren={applyToChildren}\n                            differentValues={differentObject}\n                            t={t}\n                            setValue={e => {\n                                setValueObjectAccessControl(e);\n                                setDisabledButton(false);\n                            }}\n                            value={valueObjectAccessControl} />\n                    </div>\n                    {checkState && <div>\n                        <h2>{t('States rights')}</h2>\n                        <ObjectRights\n                            mask={maskState}\n                            disabled={progress}\n                            setMask={setMaskState}\n                            applyToChildren={applyToChildren}\n                            differentValues={applyToChildren ? differentState : []}\n                            t={t}\n                            setValue={e => {\n                                setValueStateAccessControl(e);\n                                setDisabledButton(false);\n                            }}\n                            value={valueStateAccessControl} />\n                    </div>}\n                </div>\n            </div>\n        </CustomModal>;\n    }\n}\n\nexport default ObjectEditOfAccessControl;","import withWidth from '@material-ui/core/withWidth';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\n\n// icons\nimport IconCancel from '@material-ui/icons/Close';\nimport IconDeleteOne from '@material-ui/icons/Delete';\nimport IconDeleteAll from '@material-ui/icons/Delete';\n\nimport ObjectBrowser from '../components/ObjectBrowser';\nimport ObjectCustomDialog from '../dialogs/ObjectCustomDialog';\nimport Router from '@iobroker/adapter-react/Components/Router';\nimport ObjectBrowserValue from '../components/Object/ObjectBrowserValue';\nimport ObjectBrowserEditObject from '../components/Object/ObjectBrowserEditObject';\nimport ObjectBrowserEditRole from '../components/Object/ObjectBrowserEditRole';\nimport ObjectAddNewObject from '../dialogs/ObjectAddNewObject';\nimport ObjectEditOfAccessControl from '../dialogs/ObjectEditOfAccessControl';\n\nconst styles = theme => ({\n    buttonIcon: {\n        marginRight: 4,\n    },\n    buttonAll: {\n        color: '#FF0000',\n    },\n    id: {\n        fontStyle: 'italic',\n    },\n    buttonText: {\n        whiteSpace: 'nowrap'\n    }\n});\nclass Objects extends Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.dialogName = 'AdminObjects';\n\n        this.filters = window.localStorage.getItem(`${this.dialogName || 'App'}.filters`) || '{}';\n\n        try {\n            this.filters = JSON.parse(this.filters);\n        } catch (e) {\n            this.filters = {};\n        }\n\n        let selected = window.localStorage.getItem(`${this.dialogName || 'App'}.selected`) || '';\n\n        this.state = {\n            selected: this.props.selected === undefined ? selected : '',\n            name: '',\n            toast: '',\n            deleteObjectShow: null,\n            //suppressDeleteConfirm: false,\n        };\n        this.t = this.translate;\n        this.wordCache = {};\n    }\n\n    translate = (word, arg1, arg2) => {\n        if (arg1 !== undefined) {\n            return this.props.t(word, arg1, arg2);\n        }\n\n        if (!this.wordCache[word]) {\n            this.wordCache[word] = this.props.t(word);\n        }\n\n        return this.wordCache[word];\n    }\n\n    onDelete(withChildren) {\n        const id = this.state.deleteObjectShow.id;\n        if (withChildren) {\n            this.props.socket.delObjects(id, true)\n                .then(() => this.setState({ toast: this.t('All deleted') }))\n                .catch(e => window.alert('Cannot delete object: ' + e));\n\n            this.setState({ deleteObjectShow: null });\n        } else {\n            this.props.socket.delObject(id, false)\n                .catch(e => window.alert('Cannot delete object: ' + e));\n            this.setState({ deleteObjectShow: null })\n        }\n    }\n\n    renderToast() {\n        return <Snackbar\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}\n            open={!!this.state.toast}\n            autoHideDuration={3000}\n            onClose={() => this.setState({ toast: '' })}\n            message={this.state.toast}\n            action={\n                <React.Fragment>\n                    <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={() => this.setState({ toast: '' })}>\n                        <IconCancel fontSize=\"small\" />\n                    </IconButton>\n                </React.Fragment>\n            }\n        />;\n    }\n\n    renderDeleteDialog() {\n        if (!this.state.deleteObjectShow) {\n            return null;\n        } else {\n            return <Dialog\n                key=\"delete\"\n                maxWidth=\"md\"\n                open={true}\n                onClose={() => this.setState({ deleteObjectShow: null })}\n                aria-labelledby=\"delete-object-dialog-title\"\n                aria-describedby=\"delete-object-dialog-description\"\n            >\n                <DialogTitle id=\"delete-object-dialog-title\">{this.state.deleteObjectShow.hasChildren ? this.t('Delete object(s)') : this.t('Delete object')}: <span className={this.props.classes.id}>{this.state.deleteObjectShow.id}</span></DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        {this.t('Are you sure?')}\n                        {/*<FormControlLabel\n                            control={<Checkbox\n                                checked={this.state.suppressDeleteConfirm}\n                                onChange={() => {\n                                    this.setState({suppressDeleteConfirm: true});\n\n                                }}\n                                name=\"checkedA\" />\n                            }\n                            label=\"Secondary\"\n                        />*/}\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    {this.state.deleteObjectShow.hasChildren ? <Button variant=\"contained\" classes={{label: this.props.classes.buttonText}} onClick={() => this.onDelete(true)} startIcon={<IconDeleteAll className={this.props.classes.buttonAll} />}>{this.t('Delete with children')}</Button> : null}\n                    {this.state.deleteObjectShow.exists ? <Button variant=\"contained\" classes={{label: this.props.classes.buttonText}} onClick={() => this.onDelete(false)} color=\"primary\" startIcon={<IconDeleteOne />} autoFocus>{this.t('Delete one item')}</Button> : null}\n                    <Button variant=\"contained\" onClick={() => this.setState({ deleteObjectShow: null })} startIcon={<IconCancel />}>{this.t('ra_Cancel')}</Button>\n                </DialogActions>\n            </Dialog>;\n        }\n    }\n\n    render() {\n        return [\n            <ObjectBrowser\n                key=\"browser\"\n                dialogName=\"admin\"\n                objectsWorker={this.props.objectsWorker}\n                prefix={this.props.prefix}\n                defaultFilters={this.filters}\n                statesOnly={this.props.statesOnly}\n                style={{ width: '100%', height: '100%' }}\n                socket={this.props.socket}\n                selected={this.state.selected}\n                name={this.state.name}\n                expertMode={this.props.expertMode}\n                isFloatComma={this.props.isFloatComma}\n                dateFormat={this.props.dateFormat}\n                t={this.t}\n                lang={this.props.lang}\n                themeName={this.props.themeName}\n                themeType={this.props.themeType}\n                theme={this.props.theme}\n                objectCustomDialog={ObjectCustomDialog}\n                objectBrowserValue={ObjectBrowserValue}\n                objectBrowserEditObject={ObjectBrowserEditObject}\n                objectBrowserEditRole={ObjectBrowserEditRole}\n                router={Router}\n                enableStateValueEdit={true}\n                onObjectDelete={(id, hasChildren, exists) =>\n                    this.setState({ deleteObjectShow: { id, hasChildren, exists } })}\n                onFilterChanged={filterConfig => {\n                    this.filters = filterConfig;\n                    window.localStorage.setItem(`${this.dialogName || 'App'}.filters`, JSON.stringify(filterConfig));\n                }}\n                onSelect={selected =>\n                    window.localStorage.setItem(`${this.dialogName || 'App'}.selected`, selected[0] || '')}\n                objectEditBoolean\n                objectAddBoolean\n                objectStatesView\n                objectImportExport\n                objectEditOfAccessControl\n                modalNewObject={context =>\n                    <ObjectAddNewObject\n                        objects={context.objects}\n                        open={context.state.modalNewObj}\n                        setObject={(id, data) => context.setObject(id, data)}\n                        selected={context.state.selected[0] || context.state.selectedNonObject}\n                        onClose={() => context.setState({ modalNewObj: false })}\n                        onApply={() => context.setState({ modalNewObj: false })} />\n                }\n                modalEditOfAccessControl={(context, objData) =>\n                    <ObjectEditOfAccessControl\n                        themeType={this.props.themeType}\n                        open={context.state.modalEditOfAccess}\n                        extendObject={(id, data) => {\n                            context.extendObject(id, data);\n                            objData.aclTooltip = null;\n                        }}\n                        selected={context.state.selected[0]}\n                        modalEmptyId={context.state.modalEmptyId}\n                        objects={context.objects}\n                        t={this.t}\n                        onClose={() => context.setState({ modalEditOfAccess: false, modalEditOfAccessObjData: null, modalEmptyId: null })}\n                        onApply={() => context.setState({ modalEditOfAccess: false, modalEditOfAccessObjData: null, modalEmptyId: null })} />\n                }\n            />,\n            this.renderDeleteDialog()\n        ];\n    }\n}\n\nObjects.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    socket: PropTypes.object,\n    themeName: PropTypes.string,\n    themeType: PropTypes.string,\n    theme: PropTypes.object,\n    expertMode: PropTypes.bool,\n    isFloatComma: PropTypes.bool,\n    dateFormat: PropTypes.string,\n    objectsWorker: PropTypes.object,\n};\n\n/** @type {typeof Objects} */\nconst _export = withWidth()(withStyles(styles)(Objects));\nexport default _export;"],"sourceRoot":""}